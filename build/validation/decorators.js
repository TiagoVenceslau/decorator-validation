"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.url=exports.email=exports.pattern=exports.maxlength=exports.minlength=exports.max=exports.min=exports.required=exports.getValidationKey=void 0,require("reflect-metadata");var constants_1=require("./constants"),getValidationKey=function(t){return constants_1.ValidationKeys.REFLECT+t};exports.getValidationKey=getValidationKey;var required=function(n){return void 0===n&&(n=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.REQUIRED),{message:n},t,e)}};exports.required=required;var min=function(n,a){return void 0===a&&(a=constants_1.DEFAULT_ERROR_MESSAGES.MIN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN),{value:n,message:a},t,e)}};exports.min=min;var max=function(n,a){return void 0===a&&(a=constants_1.DEFAULT_ERROR_MESSAGES.MAX),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX),{value:n,message:a},t,e)}};exports.max=max;var minlength=function(n,a){return void 0===a&&(a=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN_LENGTH),{value:n,message:a},t,e)}};exports.minlength=minlength;var maxlength=function(n,a){return void 0===a&&(a=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX_LENGTH),{value:n,message:a},t,e)}};exports.maxlength=maxlength;var pattern=function(n,a){return void 0===a&&(a=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.PATTERN),{value:"string"==typeof n?n:n.toString(),message:a},t,e)}};exports.pattern=pattern;var email=function(n){return void 0===n&&(n=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.EMAIL),{message:n},t,e)}};exports.email=email;var url=function(n){return void 0===n&&(n=constants_1.DEFAULT_ERROR_MESSAGES.URL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.URL),{message:n},t,e)}};exports.url=url;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb24vZGVjb3JhdG9ycy5qcyIsInZhbGlkYXRpb24vZGVjb3JhdG9ycy50cyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInBhdHRlcm4iLCJtYXhsZW5ndGgiLCJtaW5sZW5ndGgiLCJtYXgiLCJtaW4iLCJyZXF1aXJlZCIsImdldFZhbGlkYXRpb25LZXkiLCJyZXF1aXJlIiwiY29uc3RhbnRzXzEiLCJrZXkiLCJWYWxpZGF0aW9uS2V5cyIsIlJFRkxFQ1QiLCJtZXNzYWdlIiwiREVGQVVMVF9FUlJPUl9NRVNTQUdFUyIsIlJFUVVJUkVEIiwidGFyZ2V0IiwicHJvcGVydHlLZXkiLCJSZWZsZWN0IiwiZGVmaW5lTWV0YWRhdGEiLCJNSU4iLCJNQVgiLCJNSU5fTEVOR1RIIiwiTUFYX0xFTkdUSCIsIlBBVFRFUk4iLCJ0b1N0cmluZyIsImVtYWlsIiwiRU1BSUwiLCJ1cmwiLCJVUkwiXSwibWFwcGluZ3MiOiJhQUNBQSxPQUFPQyxlQUFlQyxRQUFTLGFBQWMsQ0FBRUMsT0FBTyxJQUF0REgsUUFBT0MsSUFBQUEsUUFBZUMsTUFBdEJBLFFBQStCRSxRQUFjRixRQUFBRyxVQUFBSCxRQUFBSSxVQUFBSixRQUFBSyxJQUFBTCxRQUFBTSxJQUFBTixRQUFBTyxTQUFBUCxRQUFBUSxzQkFBQSxFQ0s3Q0MsUUFBQSxvQkFDQSxJQUFBQyxZQUFBRCxRQUFBLGVBV2FELGlCQUFtQixTQUFDRyxHQUFnQixPQUFBRCxZQUFBRSxlQUFlQyxRQUFVRixHQUE3RFgsUUFBQVEsaUJBQWdCQSxpQkFZdEIsSUFBTUQsU0FBVyxTQUFDTyxHQUFzRCxZQUF0RCxJQUFBQSxJQUFBQSxFQUFrQkosWUFBQUssdUJBQXVCQyxVQUFhLFNBQUNDLEVBQWFDLEdBQ3pGQyxRQUFRQyxlQUNKcEIsUUFBQVEsaUJBQWlCRSxZQUFBRSxlQUFlSSxVQUNoQyxDQUNJRixRQUFTQSxHQUViRyxFQUNBQyxLQVBLbEIsUUFBQU8sU0FBUUEsU0FzQmQsSUFBTUQsSUFBTSxTQUFDTCxFQUErQmEsR0FBaUQsWUFBakQsSUFBQUEsSUFBQUEsRUFBa0JKLFlBQUFLLHVCQUF1Qk0sS0FBUSxTQUFDSixFQUFnQkMsR0FDakhDLFFBQVFDLGVBQ0pwQixRQUFBUSxpQkFBaUJFLFlBQUFFLGVBQWVTLEtBQ2hDLENBQ0lwQixNQUFPQSxFQUNQYSxRQUFTQSxHQUViRyxFQUNBQyxLQVJLbEIsUUFBQU0sSUFBR0EsSUF1QlQsSUFBTUQsSUFBTSxTQUFDSixFQUErQmEsR0FBaUQsWUFBakQsSUFBQUEsSUFBQUEsRUFBa0JKLFlBQUFLLHVCQUF1Qk8sS0FBUSxTQUFDTCxFQUFnQkMsR0FDakhDLFFBQVFDLGVBQ0pwQixRQUFBUSxpQkFBaUJFLFlBQUFFLGVBQWVVLEtBQ2hDLENBQ0lyQixNQUFPQSxFQUNQYSxRQUFTQSxHQUViRyxFQUNBQyxLQVJLbEIsUUFBQUssSUFBR0EsSUF1QlQsSUFBTUQsVUFBWSxTQUFDSCxFQUFlYSxHQUF3RCxZQUF4RCxJQUFBQSxJQUFBQSxFQUFrQkosWUFBQUssdUJBQXVCUSxZQUFlLFNBQUNOLEVBQWdCQyxHQUM5R0MsUUFBUUMsZUFDSnBCLFFBQUFRLGlCQUFpQkUsWUFBQUUsZUFBZVcsWUFDaEMsQ0FDSXRCLE1BQU9BLEVBQ1BhLFFBQVNBLEdBRWJHLEVBQ0FDLEtBUktsQixRQUFBSSxVQUFTQSxVQXVCZixJQUFNRCxVQUFZLFNBQUNGLEVBQWVhLEdBQXdELFlBQXhELElBQUFBLElBQUFBLEVBQWtCSixZQUFBSyx1QkFBdUJTLFlBQWUsU0FBQ1AsRUFBZ0JDLEdBQzlHQyxRQUFRQyxlQUNKcEIsUUFBQVEsaUJBQWlCRSxZQUFBRSxlQUFlWSxZQUNoQyxDQUNJdkIsTUFBT0EsRUFDUGEsUUFBU0EsR0FFYkcsRUFDQUMsS0FSS2xCLFFBQUFHLFVBQVNBLFVBdUJmLElBQU1ELFFBQVUsU0FBQ0QsRUFBd0JhLEdBQXFELFlBQXJELElBQUFBLElBQUFBLEVBQWtCSixZQUFBSyx1QkFBdUJVLFNBQVksU0FBQ1IsRUFBZ0JDLEdBQ2xIQyxRQUFRQyxlQUNKcEIsUUFBQVEsaUJBQWlCRSxZQUFBRSxlQUFlYSxTQUNoQyxDQUNJeEIsTUFBd0IsaUJBQVZBLEVBQXFCQSxFQUFRQSxFQUFNeUIsV0FDakRaLFFBQVNBLEdBRWJHLEVBQ0FDLEtBUktsQixRQUFBRSxRQUFPQSxRQXNCYixJQUFNeUIsTUFBUSxTQUFDYixHQUFtRCxZQUFuRCxJQUFBQSxJQUFBQSxFQUFrQkosWUFBQUssdUJBQXVCYSxPQUFVLFNBQUNYLEVBQWdCQyxHQUN0RkMsUUFBUUMsZUFDSnBCLFFBQUFRLGlCQUFpQkUsWUFBQUUsZUFBZWdCLE9BQ2hDLENBQ0lkLFFBQVNBLEdBRWJHLEVBQ0FDLEtBUEtsQixRQUFBMkIsTUFBS0EsTUFxQlgsSUFBTUUsSUFBTSxTQUFDZixHQUFpRCxZQUFqRCxJQUFBQSxJQUFBQSxFQUFrQkosWUFBQUssdUJBQXVCZSxLQUFRLFNBQUNiLEVBQWdCQyxHQUNsRkMsUUFBUUMsZUFDSnBCLFFBQUFRLGlCQUFpQkUsWUFBQUUsZUFBZWtCLEtBQ2hDLENBQ0loQixRQUFTQSxHQUViRyxFQUNBQyxLQVBLbEIsUUFBQTZCLElBQUdBIiwiZmlsZSI6InZhbGlkYXRpb24vZGVjb3JhdG9ycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy51cmwgPSBleHBvcnRzLmVtYWlsID0gZXhwb3J0cy5wYXR0ZXJuID0gZXhwb3J0cy5tYXhsZW5ndGggPSBleHBvcnRzLm1pbmxlbmd0aCA9IGV4cG9ydHMubWF4ID0gZXhwb3J0cy5taW4gPSBleHBvcnRzLnJlcXVpcmVkID0gZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5ID0gdm9pZCAwO1xucmVxdWlyZShcInJlZmxlY3QtbWV0YWRhdGFcIik7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgZ2V0VmFsaWRhdGlvbktleSA9IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFRkxFQ1QgKyBrZXk7IH07XG5leHBvcnRzLmdldFZhbGlkYXRpb25LZXkgPSBnZXRWYWxpZGF0aW9uS2V5O1xudmFyIHJlcXVpcmVkID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFUVVJUkVEKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucmVxdWlyZWQgPSByZXF1aXJlZDtcbnZhciBtaW4gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTjsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU4pLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5taW4gPSBtaW47XG52YXIgbWF4ID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVg7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4ID0gbWF4O1xudmFyIG1pbmxlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWlubGVuZ3RoID0gbWlubGVuZ3RoO1xudmFyIG1heGxlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4bGVuZ3RoID0gbWF4bGVuZ3RoO1xudmFyIHBhdHRlcm4gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk47IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUEFUVEVSTiksIHtcbiAgICAgICAgICAgIHZhbHVlOiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB2YWx1ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucGF0dGVybiA9IHBhdHRlcm47XG52YXIgZW1haWwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUw7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuRU1BSUwpLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5lbWFpbCA9IGVtYWlsO1xudmFyIHVybCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkw7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuVVJMKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMudXJsID0gdXJsOyIsIi8qKlxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5cblxuaW1wb3J0IFwicmVmbGVjdC1tZXRhZGF0YVwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cblxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRWYWxpZGF0aW9uS2V5ID0gKGtleTogc3RyaW5nKSA9PiBWYWxpZGF0aW9uS2V5cy5SRUZMRUNUICsga2V5O1xuXG4vKipcbiAqIE1hcmtzIHRoZSBwcm9wZXJ0eSBhcyByZXF1aXJlZC5cbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuUkVRVUlSRUR9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUR9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCByZXF1aXJlZCA9IChtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEKSA9PiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLlJFUVVJUkVEKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWluaW11bSB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1JTn1cbiAqXG4gKiBAcGFyYW0ge251bWJlciB8IERhdGV9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU59XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBtaW4gPSAodmFsdWU6IG51bWJlciB8IERhdGUgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLk1JTiksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIG1heGltdW0gdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NQVh9XG4gKlxuICogQHBhcmFtIHtudW1iZXIgfCBEYXRlfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWF4ID0gKHZhbHVlOiBudW1iZXIgfCBEYXRlIHwgc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NQVgpLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBtaW5pbXVtIGxlbmd0aCBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEh9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWlubGVuZ3RoID0gKHZhbHVlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWF4aW11bSBsZW5ndGggZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IG1heGxlbmd0aCA9ICh2YWx1ZTogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEgpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIFJlZ0V4cCBwYXR0ZXJuIHRoZSBwcm9wZXJ0eSBtdXN0IHJlc3BlY3RcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuUEFUVEVSTn1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk59XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBwYXR0ZXJuID0gKHZhbHVlOiBSZWdFeHAgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTikgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5QQVRURVJOKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHByb3BlcnR5IGFzIGFuIGVtYWlsXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLkVNQUlMfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgZW1haWwgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5FTUFJTCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgcHJvcGVydHkgYXMgYW4gVVJMXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLlVSTH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkx9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCB1cmwgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkwpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuVVJMKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn0iXX0=
