"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=exports.Model=exports.Validation=void 0,exports.Validation=__importStar(require("./validation")),exports.Model=__importStar(require("./Model")),exports.Utils=__importStar(require("./utils"));var __spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};function getPropertyDecorators(r,o,n){var t=Reflect.getMetadataKeys(o,n).filter(function(t){return t.toString().startsWith(r)}).reduce(function(t,e){e={key:e.substring(r.length),props:Reflect.getMetadata(e,o,n)};return t.concat(e)},[]);return{prop:n,decorators:t}}function stringFormat(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:t})}function isEqual(e,r){for(var o=[],t=2;t<arguments.length;t++)o[t-2]=arguments[t];if(e===r)return!0;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(!e||!r||"object"!=typeof e&&"object"!=typeof r)return e===r;if(null==e||null==r)return!1;if(e.prototype!==r.prototype)return!1;var n=Object.keys(e).filter(function(t){return-1===o.indexOf(t)});return n.length===Object.keys(r).filter(function(t){return-1===o.indexOf(t)}).length&&n.every(function(t){return-1!==o.indexOf(t)||isEqual.apply(void 0,__spreadArray([e[t],r[t]],o))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEqual=exports.stringFormat=exports.getPropertyDecorators=void 0,exports.getPropertyDecorators=getPropertyDecorators,exports.stringFormat=stringFormat,exports.isEqual=isEqual,Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ERROR_MESSAGES=exports.ValidationKeys=void 0,exports.ValidationKeys={REFLECT:"model.validation.",REQUIRED:"required",MIN:"min",MAX:"max",MIN_LENGTH:"minlength",MAX_LENGTH:"maxlength",PATTERN:"pattern",EMAIL:"email",URL:"url"},exports.DEFAULT_ERROR_MESSAGES={REQUIRED:"This field is required",MIN:"The minimum value is {0}",MAX:"The maximum value is {0}",MIN_LENGTH:"The minimum length is {0}",MAX_LENGTH:"The maximum length is {0}",PATTERN:"The value does not match the pattern",EMAIL:"The value is not a valid email",URL:"The value is not a valid URL",DEFAULT:"There is an Error"},Object.defineProperty(exports,"__esModule",{value:!0}),exports.url=exports.email=exports.pattern=exports.maxlength=exports.minlength=exports.max=exports.min=exports.required=exports.getValidationKey=void 0,require("reflect-metadata");var constants_1=require("./constants"),getValidationKey=function(t){return constants_1.ValidationKeys.REFLECT+t};exports.getValidationKey=getValidationKey;var required=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.REQUIRED),{message:r},t,e)}};exports.required=required;var min=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN),{value:r,message:o},t,e)}};exports.min=min;var max=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX),{value:r,message:o},t,e)}};exports.max=max;var minlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN_LENGTH),{value:r,message:o},t,e)}};exports.minlength=minlength;var maxlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX_LENGTH),{value:r,message:o},t,e)}};exports.maxlength=maxlength;var pattern=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.PATTERN),{value:"string"==typeof r?r:r.toString(),message:o},t,e)}};exports.pattern=pattern;var email=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.EMAIL),{message:r},t,e)}};exports.email=email;var url=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.URL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.URL),{message:r},t,e)}};exports.url=url;var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__exportStar=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||__createBinding(e,t,r)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Validators=exports.Decorators=void 0,exports.Decorators=__importStar(require("./decorators")),__exportStar(require("./types"),exports),__exportStar(require("./validation"),exports),__exportStar(require("./constants"),exports),exports.Validators=__importStar(require("./Validators")),Object.defineProperty(exports,"__esModule",{value:!0});var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.validate=exports.ValidatorRegistry=void 0;var utils_1=require("../utils"),Validators=__importStar(require("./Validators")),constants_1=require("./constants"),Validator_1=__importDefault(require("./Validators/Validator"));function ValRegistry(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new function(){var r={};this.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){t instanceof Validator_1.default?r[t.validationKey]=t:(t=new(t.default||t),r[t.validationKey]=t)})},this.getValidator=function(t){if(t in r)return r[t]}};return r.register.apply(r,t),r}function validate(a){var t,e=[];for(t in a)a.hasOwnProperty(t)&&e.push(utils_1.getPropertyDecorators(constants_1.ValidationKeys.REFLECT,a,t));return e.reduce(function(t,o){var n=o.prop,e=o.decorators;if(!e||!e.length)return t;e=e.reduce(function(t,e){var r=exports.ValidatorRegistry.getValidator(e.key);if(!r)throw new Error("Could not find Matching validator for "+e.key+" for property "+o.prop);r=r.hasErrors.apply(r,__spreadArray([a[n]],Object.values(e.props)));return r&&((t=t||{})[e.key]=r),t},void 0);return e&&(e={property:o.prop,errors:e},(t=t||[]).push(e)),t},void 0)}exports.ValidatorRegistry=ValRegistry.apply(void 0,Object.values(Validators)),exports.validate=validate;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var validation_1=require("../validation"),utils_1=require("../utils"),Model=function(){function e(t){e.constructFromObject(this,t)}return e.prototype.hasErrors=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return validation_1.validate(this)},e.prototype.equals=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.isEqual.apply(void 0,__spreadArray([this,t],e))},e.constructFromObject=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r]);return t},e}();exports.default=Model;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Model=void 0,exports.Model=__importStar(require("./Model"));var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),PatternValidator_1=__importDefault(require("./PatternValidator")),EmailValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),r.call(this,constants_1.ValidationKeys.EMAIL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.emailPat,e)},o.emailPat=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,o}(PatternValidator_1.default);exports.default=EmailValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),e.call(this,constants_1.ValidationKeys.MAX_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length>e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX),e.call(this,constants_1.ValidationKeys.MAX,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return e<t?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),e.call(this,constants_1.ValidationKeys.MIN_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN),e.call(this,constants_1.ValidationKeys.MIN,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),PatternValidator=function(r){function e(t,e){return void 0===t&&(t=constants_1.ValidationKeys.PATTERN),void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),r.call(this,t,e)||this}return __extends(e,r),e.prototype.getPattern=function(t){if(!e.regexpParser.test(t))return new RegExp(t);t=t.match(e.regexpParser);return new RegExp(t[1],t[2])},e.prototype.hasErrors=function(t,e,r){if(t)return(e="string"==typeof e?this.getPattern(e):e).test(t)?void 0:this.getMessage(r||this.message)},e.regexpParser=new RegExp("^/(.+)/([gimus]*)$"),e}(Validator_1.default);exports.default=PatternValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),RequiredValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),e.call(this,constants_1.ValidationKeys.REQUIRED,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e){return t?void 0:this.getMessage(e||this.message)},t}(Validator_1.default);exports.default=RequiredValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),URLValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.URL),r.call(this,constants_1.ValidationKeys.URL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.urlPattern,e)},o.urlPattern=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i,o}((PatternValidator_1=__importDefault(require("./PatternValidator"))).default);exports.default=URLValidator;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("../../utils"),constants_1=require("../constants"),Validator=function(){function t(t,e){void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.DEFAULT),this.validationKey=t,this.message=e}return t.prototype.getMessage=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.stringFormat.apply(void 0,__spreadArray([t],e))},t}();exports.default=Validator;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLValidator=exports.PatternValidator=exports.MinValidator=exports.MinLengthValidator=exports.MaxValidator=exports.MaxLengthValidator=exports.RequiredValidator=exports.EmailValidator=void 0,exports.EmailValidator=__importStar(require("./EmailValidator")),exports.RequiredValidator=__importStar(require("./RequiredValidator")),exports.MaxLengthValidator=__importStar(require("./MaxLengthValidator")),exports.MaxValidator=__importStar(require("./MaxValidator")),exports.MinLengthValidator=__importStar(require("./MinLengthValidator")),exports.MinValidator=__importStar(require("./MinValidator")),exports.PatternValidator=__importStar(require("./PatternValidator")),exports.URLValidator=__importStar(require("./URLValidator"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiaW5kZXgudHMiLCJ1dGlscy5qcyIsInV0aWxzLnRzIiwidmFsaWRhdGlvbi9jb25zdGFudHMuanMiLCJ2YWxpZGF0aW9uL2NvbnN0YW50cy50cyIsInZhbGlkYXRpb24vZGVjb3JhdG9ycy5qcyIsInZhbGlkYXRpb24vZGVjb3JhdG9ycy50cyIsInZhbGlkYXRpb24vaW5kZXguanMiLCJ2YWxpZGF0aW9uL2luZGV4LnRzIiwidmFsaWRhdGlvbi90eXBlcy5qcyIsInZhbGlkYXRpb24vdmFsaWRhdGlvbi5qcyIsInZhbGlkYXRpb24vdmFsaWRhdGlvbi50cyIsIk1vZGVsL01vZGVsLmpzIiwiTW9kZWwvTW9kZWwudHMiLCJNb2RlbC9pbmRleC5qcyIsIk1vZGVsL2luZGV4LnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heExlbmd0aFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NYXhMZW5ndGhWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWF4VmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heFZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5MZW5ndGhWYWxpZGF0b3IuanMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWluTGVuZ3RoVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01pblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5WYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvUGF0dGVyblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9QYXR0ZXJuVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1VSTFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9VUkxWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1ZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC50cyJdLCJuYW1lcyI6WyJfX2NyZWF0ZUJpbmRpbmciLCJ0aGlzIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJ1bmRlZmluZWQiLCJfX3NldE1vZHVsZURlZmF1bHQiLCJ2IiwidmFsdWUiLCJfX2ltcG9ydFN0YXIiLCJtb2QiLCJfX2VzTW9kdWxlIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmVzdWx0IiwiZXhwb3J0cyIsIlV0aWxzIiwiTW9kZWwiLCJWYWxpZGF0aW9uIiwicmVxdWlyZSIsIl9fc3ByZWFkQXJyYXkiLCJ0byIsImZyb20iLCJpIiwiaWwiLCJsZW5ndGgiLCJqIiwiZ2V0UHJvcGVydHlEZWNvcmF0b3JzIiwiYW5ub3RhdGlvblByZWZpeCIsInRhcmdldCIsInByb3BlcnR5TmFtZSIsImRlY29yYXRvcnMiLCJSZWZsZWN0IiwiZ2V0TWV0YWRhdGFLZXlzIiwiZmlsdGVyIiwia2V5IiwidG9TdHJpbmciLCJzdGFydHNXaXRoIiwicmVkdWNlIiwidmFsdWVzIiwiY3VyclZhbHVlcyIsInN1YnN0cmluZyIsInByb3BzIiwiZ2V0TWV0YWRhdGEiLCJjb25jYXQiLCJwcm9wIiwic3RyaW5nRm9ybWF0Iiwic3RyaW5nIiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwicmVwbGFjZSIsIm1hdGNoIiwibnVtYmVyIiwiaXNFcXVhbCIsImEiLCJiIiwicHJvcHNUb0lnbm9yZSIsIkRhdGUiLCJnZXRUaW1lIiwia2V5cyIsImluZGV4T2YiLCJldmVyeSIsImFwcGx5IiwiREVGQVVMVF9FUlJPUl9NRVNTQUdFUyIsIlZhbGlkYXRpb25LZXlzIiwiUkVGTEVDVCIsIlJFUVVJUkVEIiwiTUlOIiwiTUFYIiwiTUlOX0xFTkdUSCIsIk1BWF9MRU5HVEgiLCJQQVRURVJOIiwiRU1BSUwiLCJVUkwiLCJERUZBVUxUIiwidXJsIiwiZW1haWwiLCJwYXR0ZXJuIiwibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwibWF4IiwibWluIiwicmVxdWlyZWQiLCJnZXRWYWxpZGF0aW9uS2V5IiwiY29uc3RhbnRzXzEiLCJtZXNzYWdlIiwicHJvcGVydHlLZXkiLCJkZWZpbmVNZXRhZGF0YSIsIl9fZXhwb3J0U3RhciIsInAiLCJWYWxpZGF0b3JzIiwiRGVjb3JhdG9ycyIsIl9faW1wb3J0RGVmYXVsdCIsImRlZmF1bHQiLCJ2YWxpZGF0ZSIsIlZhbGlkYXRvclJlZ2lzdHJ5IiwidXRpbHNfMSIsIlZhbGlkYXRvcl8xIiwiVmFsUmVnaXN0cnkiLCJpbml0aWFsIiwicmVnaXN0cnkiLCJjYWNoZSIsInJlZ2lzdGVyIiwidmFsaWRhdG9yIiwiZm9yRWFjaCIsInZhbGlkYXRpb25LZXkiLCJpbnN0YW5jZSIsImdldFZhbGlkYXRvciIsInZhbGlkYXRvcktleSIsIm9iaiIsImRlY29yYXRlZFByb3BlcnRpZXMiLCJwdXNoIiwiYWNjdW0iLCJkZWNvcmF0ZWRQcm9wZXJ0eSIsImVycnMiLCJhY2MiLCJkZWNvcmF0b3IiLCJFcnJvciIsImVyciIsImhhc0Vycm9ycyIsInByb3BFcnJvcnMiLCJwcm9wZXJ0eSIsImVycm9ycyIsInZhbGlkYXRpb25fMSIsIm1vZGVsIiwiY29uc3RydWN0RnJvbU9iamVjdCIsImVxdWFscyIsImV4Y2VwdGlvbnMiLCJzZWxmIiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiX18iLCJjb25zdHJ1Y3RvciIsIlBhdHRlcm5WYWxpZGF0b3JfMSIsIkVtYWlsVmFsaWRhdG9yIiwiX3N1cGVyIiwiZW1haWxQYXQiLCJNYXhMZW5ndGhWYWxpZGF0b3IiLCJnZXRNZXNzYWdlIiwiTWF4VmFsaWRhdG9yIiwiTWluTGVuZ3RoVmFsaWRhdG9yIiwiTWluVmFsaWRhdG9yIiwiUGF0dGVyblZhbGlkYXRvciIsImdldFBhdHRlcm4iLCJyZWdleHBQYXJzZXIiLCJ0ZXN0IiwiUmVnRXhwIiwiUmVxdWlyZWRWYWxpZGF0b3IiLCJVUkxWYWxpZGF0b3IiLCJ1cmxQYXR0ZXJuIiwiVmFsaWRhdG9yIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFJQSxnQkFBbUJDLE1BQVFBLEtBQUtELGtCQUFxQkUsT0FBT0MsT0FBVSxTQUFTQyxFQUFHQyxFQUFHQyxFQUFHQyxRQUF4RlAsSUFBQUEsSUFBbUJPLEVBQVFELEdBQzNCSixPQUFNTSxlQUFrQkosRUFBR0UsRUFBTCxDQUFBRyxZQUFBLEVBQUFDLElBQUEsV0FBQSxPQUFBTCxFQUFBQyxPQUN0QkosU0FBT00sRUFBQUEsRUFBQUEsRUFBZUosR0FBMkJNLEVBQXBCSCxPQUFZSSxJQUFWRixFQUFGSCxFQUFvQkksR0FBS0wsRUFBQUMsS0FBMkJNLG1CQUFBWCxNQUFBQSxLQUFBVyxxQkFBQVYsT0FBQUMsT0FBQSxTQUFBQyxFQUFBUyxHQUFqRlgsT0FBQU0sZUFBQUosRUFBQSxVQUFBLENBQUFLLFlBQUEsRUFBQUssTUFBQUQsS0FDRSxTQUFTVCxFQUFHQyxHQUNkRCxFQUFBLFFBQVdPLElBSmZJLGFBQUFkLE1BQUFBLEtBQUFjLGNBQUEsU0FBQUMsR0FhSSxHQUFJQSxHQUFPQSxFQUFJQyxXQUFZLE9BQU9ELEVBTmxDSixJQUFBQSxFQUFBQSxHQUNBVixHQUFPTSxNQUFEUSxFQUFDUixJQUFQLElBQXlCRixLQUFBVSxFQUFXLFlBQUFWLEdBQUFKLE9BQUFn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TyxJQUN0RFEsUUFBUTRJLGFBQWU1SSxRQUFRc0ksaUJBQW1CdEksUUFBUXFJLGFBQWVySSxRQUFRb0ksbUJBQXFCcEksUUFBUW1JLGFBQWVuSSxRQUFRaUksbUJBQXFCakksUUFBUTJJLGtCQUFvQjNJLFFBQVE4SCxvQkFBaUIsRUNmL005SCxRQUFBOEgsZUFBQXJJLGFBQUFXLFFBQUEscUJBQ0FKLFFBQUEySSxrQkFBQWxKLGFBQUFXLFFBQUEsd0JBQ0FKLFFBQUFpSSxtQkFBQXhJLGFBQUFXLFFBQUEseUJBQ0FKLFFBQUFtSSxhQUFBMUksYUFBQVcsUUFBQSxtQkFDQUosUUFBQW9JLG1CQUFBM0ksYUFBQVcsUUFBQSx5QkFDQUosUUFBQXFJLGFBQUE1SSxhQUFBVyxRQUFBLG1CQUNBSixRQUFBc0ksaUJBQUE3SSxhQUFBVyxRQUFBLHVCQUNBSixRQUFBNEksYUFBQW5KLGFBQUFXLFFBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VdGlscyA9IGV4cG9ydHMuTW9kZWwgPSBleHBvcnRzLlZhbGlkYXRpb24gPSB2b2lkIDA7XG5leHBvcnRzLlZhbGlkYXRpb24gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vdmFsaWRhdGlvblwiKSk7XG5leHBvcnRzLk1vZGVsID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01vZGVsXCIpKTtcbmV4cG9ydHMuVXRpbHMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHNcIikpOyIsIi8qKlxuICogQG1vZHVsZSBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5cbmV4cG9ydCAqIGFzIFZhbGlkYXRpb24gZnJvbSAnLi92YWxpZGF0aW9uJztcbmV4cG9ydCAqIGFzIE1vZGVsIGZyb20gJy4vTW9kZWwnO1xuZXhwb3J0ICogYXMgVXRpbHMgZnJvbSAgJy4vdXRpbHMnO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcbiAgICByZXR1cm4gdG87XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc0VxdWFsID0gZXhwb3J0cy5zdHJpbmdGb3JtYXQgPSBleHBvcnRzLmdldFByb3BlcnR5RGVjb3JhdG9ycyA9IHZvaWQgMDtcbmZ1bmN0aW9uIGdldFByb3BlcnR5RGVjb3JhdG9ycyhhbm5vdGF0aW9uUHJlZml4LCB0YXJnZXQsIHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBrZXlzID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXModGFyZ2V0LCBwcm9wZXJ0eU5hbWUpO1xuICAgIHZhciBkZWNvcmF0b3JzID0ga2V5c1xuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS50b1N0cmluZygpLnN0YXJ0c1dpdGgoYW5ub3RhdGlvblByZWZpeCk7IH0pXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKHZhbHVlcywga2V5KSB7XG4gICAgICAgIHZhciBjdXJyVmFsdWVzID0ge1xuICAgICAgICAgICAga2V5OiBrZXkuc3Vic3RyaW5nKGFubm90YXRpb25QcmVmaXgubGVuZ3RoKSxcbiAgICAgICAgICAgIHByb3BzOiBSZWZsZWN0LmdldE1ldGFkYXRhKGtleSwgdGFyZ2V0LCBwcm9wZXJ0eU5hbWUpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB2YWx1ZXMuY29uY2F0KGN1cnJWYWx1ZXMpO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wOiBwcm9wZXJ0eU5hbWUsXG4gICAgICAgIGRlY29yYXRvcnM6IGRlY29yYXRvcnNcbiAgICB9O1xufVxuZXhwb3J0cy5nZXRQcm9wZXJ0eURlY29yYXRvcnMgPSBnZXRQcm9wZXJ0eURlY29yYXRvcnM7XG5mdW5jdGlvbiBzdHJpbmdGb3JtYXQoc3RyaW5nKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBhcmdzW251bWJlcl1cbiAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgfSk7XG59XG5leHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHN0cmluZ0Zvcm1hdDtcbmZ1bmN0aW9uIGlzRXF1YWwoYSwgYikge1xuICAgIHZhciBwcm9wc1RvSWdub3JlID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgcHJvcHNUb0lnbm9yZVtfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICBpZiAoIWEgfHwgIWIgfHwgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiAhPT0gJ29iamVjdCcpKVxuICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYS5wcm90b3R5cGUgIT09IGIucHJvdG90eXBlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhKS5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTE7IH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikuZmlsdGVyKGZ1bmN0aW9uIChrKSB7IHJldHVybiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgPT09IC0xOyB9KS5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4ga2V5cy5ldmVyeShmdW5jdGlvbiAoaykgeyByZXR1cm4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspICE9PSAtMSB8fCBpc0VxdWFsLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbYVtrXSwgYltrXV0sIHByb3BzVG9JZ25vcmUpKTsgfSk7XG59XG5leHBvcnRzLmlzRXF1YWwgPSBpc0VxdWFsOyIsIi8qKlxuICogQG5hbWVzcGFjZSB1dGlsc1xuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBFcnJcbiAqL1xuZXhwb3J0IHR5cGUgRXJyID0gRXJyb3IgfCBzdHJpbmcgfCB1bmRlZmluZWRcblxuLyoqXG4gKiBVdGlsIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBkZWNvcmF0b3JzIGZvciB0aGUgcHJvdmlkZWQgUHJvcGVydHlcbiAqXG4gKiBAZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgdXRpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3BlcnR5RGVjb3JhdG9ycyhhbm5vdGF0aW9uUHJlZml4OiBzdHJpbmcsIHRhcmdldDogYW55LCBwcm9wZXJ0eU5hbWU6IHN0cmluZyB8IHN5bWJvbCk6IHtwcm9wOiBzdHJpbmcgfCBzeW1ib2wsIGRlY29yYXRvcnM6IFtdfSB7XG4gICAgLy8gZ2V0IGluZm8gYWJvdXQga2V5cyB0aGF0IHVzZWQgaW4gY3VycmVudCBwcm9wZXJ0eVxuICAgIGNvbnN0IGtleXM6IGFueVtdID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXModGFyZ2V0LCBwcm9wZXJ0eU5hbWUpO1xuICAgIGNvbnN0IGRlY29yYXRvcnMgPSBrZXlzXG4gICAgICAgIC8vIGZpbHRlciB5b3VyIGN1c3RvbSBkZWNvcmF0b3JzXG4gICAgICAgIC5maWx0ZXIoa2V5ID0+IGtleS50b1N0cmluZygpLnN0YXJ0c1dpdGgoYW5ub3RhdGlvblByZWZpeCkpXG4gICAgICAgIC5yZWR1Y2UoKHZhbHVlcywga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBnZXQgbWV0YWRhdGEgdmFsdWUuXG4gICAgICAgICAgICBjb25zdCBjdXJyVmFsdWVzID0ge1xuICAgICAgICAgICAgICAgIGtleToga2V5LnN1YnN0cmluZyhhbm5vdGF0aW9uUHJlZml4Lmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcHJvcHM6IFJlZmxlY3QuZ2V0TWV0YWRhdGEoa2V5LCB0YXJnZXQsIHByb3BlcnR5TmFtZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzLmNvbmNhdChjdXJyVmFsdWVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvcDogcHJvcGVydHlOYW1lLFxuICAgICAgICBkZWNvcmF0b3JzOiBkZWNvcmF0b3JzXG4gICAgfTtcbn1cblxuXG5cbi8qKlxuICogVXRpbCBmdW5jdGlvbiB0byBwcm92aWRlIHN0cmluZyBmb3JtYXQgZnVuY3Rpb25hbGl0eSBzaW1pbGFyIHRvIEMjJ3Mgc3RyaW5nLmZvcm1hdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcmdzIHJlcGxhY2VtZW50cyBtYWRlIGJ5IG9yZGVyIG9mIGFwcGVhcmFuY2UgKHJlcGxhY2VtZW50MCB3aWwgcmVwbGFjZSB7MH0gYW5kIHNvIG9uKVxuICogQHJldHVybiB7c3RyaW5nfSBmb3JtYXR0ZWQgc3RyaW5nXG4gKiBAZnVuY3Rpb24gc3RyaW5nRm9ybWF0XG4gKiBAbWVtYmVyT2YgdXRpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmc6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pe1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24obWF0Y2gsIG51bWJlcikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXG4gICAgICAgICAgICA6IG1hdGNoO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIERlZXAgT2JqZWN0IENvbXBhcmlzb25cbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMwNDc2MTUwL2phdmFzY3JpcHQtZGVlcC1jb21wYXJpc29uLXJlY3Vyc2l2ZWx5LW9iamVjdHMtYW5kLXByb3BlcnRpZXNcbiAqXG4gKiB3aXRoIG9wdGlvbmFsIGlnbm9yZWQgcHJvcGVydGllc1xuICpcbiAqIEBwYXJhbSB7e319IGFcbiAqIEBwYXJhbSB7e319IGJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHNUb0lnbm9yZV1cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAZnVuY3Rpb24gaXNFcXVhbFxuICogQG1lbWJlck9mIHV0aWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsKGE6IGFueSwgYjogYW55LC4uLnByb3BzVG9JZ25vcmU6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICAgIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICBpZiAoIWEgfHwgIWIgfHwgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiAhPT0gJ29iamVjdCcpKSByZXR1cm4gYSA9PT0gYjtcbiAgICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYS5wcm90b3R5cGUgIT09IGIucHJvdG90eXBlKSByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhhKS5maWx0ZXIoayA9PiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgPT09IC0xKTtcbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmZpbHRlcihrID0+IHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTEpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBrZXlzLmV2ZXJ5KGsgPT4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspICE9PSAtMSB8fCBpc0VxdWFsKGFba10sIGJba10sIC4uLnByb3BzVG9JZ25vcmUpKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuREVGQVVMVF9FUlJPUl9NRVNTQUdFUyA9IGV4cG9ydHMuVmFsaWRhdGlvbktleXMgPSB2b2lkIDA7XG5leHBvcnRzLlZhbGlkYXRpb25LZXlzID0ge1xuICAgIFJFRkxFQ1Q6ICdtb2RlbC52YWxpZGF0aW9uLicsXG4gICAgUkVRVUlSRUQ6ICdyZXF1aXJlZCcsXG4gICAgTUlOOiAnbWluJyxcbiAgICBNQVg6ICdtYXgnLFxuICAgIE1JTl9MRU5HVEg6ICdtaW5sZW5ndGgnLFxuICAgIE1BWF9MRU5HVEg6ICdtYXhsZW5ndGgnLFxuICAgIFBBVFRFUk46ICdwYXR0ZXJuJyxcbiAgICBFTUFJTDogXCJlbWFpbFwiLFxuICAgIFVSTDogXCJ1cmxcIlxufTtcbmV4cG9ydHMuREVGQVVMVF9FUlJPUl9NRVNTQUdFUyA9IHtcbiAgICBSRVFVSVJFRDogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnLFxuICAgIE1JTjogJ1RoZSBtaW5pbXVtIHZhbHVlIGlzIHswfScsXG4gICAgTUFYOiAnVGhlIG1heGltdW0gdmFsdWUgaXMgezB9JyxcbiAgICBNSU5fTEVOR1RIOiAnVGhlIG1pbmltdW0gbGVuZ3RoIGlzIHswfScsXG4gICAgTUFYX0xFTkdUSDogJ1RoZSBtYXhpbXVtIGxlbmd0aCBpcyB7MH0nLFxuICAgIFBBVFRFUk46ICdUaGUgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlIHBhdHRlcm4nLFxuICAgIEVNQUlMOiBcIlRoZSB2YWx1ZSBpcyBub3QgYSB2YWxpZCBlbWFpbFwiLFxuICAgIFVSTDogXCJUaGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgVVJMXCIsXG4gICAgREVGQVVMVDogXCJUaGVyZSBpcyBhbiBFcnJvclwiXG59OyIsIi8qKlxuICogQGVudW1cbiAqIEBuYW1lc3BhY2UgVmFsaWRhdGlvblxuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBWYWxpZGF0aW9uS2V5cyA9IHtcbiAgICBSRUZMRUNUOiAnbW9kZWwudmFsaWRhdGlvbi4nLFxuICAgIFJFUVVJUkVEOiAncmVxdWlyZWQnLFxuICAgIE1JTjogJ21pbicsXG4gICAgTUFYOiAnbWF4JyxcbiAgICBNSU5fTEVOR1RIOiAnbWlubGVuZ3RoJyxcbiAgICBNQVhfTEVOR1RIOiAnbWF4bGVuZ3RoJyxcbiAgICBQQVRURVJOOiAncGF0dGVybicsXG4gICAgRU1BSUw6IFwiZW1haWxcIixcbiAgICBVUkw6IFwidXJsXCJcbn1cblxuLyoqXG4gKiBAZW51bVxuICogQG5hbWVzcGFjZSBWYWxpZGF0aW9uXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRVJST1JfTUVTU0FHRVMgPSB7XG4gICAgUkVRVUlSRUQ6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyxcbiAgICBNSU46ICdUaGUgbWluaW11bSB2YWx1ZSBpcyB7MH0nLFxuICAgIE1BWDogJ1RoZSBtYXhpbXVtIHZhbHVlIGlzIHswfScsXG4gICAgTUlOX0xFTkdUSDogJ1RoZSBtaW5pbXVtIGxlbmd0aCBpcyB7MH0nLFxuICAgIE1BWF9MRU5HVEg6ICdUaGUgbWF4aW11bSBsZW5ndGggaXMgezB9JyxcbiAgICBQQVRURVJOOiAnVGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZSBwYXR0ZXJuJyxcbiAgICBFTUFJTDogXCJUaGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgZW1haWxcIixcbiAgICBVUkw6IFwiVGhlIHZhbHVlIGlzIG5vdCBhIHZhbGlkIFVSTFwiLFxuICAgIERFRkFVTFQ6IFwiVGhlcmUgaXMgYW4gRXJyb3JcIlxufSIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy51cmwgPSBleHBvcnRzLmVtYWlsID0gZXhwb3J0cy5wYXR0ZXJuID0gZXhwb3J0cy5tYXhsZW5ndGggPSBleHBvcnRzLm1pbmxlbmd0aCA9IGV4cG9ydHMubWF4ID0gZXhwb3J0cy5taW4gPSBleHBvcnRzLnJlcXVpcmVkID0gZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5ID0gdm9pZCAwO1xucmVxdWlyZShcInJlZmxlY3QtbWV0YWRhdGFcIik7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgZ2V0VmFsaWRhdGlvbktleSA9IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFRkxFQ1QgKyBrZXk7IH07XG5leHBvcnRzLmdldFZhbGlkYXRpb25LZXkgPSBnZXRWYWxpZGF0aW9uS2V5O1xudmFyIHJlcXVpcmVkID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFUVVJUkVEKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucmVxdWlyZWQgPSByZXF1aXJlZDtcbnZhciBtaW4gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTjsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU4pLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5taW4gPSBtaW47XG52YXIgbWF4ID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVg7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4ID0gbWF4O1xudmFyIG1pbmxlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWlubGVuZ3RoID0gbWlubGVuZ3RoO1xudmFyIG1heGxlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4bGVuZ3RoID0gbWF4bGVuZ3RoO1xudmFyIHBhdHRlcm4gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk47IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUEFUVEVSTiksIHtcbiAgICAgICAgICAgIHZhbHVlOiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB2YWx1ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucGF0dGVybiA9IHBhdHRlcm47XG52YXIgZW1haWwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUw7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuRU1BSUwpLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5lbWFpbCA9IGVtYWlsO1xudmFyIHVybCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkw7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuVVJMKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMudXJsID0gdXJsOyIsIi8qKlxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5cblxuaW1wb3J0IFwicmVmbGVjdC1tZXRhZGF0YVwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cblxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRWYWxpZGF0aW9uS2V5ID0gKGtleTogc3RyaW5nKSA9PiBWYWxpZGF0aW9uS2V5cy5SRUZMRUNUICsga2V5O1xuXG4vKipcbiAqIE1hcmtzIHRoZSBwcm9wZXJ0eSBhcyByZXF1aXJlZC5cbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuUkVRVUlSRUR9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUR9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCByZXF1aXJlZCA9IChtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEKSA9PiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLlJFUVVJUkVEKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWluaW11bSB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1JTn1cbiAqXG4gKiBAcGFyYW0ge251bWJlciB8IERhdGV9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU59XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBtaW4gPSAodmFsdWU6IG51bWJlciB8IERhdGUgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLk1JTiksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIG1heGltdW0gdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NQVh9XG4gKlxuICogQHBhcmFtIHtudW1iZXIgfCBEYXRlfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWF4ID0gKHZhbHVlOiBudW1iZXIgfCBEYXRlIHwgc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NQVgpLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBtaW5pbXVtIGxlbmd0aCBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEh9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWlubGVuZ3RoID0gKHZhbHVlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWF4aW11bSBsZW5ndGggZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IG1heGxlbmd0aCA9ICh2YWx1ZTogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEgpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIFJlZ0V4cCBwYXR0ZXJuIHRoZSBwcm9wZXJ0eSBtdXN0IHJlc3BlY3RcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuUEFUVEVSTn1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk59XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBwYXR0ZXJuID0gKHZhbHVlOiBSZWdFeHAgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTikgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5QQVRURVJOKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHByb3BlcnR5IGFzIGFuIGVtYWlsXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLkVNQUlMfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgZW1haWwgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5FTUFJTCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgcHJvcGVydHkgYXMgYW4gVVJMXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLlVSTH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkx9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCB1cmwgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkwpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuVVJMKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVmFsaWRhdG9ycyA9IGV4cG9ydHMuRGVjb3JhdG9ycyA9IHZvaWQgMDtcbmV4cG9ydHMuRGVjb3JhdG9ycyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9kZWNvcmF0b3JzXCIpKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi90eXBlc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdmFsaWRhdGlvblwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29uc3RhbnRzXCIpLCBleHBvcnRzKTtcbmV4cG9ydHMuVmFsaWRhdG9ycyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9WYWxpZGF0b3JzXCIpKTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgVmFsaWRhdGlvblxuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuZXhwb3J0ICogYXMgRGVjb3JhdG9ycyBmcm9tICcuL2RlY29yYXRvcnMnO1xuZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZhbGlkYXRpb24nO1xuZXhwb3J0ICogZnJvbSAnLi9jb25zdGFudHMnO1xuZXhwb3J0ICogYXMgVmFsaWRhdG9ycyBmcm9tICcuL1ZhbGlkYXRvcnMnO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnZhbGlkYXRlID0gZXhwb3J0cy5WYWxpZGF0b3JSZWdpc3RyeSA9IHZvaWQgMDtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xudmFyIFZhbGlkYXRvcnMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vVmFsaWRhdG9yc1wiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9ycy9WYWxpZGF0b3JcIikpO1xuZnVuY3Rpb24gVmFsUmVnaXN0cnkoKSB7XG4gICAgdmFyIGluaXRpYWwgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBpbml0aWFsW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciByZWdpc3RyeSA9IG5ldyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHt9O1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRvcltfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsaWRhdG9yLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAodiBpbnN0YW5jZW9mIFZhbGlkYXRvcl8xLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVbdi52YWxpZGF0aW9uS2V5XSA9IHY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RydWN0b3JNZXRob2QgPSB2LmRlZmF1bHQgfHwgdjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IGNvbnN0cnVjdG9yTWV0aG9kKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW2luc3RhbmNlLnZhbGlkYXRpb25LZXldID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHNlbGYuZ2V0VmFsaWRhdG9yID0gZnVuY3Rpb24gKHZhbGlkYXRvcktleSkge1xuICAgICAgICAgICAgaWYgKCEodmFsaWRhdG9yS2V5IGluIGNhY2hlKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVbdmFsaWRhdG9yS2V5XTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG4gICAgcmVnaXN0cnkucmVnaXN0ZXIuYXBwbHkocmVnaXN0cnksIGluaXRpYWwpO1xuICAgIHJldHVybiByZWdpc3RyeTtcbn1cbmV4cG9ydHMuVmFsaWRhdG9yUmVnaXN0cnkgPSBWYWxSZWdpc3RyeS5hcHBseSh2b2lkIDAsIE9iamVjdC52YWx1ZXMoVmFsaWRhdG9ycykpO1xuZnVuY3Rpb24gdmFsaWRhdGUob2JqKSB7XG4gICAgdmFyIGRlY29yYXRlZFByb3BlcnRpZXMgPSBbXTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iailcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgICAgICAgIGRlY29yYXRlZFByb3BlcnRpZXMucHVzaCh1dGlsc18xLmdldFByb3BlcnR5RGVjb3JhdG9ycyhjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5SRUZMRUNULCBvYmosIHByb3ApKTtcbiAgICByZXR1cm4gZGVjb3JhdGVkUHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtLCBkZWNvcmF0ZWRQcm9wZXJ0eSkge1xuICAgICAgICB2YXIgcHJvcCA9IGRlY29yYXRlZFByb3BlcnR5LnByb3AsIGRlY29yYXRvcnMgPSBkZWNvcmF0ZWRQcm9wZXJ0eS5kZWNvcmF0b3JzO1xuICAgICAgICBpZiAoIWRlY29yYXRvcnMgfHwgIWRlY29yYXRvcnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtO1xuICAgICAgICB2YXIgZXJycyA9IGRlY29yYXRvcnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGRlY29yYXRvcikge1xuICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9IGV4cG9ydHMuVmFsaWRhdG9yUmVnaXN0cnkuZ2V0VmFsaWRhdG9yKGRlY29yYXRvci5rZXkpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBNYXRjaGluZyB2YWxpZGF0b3IgZm9yIFwiICsgZGVjb3JhdG9yLmtleSArIFwiIGZvciBwcm9wZXJ0eSBcIiArIGRlY29yYXRlZFByb3BlcnR5LnByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVyciA9IHZhbGlkYXRvci5oYXNFcnJvcnMuYXBwbHkodmFsaWRhdG9yLCBfX3NwcmVhZEFycmF5KFtvYmpbcHJvcF1dLCBPYmplY3QudmFsdWVzKGRlY29yYXRvci5wcm9wcykpKTtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhY2MgPSBhY2MgfHwge307XG4gICAgICAgICAgICAgICAgYWNjW2RlY29yYXRvci5rZXldID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKGVycnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9wRXJyb3JzID0ge1xuICAgICAgICAgICAgICAgIHByb3BlcnR5OiBkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wLFxuICAgICAgICAgICAgICAgIGVycm9yczogZXJyc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFjY3VtID0gYWNjdW0gfHwgW107XG4gICAgICAgICAgICBhY2N1bS5wdXNoKHByb3BFcnJvcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2N1bTtcbiAgICB9LCB1bmRlZmluZWQpO1xufVxuZXhwb3J0cy52YWxpZGF0ZSA9IHZhbGlkYXRlOyIsImltcG9ydCBNb2RlbCBmcm9tIFwiLi4vTW9kZWwvTW9kZWxcIjtcbmltcG9ydCB7RXJyb3JzLCBSZWdpc3RyeX0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7Z2V0UHJvcGVydHlEZWNvcmF0b3JzfSBmcm9tICcuLi91dGlscydcbmltcG9ydCAqIGFzIFZhbGlkYXRvcnMgZnJvbSAnLi9WYWxpZGF0b3JzJ1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5c30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvcnMvVmFsaWRhdG9yXCI7XG5cbi8qKlxuICogUmV0dXJuc1xuICogQHJldHVybiB7Kn1cbiAqIEBjb25zdHJ1Y3RvclxuICogQGZ1bmN0aW9uIFZhbFJlZ2lzdHJ5XG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5mdW5jdGlvbiBWYWxSZWdpc3RyeSguLi5pbml0aWFsOiBhbnlbXSkgOiBSZWdpc3RyeSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHJlZ2lzdHJ5OiBSZWdpc3RyeSA9ICBuZXcgZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc3QgY2FjaGU6IGFueSA9IHt9O1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IHNlbGY6IGFueSA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JcbiAgICAgICAgICogQG1lbWJlck9mIFZhbGlkYXRvclJlZ2lzdHJ5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oLi4udmFsaWRhdG9yOiBhbnlbXSkgOiB2b2lke1xuICAgICAgICAgICAgdmFsaWRhdG9yLmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBWYWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVt2LnZhbGlkYXRpb25LZXldID0gdjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yTWV0aG9kID0gdi5kZWZhdWx0IHx8IHY7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2U6IFZhbGlkYXRvciA9IG5ldyBjb25zdHJ1Y3Rvck1ldGhvZCgpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVtpbnN0YW5jZS52YWxpZGF0aW9uS2V5XSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JLZXlcbiAgICAgICAgICogQHJldHVybiB7Kn1cbiAgICAgICAgICogQG1lbWJlck9mIFZhbGlkYXRvclJlZ2lzdHJ5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldFZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbGlkYXRvcktleTogc3RyaW5nKXtcbiAgICAgICAgICAgIGlmICghKHZhbGlkYXRvcktleSBpbiBjYWNoZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW3ZhbGlkYXRvcktleV07XG4gICAgICAgIH1cbiAgICB9KClcbiAgICByZWdpc3RyeS5yZWdpc3RlciguLi5pbml0aWFsKTtcbiAgICByZXR1cm4gcmVnaXN0cnk7XG59XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgVmFsaWRhdG9yUmVnaXN0cnkgPSBWYWxSZWdpc3RyeSguLi5PYmplY3QudmFsdWVzKFZhbGlkYXRvcnMpKTtcblxuLyoqXG4gKiBBbmFseXNlcyB0aGUgZGVjb3JhdGlvbnMgb2YgdGhlIHByb3BlcnRpZXMgYW5kIHZhbGlkYXRlcyB0aGUgb2JqIGFjY29yZGluZyB0byB0aGVtXG4gKiBAZnVuY3Rpb24gdmFsaWRhdGVcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZTxUIGV4dGVuZHMgTW9kZWw+KG9iajogVCkgOiBFcnJvcnN7XG4gICAgY29uc3QgZGVjb3JhdGVkUHJvcGVydGllcyA9IFtdO1xuICAgIGZvciAobGV0IHByb3AgaW4gb2JqKVxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgICAgICAgZGVjb3JhdGVkUHJvcGVydGllcy5wdXNoKGdldFByb3BlcnR5RGVjb3JhdG9ycyhWYWxpZGF0aW9uS2V5cy5SRUZMRUNULCBvYmosIHByb3ApKTtcblxuICAgIHJldHVybiBkZWNvcmF0ZWRQcm9wZXJ0aWVzLnJlZHVjZSgoYWNjdW0sIGRlY29yYXRlZFByb3BlcnR5KSA9PiB7XG4gICAgICAgIGNvbnN0IHtwcm9wLCBkZWNvcmF0b3JzfSA9IGRlY29yYXRlZFByb3BlcnR5O1xuICAgICAgICBpZiAoIWRlY29yYXRvcnMgfHwgIWRlY29yYXRvcnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtO1xuXG4gICAgICAgIGNvbnN0IGVycnMgPSBkZWNvcmF0b3JzLnJlZHVjZSgoYWNjLCBkZWNvcmF0b3I6IHtrZXk6IHN0cmluZywgcHJvcHM6IHt9fSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gVmFsaWRhdG9yUmVnaXN0cnkuZ2V0VmFsaWRhdG9yKGRlY29yYXRvci5rZXkpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIE1hdGNoaW5nIHZhbGlkYXRvciBmb3IgJHtkZWNvcmF0b3Iua2V5fSBmb3IgcHJvcGVydHkgJHtkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wfWApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IHZhbGlkYXRvci5oYXNFcnJvcnMob2JqW3Byb3BdLCAuLi5PYmplY3QudmFsdWVzKGRlY29yYXRvci5wcm9wcykpO1xuICAgICAgICAgICAgaWYgKGVycil7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGFjYyA9IGFjYyB8fCB7fTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgYWNjW2RlY29yYXRvci5rZXldID0gZXJyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB1bmRlZmluZWQpO1xuXG4gICAgICAgIGlmIChlcnJzKXtcbiAgICAgICAgICAgIGNvbnN0IHByb3BFcnJvcnMgPSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydHk6IGRlY29yYXRlZFByb3BlcnR5LnByb3AsXG4gICAgICAgICAgICAgICAgZXJyb3JzOiBlcnJzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBhY2N1bSA9IGFjY3VtIHx8IFtdO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgYWNjdW0ucHVzaChwcm9wRXJyb3JzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2N1bTtcbiAgICB9LCB1bmRlZmluZWQpO1xufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxuICAgICAgICB0b1tqXSA9IGZyb21baV07XG4gICAgcmV0dXJuIHRvO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB2YWxpZGF0aW9uXzEgPSByZXF1aXJlKFwiLi4vdmFsaWRhdGlvblwiKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xudmFyIE1vZGVsID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2RlbChtb2RlbCkge1xuICAgICAgICBNb2RlbC5jb25zdHJ1Y3RGcm9tT2JqZWN0KHRoaXMsIG1vZGVsKTtcbiAgICB9XG4gICAgTW9kZWwucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsaWRhdGlvbl8xLnZhbGlkYXRlKHRoaXMpO1xuICAgIH07XG4gICAgTW9kZWwucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIGV4Y2VwdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGV4Y2VwdGlvbnNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWxzXzEuaXNFcXVhbC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG9ial0sIGV4Y2VwdGlvbnMpKTtcbiAgICB9O1xuICAgIE1vZGVsLmNvbnN0cnVjdEZyb21PYmplY3QgPSBmdW5jdGlvbiAoc2VsZiwgb2JqKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBzZWxmLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgICAgICAgICAgIHNlbGZbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH07XG4gICAgcmV0dXJuIE1vZGVsO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGVsOyIsImltcG9ydCB7dmFsaWRhdGV9IGZyb20gXCIuLi92YWxpZGF0aW9uXCI7XG5pbXBvcnQgVmFsaWRhdGFibGUsIHtFcnJvcnN9IGZyb20gXCIuLi92YWxpZGF0aW9uL3R5cGVzXCI7XG5pbXBvcnQge2lzRXF1YWx9IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIFZhbGlkYXRhYmxlIE1vZGVsIG9iamVjdFxuICpcbiAqIE1vZGVsIG9iamVjdHMgbXVzdDpcbiAqICAtIEhhdmUgYWxsIHRoZWlyIHByb3BlcnRpZXMgZGVmaW5lZCBhcyBvcHRpb25hbDtcbiAqICAtIEhhdmUgYWxsIHRoZWlyIHByb3BlcnRpZXMgaW5pdGlhbGl6ZWQgKG9ubHkgdGhlICdAcmVxdWlyZWQoKScgZGVjb3JhdGVkIHByb3BlcnRpZXNcbiAqICA8c3Ryb25nPm5lZWQ8L3N0cm9uZz4gdG8gYmUgaW5pdGlhbGl6ZWQsIGJ1dCBhbGwgb2YgdGhlbSBzaG91bGQgYmUgYXMgZ29vZCBwcmFjdGljZSk7XG4gKlxuICogQGNsYXNzIE1vZGVsXG4gKiBAYWJzdHJhY3RcbiAqIEBpbXBsZW1lbnRzIFZhbGlkYXRhYmxlXG4gKiBAbmFtZXNwYWNlIE1vZGVsXG4gKiBAbWVtYmVyT2YgTW9kZWxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgTW9kZWwgaW1wbGVtZW50cyBWYWxpZGF0YWJsZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb2RlbCB8IHt9fSBtb2RlbCBiYXNlIG9iamVjdCBmcm9tIHdoaWNoIHRvIHBvcHVsYXRlIHByb3BlcnRpZXMgZnJvbVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc2VlIE1vZGVsI2NvbnN0cnVjdEZyb21PYmplY3RcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IobW9kZWw/OiBNb2RlbCB8IHt9KXtcbiAgICAgICAgTW9kZWwuY29uc3RydWN0RnJvbU9iamVjdCh0aGlzLCBtb2RlbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoZSBvYmplY3QgYWNjb3JkaW5nIHRvIGl0cyBkZWNvcmF0ZWQgcHJvcGVydGllc1xuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IFthcmdzXVxuICAgICAqIEBtZW1iZXJPZiBNb2RlbFxuICAgICAqIEBzZWUgdmFsaWRhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgaGFzRXJyb3JzKC4uLmFyZ3M6IGFueVtdKTogRXJyb3Jze1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZSBvYmplY3QgZXF1YWxpdHkgcmVjdXJzaXZlbHlcbiAgICAgKiBAcGFyYW0ge2FueX0gb2JqIG9iamVjdCB0byBjb21wYXJlIHRvXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtleGNlcHRpb25zXSBwcm9wZXJ0eSBuYW1lcyB0byBiZSBleGNsdWRlZCBmcm9tIHRoZSBjb21wYXJpc29uXG4gICAgICogQG1lbWJlck9mIE1vZGVsXG4gICAgICovXG4gICAgcHVibGljIGVxdWFscyhvYmo6IGFueSwgLi4uZXhjZXB0aW9uczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGlzRXF1YWwodGhpcywgb2JqLCAuLi5leGNlcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXBvcHVsYXRlcyB0aGUgT2JqZWN0IHByb3BlcnRpZXMgd2l0aCB0aGUgb25lcyBmcm9tIHRoZSBuZXcgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1R9IHNlbGZcbiAgICAgKiBAcGFyYW0ge1R8IHt9fSBvYmpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQGZ1bmN0aW9uIGNvbnN0cnVjdEZyb21PYmplY3RcbiAgICAgKiBAbWVtYmVyT2YgTW9kZWxcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNvbnN0cnVjdEZyb21PYmplY3Q8VCBleHRlbmRzIE1vZGVsPihzZWxmOiBULCBvYmo/OiBUIHwge30pe1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIG9iailcbiAgICAgICAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBzZWxmLmhhc093blByb3BlcnR5KHByb3ApKS8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBzZWxmW3Byb3BdID0gb2JqW3Byb3BdO1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9kZWwgPSB2b2lkIDA7XG5leHBvcnRzLk1vZGVsID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01vZGVsXCIpKTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgTW9kZWxcbiAqIEBtZW1iZXJPZiBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5cbmV4cG9ydCAqIGFzIE1vZGVsIGZyb20gXCIuL01vZGVsXCI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFBhdHRlcm5WYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCIpKTtcbnZhciBFbWFpbFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtYWlsVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuRU1BSUwsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIEVtYWlsVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuaGFzRXJyb3JzLmNhbGwodGhpcywgdmFsdWUsIEVtYWlsVmFsaWRhdG9yLmVtYWlsUGF0LCBtZXNzYWdlKTtcbiAgICB9O1xuICAgIEVtYWlsVmFsaWRhdG9yLmVtYWlsUGF0ID0gL1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPy87XG4gICAgcmV0dXJuIEVtYWlsVmFsaWRhdG9yO1xufShQYXR0ZXJuVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gRW1haWxWYWxpZGF0b3I7IiwiaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IFBhdHRlcm5WYWxpZGF0b3IgZnJvbSBcIi4vUGF0dGVyblZhbGlkYXRvclwiO1xuXG4vKipcbiAqIEVtYWlsIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBFbWFpbFZhbGlkYXRvclxuICogQGV4dGVuZHMgUGF0dGVyblZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1haWxWYWxpZGF0b3IgZXh0ZW5kcyBQYXR0ZXJuVmFsaWRhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBlbWFpbFBhdDogUmVnRXhwID0gL1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPy87XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuRU1BSUwsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmhhc0Vycm9ycyh2YWx1ZSwgRW1haWxWYWxpZGF0b3IuZW1haWxQYXQsIG1lc3NhZ2UpO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgTWF4TGVuZ3RoVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWF4TGVuZ3RoVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1heExlbmd0aFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWF4TGVuZ3RoVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1heGxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+IG1heGxlbmd0aCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWF4bGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBNYXhMZW5ndGhWYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1heExlbmd0aFZhbGlkYXRvcjsiLCJpbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG4vKipcbiAqIE1heCBMZW5ndGggVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIE1heExlbmd0aFZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXhMZW5ndGhWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1BWF9MRU5HVEgsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1heGxlbmd0aDogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiBtYXhsZW5ndGggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1heGxlbmd0aCkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBNYXhWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXhWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWF4VmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVg7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1BWCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWF4VmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1heCwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlID4gbWF4ID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtYXgpIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIE1heFZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWF4VmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogTWF4IFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBNYXhWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF4VmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1BWCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IG51bWJlciwgbWF4OiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlID4gbWF4ID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtYXgpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgTWluTGVuZ3RoVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWluTGVuZ3RoVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1pbkxlbmd0aFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUlOX0xFTkdUSCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWluTGVuZ3RoVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1pbmxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA8IG1pbmxlbmd0aCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWlubGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBNaW5MZW5ndGhWYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1pbkxlbmd0aFZhbGlkYXRvcjsiLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIE1pbiBMZW5ndGggVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIE1pbkxlbmd0aFZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5MZW5ndGhWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEgsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1pbmxlbmd0aDogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPCBtaW5sZW5ndGggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1pbmxlbmd0aCkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBNaW5WYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNaW5WYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWluVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU47IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1JTiwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWluVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1pbiwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtaW4pIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIE1pblZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWluVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogTWluIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBNaW5WYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWluVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTil7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1JTiwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtaW4pIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgUGF0dGVyblZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhdHRlcm5WYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGF0dGVyblZhbGlkYXRvcihrZXksIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7IGtleSA9IGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlBBVFRFUk47IH1cbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBrZXksIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIFBhdHRlcm5WYWxpZGF0b3IucHJvdG90eXBlLmdldFBhdHRlcm4gPSBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgICBpZiAoIVBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyLnRlc3QocGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgdmFyIG1hdGNoID0gcGF0dGVybi5tYXRjaChQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlcik7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG1hdGNoWzFdLCBtYXRjaFsyXSk7XG4gICAgfTtcbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIHBhdHRlcm4sIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF0dGVybiA9IHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJyA/IHRoaXMuZ2V0UGF0dGVybihwYXR0ZXJuKSA6IHBhdHRlcm47XG4gICAgICAgIHJldHVybiAhcGF0dGVybi50ZXN0KHZhbHVlKSA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlciA9IG5ldyBSZWdFeHAoXCJeXFwvKC4rKVxcLyhbZ2ltdXNdKikkXCIpO1xuICAgIHJldHVybiBQYXR0ZXJuVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBQYXR0ZXJuVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogUGF0dGVybiBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgUGF0dGVyblZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXR0ZXJuVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSByZWdleHBQYXJzZXI6IFJlZ0V4cCA9IG5ldyBSZWdFeHAoXCJeXFwvKC4rKVxcLyhbZ2ltdXNdKikkXCIpO1xuXG4gICAgY29uc3RydWN0b3Ioa2V5OiBzdHJpbmcgPSBWYWxpZGF0aW9uS2V5cy5QQVRURVJOLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk4pe1xuICAgICAgICBzdXBlcihrZXksIG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF0dGVybihwYXR0ZXJuOiBzdHJpbmcpOiBSZWdFeHAge1xuICAgICAgICBpZiAoIVBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyLnRlc3QocGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgY29uc3QgbWF0Y2g6IGFueSA9IHBhdHRlcm4ubWF0Y2goUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pO1xuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBwYXR0ZXJuOiBSZWdFeHAgfCBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXR0ZXJuID0gdHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnID8gdGhpcy5nZXRQYXR0ZXJuKHBhdHRlcm4pIDogcGF0dGVybjtcbiAgICAgICAgcmV0dXJuICFwYXR0ZXJuLnRlc3QodmFsdWUpID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFJlcXVpcmVkVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVxdWlyZWRWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVxdWlyZWRWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5SRVFVSVJFRCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgUmVxdWlyZWRWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gIXZhbHVlID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBSZXF1aXJlZFZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gUmVxdWlyZWRWYWxpZGF0b3I7IiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBSZXF1aXJlZCBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgUmVxdWlyZWRWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWlyZWRWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUQpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5SRVFVSVJFRCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IGFueSwgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIHJldHVybiAhdmFsdWUgPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFBhdHRlcm5WYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCIpKTtcbnZhciBVUkxWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVUkxWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVVJMVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkw7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlVSTCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgVVJMVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuaGFzRXJyb3JzLmNhbGwodGhpcywgdmFsdWUsIFVSTFZhbGlkYXRvci51cmxQYXR0ZXJuLCBtZXNzYWdlKTtcbiAgICB9O1xuICAgIFVSTFZhbGlkYXRvci51cmxQYXR0ZXJuID0gL14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtejAtOVxcdTAwYTEtXFx1ZmZmZl1bYS16MC05XFx1MDBhMS1cXHVmZmZmXy1dezAsNjJ9KT9bYS16MC05XFx1MDBhMS1cXHVmZmZmXVxcLikrKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9XFwuPykpKD86OlxcZHsyLDV9KT8oPzpbLz8jXVxcUyopPyQvaTtcbiAgICByZXR1cm4gVVJMVmFsaWRhdG9yO1xufShQYXR0ZXJuVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gVVJMVmFsaWRhdG9yOyIsImltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBQYXR0ZXJuVmFsaWRhdG9yIGZyb20gXCIuL1BhdHRlcm5WYWxpZGF0b3JcIjtcblxuXG4vKipcbiAqIFVSTCBWYWxpZGF0b3JcbiAqXG4gKiBQYXR0ZXJuIGZyb20ge0BsaW5rIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2RwZXJpbmkvNzI5Mjk0fVxuICpcbiAqIEBjbGFzcyBVUkxWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFBhdHRlcm5WYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVSTFZhbGlkYXRvciBleHRlbmRzIFBhdHRlcm5WYWxpZGF0b3Ige1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHVybFBhdHRlcm46IFJlZ0V4cCA9IC9eKD86KD86KD86aHR0cHM/fGZ0cCk6KT9cXC9cXC8pKD86XFxTKyg/OjpcXFMqKT9AKT8oPzooPyEoPzoxMHwxMjcpKD86XFwuXFxkezEsM30pezN9KSg/ISg/OjE2OVxcLjI1NHwxOTJcXC4xNjgpKD86XFwuXFxkezEsM30pezJ9KSg/ITE3MlxcLig/OjFbNi05XXwyXFxkfDNbMC0xXSkoPzpcXC5cXGR7MSwzfSl7Mn0pKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswMV1cXGR8MjJbMC0zXSkoPzpcXC4oPzoxP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKSl7Mn0oPzpcXC4oPzpbMS05XVxcZD98MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC00XSkpfCg/Oig/OlthLXowLTlcXHUwMGExLVxcdWZmZmZdW2EtejAtOVxcdTAwYTEtXFx1ZmZmZl8tXXswLDYyfSk/W2EtejAtOVxcdTAwYTEtXFx1ZmZmZl1cXC4pKyg/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfVxcLj8pKSg/OjpcXGR7Miw1fSk/KD86Wy8/I11cXFMqKT8kL2k7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlVSTCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLlVSTCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICByZXR1cm4gc3VwZXIuaGFzRXJyb3JzKHZhbHVlLCBVUkxWYWxpZGF0b3IudXJsUGF0dGVybiwgbWVzc2FnZSk7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxuICAgICAgICB0b1tqXSA9IGZyb21baV07XG4gICAgcmV0dXJuIHRvO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzXCIpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZhbGlkYXRvcih2YWxpZGF0aW9uS2V5LCBtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuREVGQVVMVDsgfVxuICAgICAgICB0aGlzLnZhbGlkYXRpb25LZXkgPSB2YWxpZGF0aW9uS2V5O1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLmdldE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbHNfMS5zdHJpbmdGb3JtYXQuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncykpO1xuICAgIH07XG4gICAgcmV0dXJuIFZhbGlkYXRvcjtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBWYWxpZGF0b3I7IiwiaW1wb3J0IHtzdHJpbmdGb3JtYXR9IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuaW1wb3J0IFZhbGlkYXRhYmxlLCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7REVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG4vKipcbiAqIEJhc2UgSW1wbGVtZW50YXRpb24gZm9yIFZhbGlkYXRvcnNcbiAqXG4gKiBAY2xhc3MgVmFsaWRhdG9yXG4gKiBAYWJzdHJhY3RcbiAqIEBpbXBsZW1lbnRzIFZhbGlkYXRhYmxlXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBWYWxpZGF0b3IgaW1wbGVtZW50cyBWYWxpZGF0YWJsZXtcbiAgICByZWFkb25seSB2YWxpZGF0aW9uS2V5OiBzdHJpbmc7XG4gICAgcHJvdGVjdGVkIG1lc3NhZ2U6IHN0cmluZztcblxuXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25LZXk6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5ERUZBVUxUKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGlvbktleSA9IHZhbGlkYXRpb25LZXk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgIHJldHVybiBzdHJpbmdGb3JtYXQobWVzc2FnZSwgLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGFic3RyYWN0IGhhc0Vycm9ycyh2YWx1ZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IEVycm9ycztcbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VUkxWYWxpZGF0b3IgPSBleHBvcnRzLlBhdHRlcm5WYWxpZGF0b3IgPSBleHBvcnRzLk1pblZhbGlkYXRvciA9IGV4cG9ydHMuTWluTGVuZ3RoVmFsaWRhdG9yID0gZXhwb3J0cy5NYXhWYWxpZGF0b3IgPSBleHBvcnRzLk1heExlbmd0aFZhbGlkYXRvciA9IGV4cG9ydHMuUmVxdWlyZWRWYWxpZGF0b3IgPSBleHBvcnRzLkVtYWlsVmFsaWRhdG9yID0gdm9pZCAwO1xuZXhwb3J0cy5FbWFpbFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9FbWFpbFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLlJlcXVpcmVkVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL1JlcXVpcmVkVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuTWF4TGVuZ3RoVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01heExlbmd0aFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLk1heFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9NYXhWYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5NaW5MZW5ndGhWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTWluTGVuZ3RoVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuTWluVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01pblZhbGlkYXRvclwiKSk7XG5leHBvcnRzLlBhdHRlcm5WYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vUGF0dGVyblZhbGlkYXRvclwiKSk7XG5leHBvcnRzLlVSTFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9VUkxWYWxpZGF0b3JcIikpOyIsIi8qKlxuICogQG5hbWVzcGFjZSBWYWxpZGF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5cblxuZXhwb3J0ICogYXMgRW1haWxWYWxpZGF0b3IgZnJvbSAnLi9FbWFpbFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBSZXF1aXJlZFZhbGlkYXRvciBmcm9tICcuL1JlcXVpcmVkVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIE1heExlbmd0aFZhbGlkYXRvciBmcm9tICcuL01heExlbmd0aFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBNYXhWYWxpZGF0b3IgZnJvbSAnLi9NYXhWYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgTWluTGVuZ3RoVmFsaWRhdG9yIGZyb20gJy4vTWluTGVuZ3RoVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIE1pblZhbGlkYXRvciBmcm9tICcuL01pblZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBQYXR0ZXJuVmFsaWRhdG9yIGZyb20gJy4vUGF0dGVyblZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBVUkxWYWxpZGF0b3IgZnJvbSAnLi9VUkxWYWxpZGF0b3InOyJdfQ==
