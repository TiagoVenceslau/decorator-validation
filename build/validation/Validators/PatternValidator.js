"use strict";

var __extends = this && this.__extends || function () {
  var extendStatics = function (d, b) {
    extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
    };

    return extendStatics(d, b);
  };

  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();

var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};

Object.defineProperty(exports, "__esModule", {
  value: true
});

var Validator_1 = __importDefault(require("./Validator"));

var constants_1 = require("../constants");

var PatternValidator = function (_super) {
  __extends(PatternValidator, _super);

  function PatternValidator(key, message) {
    if (key === void 0) {
      key = constants_1.ValidationKeys.PATTERN;
    }

    if (message === void 0) {
      message = constants_1.DEFAULT_ERROR_MESSAGES.PATTERN;
    }

    return _super.call(this, key, message) || this;
  }

  PatternValidator.prototype.getPattern = function (pattern) {
    if (!PatternValidator.regexpParser.test(pattern)) return new RegExp(pattern);
    var match = pattern.match(PatternValidator.regexpParser);
    return new RegExp(match[1], match[2]);
  };

  PatternValidator.prototype.hasErrors = function (value, pattern, message) {
    if (!value) return;
    pattern = typeof pattern === 'string' ? this.getPattern(pattern) : pattern;
    return !pattern.test(value) ? this.getMessage(message || this.message) : undefined;
  };

  PatternValidator.regexpParser = new RegExp("^\/(.+)\/([gimus]*)$");
  return PatternValidator;
}(Validator_1.default);

exports.default = PatternValidator;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbGlkYXRpb24vVmFsaWRhdG9ycy9QYXR0ZXJuVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1BhdHRlcm5WYWxpZGF0b3IudHMiXSwibmFtZXMiOlsiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJiIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVmFsaWRhdG9yXzEiLCJyZXF1aXJlIiwiY29uc3RhbnRzXzEiLCJQYXR0ZXJuVmFsaWRhdG9yIiwiX3N1cGVyIiwia2V5IiwibWVzc2FnZSIsIlZhbGlkYXRpb25LZXlzIiwiUEFUVEVSTiIsIkRFRkFVTFRfRVJST1JfTUVTU0FHRVMiLCJnZXRQYXR0ZXJuIiwicGF0dGVybiIsInJlZ2V4cFBhcnNlciIsInRlc3QiLCJSZWdFeHAiLCJtYXRjaCIsImhhc0Vycm9ycyIsImdldE1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJkZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFDQSxJQUFJQSxTQUFTLEdBQUksUUFBUSxLQUFLQSxTQUFkLElBQTZCLFlBQVk7QUFDckQsTUFBSUMsYUFBYSxHQUFHLFVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtBQUNoQ0YsSUFBQUEsYUFBYSxHQUFHRyxNQUFNLENBQUNDLGNBQVAsSUFDWDtBQUFFQyxNQUFBQSxTQUFTLEVBQUU7QUFBYixpQkFBNkJDLEtBQTdCLElBQXNDLFVBQVVMLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtBQUFFRCxNQUFBQSxDQUFDLENBQUNJLFNBQUYsR0FBY0gsQ0FBZDtBQUFrQixLQUQvRCxJQUVa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R0FMTzs7QUFPUlosRUFBQUEsZ0JBQUEsQ0FBQWpCLFNBQUEsQ0FBQThCLFNBQUEsR0FBQSxVQUFVakIsS0FBVixFQUF5QlksT0FBekIsRUFBbURMLE9BQW5ELEVBQW1FO0FBQy9ELFFBQUksQ0FBQ1AsS0FBTCxFQUNJO0FBQ0pZLElBQUFBLE9BQU8sR0FBRyxPQUFPQSxPQUFQLEtBQW1CLFFBQW5CLEdBQThCLEtBQUtELFVBQUwsQ0FBZ0JDLE9BQWhCLENBQTlCLEdBQXlEQSxPQUFuRTtBQUNBLFdBQU8sQ0FBQ0EsT0FBTyxDQUFDRSxJQUFSLENBQWFkLEtBQWIsQ0FBRCxHQUF1QixLQUFLa0IsVUFBTCxDQUFnQlgsT0FBTyxJQUFJLEtBQUtBLE9BQWhDLENBQXZCLEdBQWtFWSxTQUF6RTtBQUNILEdBTEQ7O0FBYndCZixFQUFBQSxnQkFBQSxDQUFBUyxZQUFBLEdBQXVCLElBQUlFLE1BQUosQ0FBVyxzQkFBWCxDQUF2QjtBQW1CNUIsU0FBQVgsZ0JBQUE7QUFwQkEsQ0FBQSxDQUE4Q0gsV0FBQSxDQUFBbUIsT0FBOUMsQ0FBQTs7QURpQ0FyQixPQUFPLENBQUNxQixPQUFSLEdDakNxQmhCLGdCRGlDckIiLCJmaWxlIjoidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1BhdHRlcm5WYWxpZGF0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgUGF0dGVyblZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhdHRlcm5WYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGF0dGVyblZhbGlkYXRvcihrZXksIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7IGtleSA9IGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlBBVFRFUk47IH1cbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBrZXksIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIFBhdHRlcm5WYWxpZGF0b3IucHJvdG90eXBlLmdldFBhdHRlcm4gPSBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgICBpZiAoIVBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyLnRlc3QocGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgdmFyIG1hdGNoID0gcGF0dGVybi5tYXRjaChQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlcik7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG1hdGNoWzFdLCBtYXRjaFsyXSk7XG4gICAgfTtcbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIHBhdHRlcm4sIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF0dGVybiA9IHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJyA/IHRoaXMuZ2V0UGF0dGVybihwYXR0ZXJuKSA6IHBhdHRlcm47XG4gICAgICAgIHJldHVybiAhcGF0dGVybi50ZXN0KHZhbHVlKSA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlciA9IG5ldyBSZWdFeHAoXCJeXFwvKC4rKVxcLyhbZ2ltdXNdKikkXCIpO1xuICAgIHJldHVybiBQYXR0ZXJuVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBQYXR0ZXJuVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogUGF0dGVybiBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgUGF0dGVyblZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXR0ZXJuVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSByZWdleHBQYXJzZXI6IFJlZ0V4cCA9IG5ldyBSZWdFeHAoXCJeXFwvKC4rKVxcLyhbZ2ltdXNdKikkXCIpO1xuXG4gICAgY29uc3RydWN0b3Ioa2V5OiBzdHJpbmcgPSBWYWxpZGF0aW9uS2V5cy5QQVRURVJOLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk4pe1xuICAgICAgICBzdXBlcihrZXksIG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF0dGVybihwYXR0ZXJuOiBzdHJpbmcpOiBSZWdFeHAge1xuICAgICAgICBpZiAoIVBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyLnRlc3QocGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgY29uc3QgbWF0Y2g6IGFueSA9IHBhdHRlcm4ubWF0Y2goUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pO1xuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBwYXR0ZXJuOiBSZWdFeHAgfCBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXR0ZXJuID0gdHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnID8gdGhpcy5nZXRQYXR0ZXJuKHBhdHRlcm4pIDogcGF0dGVybjtcbiAgICAgICAgcmV0dXJuICFwYXR0ZXJuLnRlc3QodmFsdWUpID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59Il19
