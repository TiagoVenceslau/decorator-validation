"use strict";var __spreadArray=this&&this.__spreadArray||function(t,r){for(var e=0,n=r.length,o=t.length;e<n;e++,o++)t[o]=r[e];return t};function getPropertyDecorators(e,n,o){var t=Reflect.getMetadataKeys(n,o).filter(function(t){return t.toString().startsWith(e)}).reduce(function(t,r){r={key:r.substring(e.length),props:Reflect.getMetadata(r,n,o)};return t.concat(r)},[]);return{prop:o,decorators:t}}function stringFormat(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.replace(/{(\d+)}/g,function(t,r){return void 0!==e[r]?e[r]:t})}function isEqual(r,e){for(var n=[],t=2;t<arguments.length;t++)n[t-2]=arguments[t];if(r===e)return!0;if(r instanceof Date&&e instanceof Date)return r.getTime()===e.getTime();if(!r||!e||"object"!=typeof r&&"object"!=typeof e)return r===e;if(null==r||null==e)return!1;if(r.prototype!==e.prototype)return!1;var o=Object.keys(r).filter(function(t){return-1===n.indexOf(t)});return o.length===Object.keys(e).filter(function(t){return-1===n.indexOf(t)}).length&&o.every(function(t){return-1!==n.indexOf(t)||isEqual.apply(void 0,__spreadArray([r[t],e[t]],n))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEqual=exports.stringFormat=exports.getPropertyDecorators=void 0,exports.getPropertyDecorators=getPropertyDecorators,exports.stringFormat=stringFormat,exports.isEqual=isEqual;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwidXRpbHMudHMiXSwibmFtZXMiOlsiX19zcHJlYWRBcnJheSIsInRoaXMiLCJ0byIsImZyb20iLCJpbCIsImxlbmd0aCIsImkiLCJnZXRQcm9wZXJ0eURlY29yYXRvcnMiLCJhbm5vdGF0aW9uUHJlZml4IiwidGFyZ2V0IiwicHJvcGVydHlOYW1lIiwiZGVjb3JhdG9ycyIsIlJlZmxlY3QiLCJnZXRNZXRhZGF0YUtleXMiLCJmaWx0ZXIiLCJrZXkiLCJ0b1N0cmluZyIsInN0YXJ0c1dpdGgiLCJyZWR1Y2UiLCJ2YWx1ZXMiLCJjdXJyVmFsdWVzIiwic3Vic3RyaW5nIiwicHJvcHMiLCJnZXRNZXRhZGF0YSIsImNvbmNhdCIsInByb3AiLCJzdHJpbmdGb3JtYXQiLCJzdHJpbmciLCJhcmdzIiwiX2kiLCJhcmd1bWVudHMiLCJyZXBsYWNlIiwibWF0Y2giLCJudW1iZXIiLCJpc0VxdWFsIiwiYSIsImIiLCJwcm9wc1RvSWdub3JlIiwiRGF0ZSIsImdldFRpbWUiLCJwcm90b3R5cGUiLCJrZXlzIiwiT2JqZWN0IiwiayIsImluZGV4T2YiLCJldmVyeSIsImFwcGx5IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUlBLGNBQWlCQyxNQUFRQSxLQUFLRCxlQUFrQixTQUFVRSxFQUFJQyxHQUE5REgsSUFBQUEsSUFBQUEsRUFBYSxFQUFJSSxFQUFBRCxFQUFRRSxPQUFLTCxFQUFBQSxFQUFBQSxPQUFrQk0sRUFBQUYsRUFBVUYsSUFBSUMsSUFDekRELEVBQUlJLEdBQUpILEVBQWFHLEdBRWxCLE9BQU9KLEdDT1gsU0FBZ0JLLHNCQUFzQkMsRUFBMEJDLEVBQWFDLEdBRXpFLElBQ01DLEVBRGNDLFFBQVFDLGdCQUFnQkosRUFBUUMsR0FHL0NJLE9BQU8sU0FBQUMsR0FBTyxPQUFBQSxFQUFJQyxXQUFXQyxXQUFXVCxLQUN4Q1UsT0FBTyxTQUFDQyxFQUFRSixHQUVQSyxFQUFhLENBQ2ZMLElBQUtBLEVBQUlNLFVBQVViLEVBQWlCSCxRQUNwQ2lCLE1BQU9WLFFBQVFXLFlBQVlSLEVBQUtOLEVBQVFDLElBRTVDLE9BQU9TLEVBQU9LLE9BQU9KLElBQ3RCLElBRVAsTUFBTyxDQUNISyxLQUFNZixFQUNOQyxXQUFZQSxHQWVwQixTQUFnQmUsYUFBYUMsR0FqQnpCLElBaUJ5QyxJQUFBQyxFQUFBLEdBQUFDLEVBQUEsRUFBQUEsRUFBQUMsVUFBQXpCLE9BQUF3QixJQUFBRCxFQUFBQyxFQUFBLEdBQUFDLFVBQUFELEdBQ3pDLE9BQU9GLEVBQU9JLFFBQVEsV0FBWSxTQUFTQyxFQUFPQyxHQUM5QyxZQUErQixJQUFqQkwsRUFBS0ssR0FDYkwsRUFBS0ssR0FDTEQsSUFpQmQsU0FBZ0JFLFFBQVFDLEVBQVFDLEdBcEI1QixJQW9CbUMsSUFBQUMsRUFBQSxHQUFBUixFQUFBLEVBQUFBLEVBQUFDLFVBQUF6QixPQUFBd0IsSUFBQVEsRUFBQVIsRUFBQSxHQUFBQyxVQUFBRCxHQUNuQyxHQUFJTSxJQUFNQyxFQUFHLE9BQU8sRUFDcEIsR0FBSUQsYUFBYUcsTUFBUUYsYUFBYUUsS0FBTSxPQUFPSCxFQUFFSSxZQUFjSCxFQUFFRyxVQUNyRSxJQUFLSixJQUFNQyxHQUFtQixpQkFBTkQsR0FBK0IsaUJBQU5DLEVBQWlCLE9BQU9ELElBQU1DLEVBQy9FLEdBQUlELE1BQUFBLEdBQUFBLE1BQWlDQyxFQUErQixPQUFPLEVBQzNFLEdBQUlELEVBQUVLLFlBQWNKLEVBQUVJLFVBQVcsT0FBTyxFQUN4QyxJQUFJQyxFQUFPQyxPQUFPRCxLQUFLTixHQUFHckIsT0FBTyxTQUFBNkIsR0FBSyxPQUE4QixJQUE5Qk4sRUFBY08sUUFBUUQsS0FDNUQsT0FBSUYsRUFBS3BDLFNBQVdxQyxPQUFPRCxLQUFLTCxHQUFHdEIsT0FBTyxTQUFBNkIsR0FBSyxPQUE4QixJQUE5Qk4sRUFBY08sUUFBUUQsS0FBV3RDLFFBQ3pFb0MsRUFBS0ksTUFBTSxTQUFBRixHQUFLLE9BQThCLElBQTlCTixFQUFjTyxRQUFRRCxJQUFhVCxRQUFPWSxXQUFBLEVBQUE5QyxjQUFBLENBQUNtQyxFQUFFUSxHQUFJUCxFQUFFTyxJQUFPTixNRG5FcEZLLE9BSkRLLGVBQUFDLFFBQUEsYUFBQSxDQUFBQyxPQUFBLElBTUFELFFBQVFkLFFBQVVjLFFBQVF0QixhQUFlc0IsUUFBUXpDLDJCQUF3QixFQ0l6RXlDLFFBQUF6QyxzQkFBQUEsc0JBZ0NBeUMsUUFBQXRCLGFBQUFBLGFBcUJBc0IsUUFBQWQsUUFBQUEiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzRXF1YWwgPSBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IGV4cG9ydHMuZ2V0UHJvcGVydHlEZWNvcmF0b3JzID0gdm9pZCAwO1xuZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzKGFubm90YXRpb25QcmVmaXgsIHRhcmdldCwgcHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIGtleXMgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5TmFtZSk7XG4gICAgdmFyIGRlY29yYXRvcnMgPSBrZXlzXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnRvU3RyaW5nKCkuc3RhcnRzV2l0aChhbm5vdGF0aW9uUHJlZml4KTsgfSlcbiAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAodmFsdWVzLCBrZXkpIHtcbiAgICAgICAgdmFyIGN1cnJWYWx1ZXMgPSB7XG4gICAgICAgICAgICBrZXk6IGtleS5zdWJzdHJpbmcoYW5ub3RhdGlvblByZWZpeC5sZW5ndGgpLFxuICAgICAgICAgICAgcHJvcHM6IFJlZmxlY3QuZ2V0TWV0YWRhdGEoa2V5LCB0YXJnZXQsIHByb3BlcnR5TmFtZSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5jb25jYXQoY3VyclZhbHVlcyk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3A6IHByb3BlcnR5TmFtZSxcbiAgICAgICAgZGVjb3JhdG9yczogZGVjb3JhdG9yc1xuICAgIH07XG59XG5leHBvcnRzLmdldFByb3BlcnR5RGVjb3JhdG9ycyA9IGdldFByb3BlcnR5RGVjb3JhdG9ycztcbmZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmcpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cbmV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gc3RyaW5nRm9ybWF0O1xuZnVuY3Rpb24gaXNFcXVhbChhLCBiKSB7XG4gICAgdmFyIHByb3BzVG9JZ25vcmUgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBwcm9wc1RvSWdub3JlW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlKVxuICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICAgIGlmICghYSB8fCAhYiB8fCAodHlwZW9mIGEgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9PSAnb2JqZWN0JykpXG4gICAgICAgIHJldHVybiBhID09PSBiO1xuICAgIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGEpLmZpbHRlcihmdW5jdGlvbiAoaykgeyByZXR1cm4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspID09PSAtMTsgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTE7IH0pLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBrZXlzLmV2ZXJ5KGZ1bmN0aW9uIChrKSB7IHJldHVybiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgIT09IC0xIHx8IGlzRXF1YWwuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFthW2tdLCBiW2tdXSwgcHJvcHNUb0lnbm9yZSkpOyB9KTtcbn1cbmV4cG9ydHMuaXNFcXVhbCA9IGlzRXF1YWw7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIHV0aWxzXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuXG4vKipcbiAqIFV0aWwgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIGRlY29yYXRvcnMgZm9yIHRoZSBwcm92aWRlZCBQcm9wZXJ0eVxuICpcbiAqIEBmdW5jdGlvbiBnZXRQcm9wZXJ0eURlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiB1dGlsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzKGFubm90YXRpb25QcmVmaXg6IHN0cmluZywgdGFyZ2V0OiBhbnksIHByb3BlcnR5TmFtZTogc3RyaW5nIHwgc3ltYm9sKToge3Byb3A6IHN0cmluZyB8IHN5bWJvbCwgZGVjb3JhdG9yczogW119IHtcbiAgICAvLyBnZXQgaW5mbyBhYm91dCBrZXlzIHRoYXQgdXNlZCBpbiBjdXJyZW50IHByb3BlcnR5XG4gICAgY29uc3Qga2V5czogYW55W10gPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5TmFtZSk7XG4gICAgY29uc3QgZGVjb3JhdG9ycyA9IGtleXNcbiAgICAgICAgLy8gZmlsdGVyIHlvdXIgY3VzdG9tIGRlY29yYXRvcnNcbiAgICAgICAgLmZpbHRlcihrZXkgPT4ga2V5LnRvU3RyaW5nKCkuc3RhcnRzV2l0aChhbm5vdGF0aW9uUHJlZml4KSlcbiAgICAgICAgLnJlZHVjZSgodmFsdWVzLCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIGdldCBtZXRhZGF0YSB2YWx1ZS5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJWYWx1ZXMgPSB7XG4gICAgICAgICAgICAgICAga2V5OiBrZXkuc3Vic3RyaW5nKGFubm90YXRpb25QcmVmaXgubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBwcm9wczogUmVmbGVjdC5nZXRNZXRhZGF0YShrZXksIHRhcmdldCwgcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuY29uY2F0KGN1cnJWYWx1ZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wOiBwcm9wZXJ0eU5hbWUsXG4gICAgICAgIGRlY29yYXRvcnM6IGRlY29yYXRvcnNcbiAgICB9O1xufVxuXG5cblxuLyoqXG4gKiBVdGlsIGZ1bmN0aW9uIHRvIHByb3ZpZGUgc3RyaW5nIGZvcm1hdCBmdW5jdGlvbmFsaXR5IHNpbWlsYXIgdG8gQyMncyBzdHJpbmcuZm9ybWF0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IGFyZ3MgcmVwbGFjZW1lbnRzIG1hZGUgYnkgb3JkZXIgb2YgYXBwZWFyYW5jZSAocmVwbGFjZW1lbnQwIHdpbCByZXBsYWNlIHswfSBhbmQgc28gb24pXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGZvcm1hdHRlZCBzdHJpbmdcbiAqIEBmdW5jdGlvbiBzdHJpbmdGb3JtYXRcbiAqIEBtZW1iZXJPZiB1dGlsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nRm9ybWF0KHN0cmluZzogc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSl7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBhcmdzW251bWJlcl1cbiAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRGVlcCBPYmplY3QgQ29tcGFyaXNvblxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzA0NzYxNTAvamF2YXNjcmlwdC1kZWVwLWNvbXBhcmlzb24tcmVjdXJzaXZlbHktb2JqZWN0cy1hbmQtcHJvcGVydGllc1xuICpcbiAqIHdpdGggb3B0aW9uYWwgaWdub3JlZCBwcm9wZXJ0aWVzXG4gKlxuICogQHBhcmFtIHt7fX0gYVxuICogQHBhcmFtIHt7fX0gYlxuICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wc1RvSWdub3JlXVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEBmdW5jdGlvbiBpc0VxdWFsXG4gKiBAbWVtYmVyT2YgdXRpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWwoYTogYW55LCBiOiBhbnksLi4ucHJvcHNUb0lnbm9yZTogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICAgIGlmICghYSB8fCAhYiB8fCAodHlwZW9mIGEgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9PSAnb2JqZWN0JykpIHJldHVybiBhID09PSBiO1xuICAgIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGEpLmZpbHRlcihrID0+IHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTEpO1xuICAgIGlmIChrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikuZmlsdGVyKGsgPT4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspID09PSAtMSkubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGtleXMuZXZlcnkoayA9PiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgIT09IC0xIHx8IGlzRXF1YWwoYVtrXSwgYltrXSwgLi4ucHJvcHNUb0lnbm9yZSkpO1xufSJdfQ==
