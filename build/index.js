"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=exports.Model=exports.Validation=void 0,exports.Validation=__importStar(require("./validation")),exports.Model=__importStar(require("./Model")),exports.Utils=__importStar(require("./utils"));var __spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};function getPropertyDecorators(r,o,n){var t=Reflect.getMetadataKeys(o,n).filter(function(t){return t.toString().startsWith(r)}).reduce(function(t,e){e={key:e.substring(r.length),props:Reflect.getMetadata(e,o,n)};return t.concat(e)},[]);return{prop:n,decorators:t}}function stringFormat(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:t})}function isEqual(e,r){for(var o=[],t=2;t<arguments.length;t++)o[t-2]=arguments[t];if(e===r)return!0;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(!e||!r||"object"!=typeof e&&"object"!=typeof r)return e===r;if(null==e||null==r)return!1;if(e.prototype!==r.prototype)return!1;var n=Object.keys(e).filter(function(t){return-1===o.indexOf(t)});return n.length===Object.keys(r).filter(function(t){return-1===o.indexOf(t)}).length&&n.every(function(t){return-1!==o.indexOf(t)||isEqual.apply(void 0,__spreadArray([e[t],r[t]],o))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEqual=exports.stringFormat=exports.getPropertyDecorators=void 0,exports.getPropertyDecorators=getPropertyDecorators,exports.stringFormat=stringFormat,exports.isEqual=isEqual;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var validation_1=require("../validation"),utils_1=require("../utils"),Model=function(){function e(t){e.constructFromObject(this,t)}return e.prototype.hasErrors=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return validation_1.validate(this)},e.prototype.equals=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.isEqual.apply(void 0,__spreadArray([this,t],e))},e.constructFromObject=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r]);return t},e}();exports.default=Model;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Model=void 0,exports.Model=__importStar(require("./Model")),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ERROR_MESSAGES=exports.ValidationKeys=void 0,exports.ValidationKeys={REFLECT:"model.validation.",REQUIRED:"required",MIN:"min",MAX:"max",MIN_LENGTH:"minlength",MAX_LENGTH:"maxlength",PATTERN:"pattern",EMAIL:"email",URL:"url"},exports.DEFAULT_ERROR_MESSAGES={REQUIRED:"This field is required",MIN:"The minimum value is {0}",MAX:"The maximum value is {0}",MIN_LENGTH:"The minimum length is {0}",MAX_LENGTH:"The maximum length is {0}",PATTERN:"The value does not match the pattern",EMAIL:"The value is not a valid email",URL:"The value is not a valid URL",DEFAULT:"There is an Error"},Object.defineProperty(exports,"__esModule",{value:!0}),exports.url=exports.email=exports.pattern=exports.maxlength=exports.minlength=exports.max=exports.min=exports.required=exports.getValidationKey=void 0,require("reflect-metadata");var constants_1=require("./constants"),getValidationKey=function(t){return constants_1.ValidationKeys.REFLECT+t};exports.getValidationKey=getValidationKey;var required=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.REQUIRED),{message:r},t,e)}};exports.required=required;var min=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN),{value:r,message:o},t,e)}};exports.min=min;var max=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX),{value:r,message:o},t,e)}};exports.max=max;var minlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN_LENGTH),{value:r,message:o},t,e)}};exports.minlength=minlength;var maxlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX_LENGTH),{value:r,message:o},t,e)}};exports.maxlength=maxlength;var pattern=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.PATTERN),{value:"string"==typeof r?r:r.toString(),message:o},t,e)}};exports.pattern=pattern;var email=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.EMAIL),{message:r},t,e)}};exports.email=email;var url=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.URL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.URL),{message:r},t,e)}};exports.url=url;var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__exportStar=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||__createBinding(e,t,r)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Validators=exports.Decorators=void 0,exports.Decorators=__importStar(require("./decorators")),__exportStar(require("./types"),exports),__exportStar(require("./validation"),exports),__exportStar(require("./constants"),exports),exports.Validators=__importStar(require("./Validators")),Object.defineProperty(exports,"__esModule",{value:!0});var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.validate=exports.ValidatorRegistry=void 0;var utils_1=require("../utils"),Validators=__importStar(require("./Validators")),constants_1=require("./constants"),Validator_1=__importDefault(require("./Validators/Validator"));function ValRegistry(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new function(){var r={};this.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){t instanceof Validator_1.default?r[t.validationKey]=t:(t=new(t.default||t),r[t.validationKey]=t)})},this.getValidator=function(t){if(t in r)return r[t]}};return r.register.apply(r,t),r}function validate(a){var t,e=[];for(t in a)a.hasOwnProperty(t)&&e.push(utils_1.getPropertyDecorators(constants_1.ValidationKeys.REFLECT,a,t));return e.reduce(function(t,o){var n=o.prop,e=o.decorators;if(!e||!e.length)return t;e=e.reduce(function(t,e){var r=exports.ValidatorRegistry.getValidator(e.key);if(!r)throw new Error("Could not find Matching validator for "+e.key+" for property "+o.prop);r=r.hasErrors.apply(r,__spreadArray([a[n]],Object.values(e.props)));return r&&((t=t||{})[e.key]=r),t},void 0);return e&&(e={property:o.prop,errors:e},(t=t||[]).push(e)),t},void 0)}exports.ValidatorRegistry=ValRegistry.apply(void 0,Object.values(Validators)),exports.validate=validate;var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),PatternValidator_1=__importDefault(require("./PatternValidator")),EmailValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),r.call(this,constants_1.ValidationKeys.EMAIL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.emailPat,e)},o.emailPat=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,o}(PatternValidator_1.default);exports.default=EmailValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),e.call(this,constants_1.ValidationKeys.MAX_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length>e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX),e.call(this,constants_1.ValidationKeys.MAX,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return e<t?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),e.call(this,constants_1.ValidationKeys.MIN_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN),e.call(this,constants_1.ValidationKeys.MIN,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),PatternValidator=function(r){function e(t,e){return void 0===t&&(t=constants_1.ValidationKeys.PATTERN),void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),r.call(this,t,e)||this}return __extends(e,r),e.prototype.getPattern=function(t){if(!e.regexpParser.test(t))return new RegExp(t);t=t.match(e.regexpParser);return new RegExp(t[1],t[2])},e.prototype.hasErrors=function(t,e,r){if(t)return(e="string"==typeof e?this.getPattern(e):e).test(t)?void 0:this.getMessage(r||this.message)},e.regexpParser=new RegExp("^/(.+)/([gimus]*)$"),e}(Validator_1.default);exports.default=PatternValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),RequiredValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),e.call(this,constants_1.ValidationKeys.REQUIRED,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e){return t?void 0:this.getMessage(e||this.message)},t}(Validator_1.default);exports.default=RequiredValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),URLValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.URL),r.call(this,constants_1.ValidationKeys.URL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.urlPattern,e)},o.urlPattern=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i,o}((PatternValidator_1=__importDefault(require("./PatternValidator"))).default);exports.default=URLValidator;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("../../utils"),constants_1=require("../constants"),Validator=function(){function t(t,e){void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.DEFAULT),this.validationKey=t,this.message=e}return t.prototype.getMessage=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.stringFormat.apply(void 0,__spreadArray([t],e))},t}();exports.default=Validator;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLValidator=exports.PatternValidator=exports.MinValidator=exports.MinLengthValidator=exports.MaxValidator=exports.MaxLengthValidator=exports.RequiredValidator=exports.EmailValidator=void 0,exports.EmailValidator=__importStar(require("./EmailValidator")),exports.RequiredValidator=__importStar(require("./RequiredValidator")),exports.MaxLengthValidator=__importStar(require("./MaxLengthValidator")),exports.MaxValidator=__importStar(require("./MaxValidator")),exports.MinLengthValidator=__importStar(require("./MinLengthValidator")),exports.MinValidator=__importStar(require("./MinValidator")),exports.PatternValidator=__importStar(require("./PatternValidator")),exports.URLValidator=__importStar(require("./URLValidator"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiaW5kZXgudHMiLCJ1dGlscy5qcyIsInV0aWxzLnRzIiwiTW9kZWwvTW9kZWwuanMiLCJNb2RlbC9Nb2RlbC50cyIsIk1vZGVsL2luZGV4LmpzIiwiTW9kZWwvaW5kZXgudHMiLCJ2YWxpZGF0aW9uL2NvbnN0YW50cy5qcyIsInZhbGlkYXRpb24vY29uc3RhbnRzLnRzIiwidmFsaWRhdGlvbi9kZWNvcmF0b3JzLmpzIiwidmFsaWRhdGlvbi9kZWNvcmF0b3JzLnRzIiwidmFsaWRhdGlvbi9pbmRleC5qcyIsInZhbGlkYXRpb24vaW5kZXgudHMiLCJ2YWxpZGF0aW9uL3R5cGVzLmpzIiwidmFsaWRhdGlvbi92YWxpZGF0aW9uLmpzIiwidmFsaWRhdGlvbi92YWxpZGF0aW9uLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heExlbmd0aFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NYXhMZW5ndGhWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWF4VmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heFZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5MZW5ndGhWYWxpZGF0b3IuanMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWluTGVuZ3RoVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01pblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5WYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvUGF0dGVyblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9QYXR0ZXJuVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1VSTFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9VUkxWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1ZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC50cyJdLCJuYW1lcyI6WyJfX2NyZWF0ZUJpbmRpbmciLCJ0aGlzIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJ1bmRlZmluZWQiLCJfX3NldE1vZHVsZURlZmF1bHQiLCJ2IiwidmFsdWUiLCJfX2ltcG9ydFN0YXIiLCJtb2QiLCJfX2VzTW9kdWxlIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmVzdWx0IiwiZXhwb3J0cyIsIlV0aWxzIiwiTW9kZWwiLCJWYWxpZGF0aW9uIiwicmVxdWlyZSIsIl9fc3ByZWFkQXJyYXkiLCJ0byIsImZyb20iLCJpIiwiaWwiLCJsZW5ndGgiLCJqIiwiZ2V0UHJvcGVydHlEZWNvcmF0b3JzIiwiYW5ub3RhdGlvblByZWZpeCIsInRhcmdldCIsInByb3BlcnR5TmFtZSIsImRlY29yYXRvcnMiLCJSZWZsZWN0IiwiZ2V0TWV0YWRhdGFLZXlzIiwiZmlsdGVyIiwia2V5IiwidG9TdHJpbmciLCJzdGFydHNXaXRoIiwicmVkdWNlIiwidmFsdWVzIiwiY3VyclZhbHVlcyIsInN1YnN0cmluZyIsInByb3BzIiwiZ2V0TWV0YWRhdGEiLCJjb25jYXQiLCJwcm9wIiwic3RyaW5nRm9ybWF0Iiwic3RyaW5nIiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwicmVwbGFjZSIsIm1hdGNoIiwibnVtYmVyIiwiaXNFcXVhbCIsImEiLCJiIiwicHJvcHNUb0lnbm9yZSIsIkRhdGUiLCJnZXRUaW1lIiwia2V5cyIsImluZGV4T2YiLCJldmVyeSIsImFwcGx5IiwidmFsaWRhdGlvbl8xIiwidXRpbHNfMSIsIm1vZGVsIiwiY29uc3RydWN0RnJvbU9iamVjdCIsImhhc0Vycm9ycyIsInZhbGlkYXRlIiwiZXF1YWxzIiwib2JqIiwiZXhjZXB0aW9ucyIsInNlbGYiLCJkZWZhdWx0IiwiREVGQVVMVF9FUlJPUl9NRVNTQUdFUyIsIlZhbGlkYXRpb25LZXlzIiwiUkVGTEVDVCIsIlJFUVVJUkVEIiwiTUlOIiwiTUFYIiwiTUlOX0xFTkdUSCIsIk1BWF9MRU5HVEgiLCJQQVRURVJOIiwiRU1BSUwiLCJVUkwiLCJERUZBVUxUIiwidXJsIiwiZW1haWwiLCJwYXR0ZXJuIiwibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwibWF4IiwibWluIiwicmVxdWlyZWQiLCJnZXRWYWxpZGF0aW9uS2V5IiwiY29uc3RhbnRzXzEiLCJtZXNzYWdlIiwicHJvcGVydHlLZXkiLCJkZWZpbmVNZXRhZGF0YSIsIl9fZXhwb3J0U3RhciIsInAiLCJWYWxpZGF0b3JzIiwiRGVjb3JhdG9ycyIsIl9faW1wb3J0RGVmYXVsdCIsIlZhbGlkYXRvclJlZ2lzdHJ5IiwiVmFsaWRhdG9yXzEiLCJWYWxSZWdpc3RyeSIsImluaXRpYWwiLCJyZWdpc3RyeSIsImNhY2hlIiwicmVnaXN0ZXIiLCJ2YWxpZGF0b3IiLCJmb3JFYWNoIiwidmFsaWRhdGlvbktleSIsImluc3RhbmNlIiwiZ2V0VmFsaWRhdG9yIiwidmFsaWRhdG9yS2V5IiwiZGVjb3JhdGVkUHJvcGVydGllcyIsInB1c2giLCJhY2N1bSIsImRlY29yYXRlZFByb3BlcnR5IiwiZXJycyIsImFjYyIsImRlY29yYXRvciIsIkVycm9yIiwiZXJyIiwicHJvcEVycm9ycyIsInByb3BlcnR5IiwiZXJyb3JzIiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiX18iLCJjb25zdHJ1Y3RvciIsIlBhdHRlcm5WYWxpZGF0b3JfMSIsIkVtYWlsVmFsaWRhdG9yIiwiX3N1cGVyIiwiZW1haWxQYXQiLCJNYXhMZW5ndGhWYWxpZGF0b3IiLCJnZXRNZXNzYWdlIiwiTWF4VmFsaWRhdG9yIiwiTWluTGVuZ3RoVmFsaWRhdG9yIiwiTWluVmFsaWRhdG9yIiwiUGF0dGVyblZhbGlkYXRvciIsImdldFBhdHRlcm4iLCJyZWdleHBQYXJzZXIiLCJ0ZXN0IiwiUmVnRXhwIiwiUmVxdWlyZWRWYWxpZGF0b3IiLCJVUkxWYWxpZGF0b3IiLCJ1cmxQYXR0ZXJuIiwiVmFsaWRhdG9yIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFJQSxnQkFBbUJDLE1BQVFBLEtBQUtELGtCQUFxQkUsT0FBT0MsT0FBVSxTQUFTQyxFQUFHQyxFQUFHQyxFQUFHQyxRQUF4RlAsSUFBQUEsSUFBbUJPLEVBQVFELEdBQzNCSixPQUFNTSxlQUFrQkosRUFBR0UsRUFBTCxDQUFBRyxZQUFBLEVBQUFDLElBQUEsV0FBQSxPQUFBTCxFQUFBQyxPQUN0QkosU0FBT00sRUFBQUEsRUFBQUEsRUFBZUosR0FBMkJNLEVBQXBCSCxPQUFZSSxJQUFWRixFQUFGSCxFQUFvQkksR0FBS0wsRUFBQUMsS0FBMkJNLG1CQUFBWCxNQUFBQSxLQUFBVyxxQkFBQVYsT0FBQUMsT0FBQSxTQUFBQyxFQUFBUyxHQUFqRlgsT0FBQU0sZUFBQUosRUFBQSxVQUFBLENBQUFLLFlBQUEsRUFBQUssTUFBQUQsS0FDRSxTQUFTVCxFQUFHQyxHQUNkRCxFQUFBLFFBQVdPLElBSmZJLGFBQUFkLE1BQUFBLEtBQUFjLGNBQUEsU0FBQUMsR0FhSSxHQUFJQSxHQUFPQSxFQUFJQyxXQUFZLE9BQU9ELEVBTmxDSixJQUFBQSxFQUFBQSxHQUNBVixHQUFPTSxNQUFEUSxFQUFDUixJQUFQLElBQXlCRixLQUFBVSxFQUFXLFlBQUFWLEdBQUFKLE9BQUFn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QUFPLElBQ3REUSxRQUFRNEksYUFBZTVJLFFBQVFzSSxpQkFBbUJ0SSxRQUFRcUksYUFBZXJJLFFBQVFvSSxtQkFBcUJwSSxRQUFRbUksYUFBZW5JLFFBQVFpSSxtQkFBcUJqSSxRQUFRMkksa0JBQW9CM0ksUUFBUThILG9CQUFpQixFQ2YvTTlILFFBQUE4SCxlQUFBckksYUFBQVcsUUFBQSxxQkFDQUosUUFBQTJJLGtCQUFBbEosYUFBQVcsUUFBQSx3QkFDQUosUUFBQWlJLG1CQUFBeEksYUFBQVcsUUFBQSx5QkFDQUosUUFBQW1JLGFBQUExSSxhQUFBVyxRQUFBLG1CQUNBSixRQUFBb0ksbUJBQUEzSSxhQUFBVyxRQUFBLHlCQUNBSixRQUFBcUksYUFBQTVJLGFBQUFXLFFBQUEsbUJBQ0FKLFFBQUFzSSxpQkFBQTdJLGFBQUFXLFFBQUEsdUJBQ0FKLFFBQUE0SSxhQUFBbkosYUFBQVcsUUFBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlV0aWxzID0gZXhwb3J0cy5Nb2RlbCA9IGV4cG9ydHMuVmFsaWRhdGlvbiA9IHZvaWQgMDtcbmV4cG9ydHMuVmFsaWRhdGlvbiA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi92YWxpZGF0aW9uXCIpKTtcbmV4cG9ydHMuTW9kZWwgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTW9kZWxcIikpO1xuZXhwb3J0cy5VdGlscyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi91dGlsc1wiKSk7IiwiLyoqXG4gKiBAbW9kdWxlIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuZXhwb3J0ICogYXMgVmFsaWRhdGlvbiBmcm9tICcuL3ZhbGlkYXRpb24nO1xuZXhwb3J0ICogYXMgTW9kZWwgZnJvbSAnLi9Nb2RlbCc7XG5leHBvcnQgKiBhcyBVdGlscyBmcm9tICAnLi91dGlscyc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzRXF1YWwgPSBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IGV4cG9ydHMuZ2V0UHJvcGVydHlEZWNvcmF0b3JzID0gdm9pZCAwO1xuZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzKGFubm90YXRpb25QcmVmaXgsIHRhcmdldCwgcHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIGtleXMgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5TmFtZSk7XG4gICAgdmFyIGRlY29yYXRvcnMgPSBrZXlzXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnRvU3RyaW5nKCkuc3RhcnRzV2l0aChhbm5vdGF0aW9uUHJlZml4KTsgfSlcbiAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAodmFsdWVzLCBrZXkpIHtcbiAgICAgICAgdmFyIGN1cnJWYWx1ZXMgPSB7XG4gICAgICAgICAgICBrZXk6IGtleS5zdWJzdHJpbmcoYW5ub3RhdGlvblByZWZpeC5sZW5ndGgpLFxuICAgICAgICAgICAgcHJvcHM6IFJlZmxlY3QuZ2V0TWV0YWRhdGEoa2V5LCB0YXJnZXQsIHByb3BlcnR5TmFtZSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5jb25jYXQoY3VyclZhbHVlcyk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3A6IHByb3BlcnR5TmFtZSxcbiAgICAgICAgZGVjb3JhdG9yczogZGVjb3JhdG9yc1xuICAgIH07XG59XG5leHBvcnRzLmdldFByb3BlcnR5RGVjb3JhdG9ycyA9IGdldFByb3BlcnR5RGVjb3JhdG9ycztcbmZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmcpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cbmV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gc3RyaW5nRm9ybWF0O1xuZnVuY3Rpb24gaXNFcXVhbChhLCBiKSB7XG4gICAgdmFyIHByb3BzVG9JZ25vcmUgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBwcm9wc1RvSWdub3JlW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlKVxuICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICAgIGlmICghYSB8fCAhYiB8fCAodHlwZW9mIGEgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9PSAnb2JqZWN0JykpXG4gICAgICAgIHJldHVybiBhID09PSBiO1xuICAgIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGEpLmZpbHRlcihmdW5jdGlvbiAoaykgeyByZXR1cm4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspID09PSAtMTsgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTE7IH0pLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBrZXlzLmV2ZXJ5KGZ1bmN0aW9uIChrKSB7IHJldHVybiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgIT09IC0xIHx8IGlzRXF1YWwuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFthW2tdLCBiW2tdXSwgcHJvcHNUb0lnbm9yZSkpOyB9KTtcbn1cbmV4cG9ydHMuaXNFcXVhbCA9IGlzRXF1YWw7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIHV0aWxzXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIEVyclxuICovXG5leHBvcnQgdHlwZSBFcnIgPSBFcnJvciB8IHN0cmluZyB8IHVuZGVmaW5lZFxuXG4vKipcbiAqIFV0aWwgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIGRlY29yYXRvcnMgZm9yIHRoZSBwcm92aWRlZCBQcm9wZXJ0eVxuICpcbiAqIEBmdW5jdGlvbiBnZXRQcm9wZXJ0eURlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiB1dGlsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzKGFubm90YXRpb25QcmVmaXg6IHN0cmluZywgdGFyZ2V0OiBhbnksIHByb3BlcnR5TmFtZTogc3RyaW5nIHwgc3ltYm9sKToge3Byb3A6IHN0cmluZyB8IHN5bWJvbCwgZGVjb3JhdG9yczogW119IHtcbiAgICAvLyBnZXQgaW5mbyBhYm91dCBrZXlzIHRoYXQgdXNlZCBpbiBjdXJyZW50IHByb3BlcnR5XG4gICAgY29uc3Qga2V5czogYW55W10gPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5TmFtZSk7XG4gICAgY29uc3QgZGVjb3JhdG9ycyA9IGtleXNcbiAgICAgICAgLy8gZmlsdGVyIHlvdXIgY3VzdG9tIGRlY29yYXRvcnNcbiAgICAgICAgLmZpbHRlcihrZXkgPT4ga2V5LnRvU3RyaW5nKCkuc3RhcnRzV2l0aChhbm5vdGF0aW9uUHJlZml4KSlcbiAgICAgICAgLnJlZHVjZSgodmFsdWVzLCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIGdldCBtZXRhZGF0YSB2YWx1ZS5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJWYWx1ZXMgPSB7XG4gICAgICAgICAgICAgICAga2V5OiBrZXkuc3Vic3RyaW5nKGFubm90YXRpb25QcmVmaXgubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBwcm9wczogUmVmbGVjdC5nZXRNZXRhZGF0YShrZXksIHRhcmdldCwgcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXMuY29uY2F0KGN1cnJWYWx1ZXMpO1xuICAgICAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wOiBwcm9wZXJ0eU5hbWUsXG4gICAgICAgIGRlY29yYXRvcnM6IGRlY29yYXRvcnNcbiAgICB9O1xufVxuXG5cblxuLyoqXG4gKiBVdGlsIGZ1bmN0aW9uIHRvIHByb3ZpZGUgc3RyaW5nIGZvcm1hdCBmdW5jdGlvbmFsaXR5IHNpbWlsYXIgdG8gQyMncyBzdHJpbmcuZm9ybWF0XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IGFyZ3MgcmVwbGFjZW1lbnRzIG1hZGUgYnkgb3JkZXIgb2YgYXBwZWFyYW5jZSAocmVwbGFjZW1lbnQwIHdpbCByZXBsYWNlIHswfSBhbmQgc28gb24pXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGZvcm1hdHRlZCBzdHJpbmdcbiAqIEBmdW5jdGlvbiBzdHJpbmdGb3JtYXRcbiAqIEBtZW1iZXJPZiB1dGlsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nRm9ybWF0KHN0cmluZzogc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSl7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC97KFxcZCspfS9nLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBhcmdzW251bWJlcl1cbiAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRGVlcCBPYmplY3QgQ29tcGFyaXNvblxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzA0NzYxNTAvamF2YXNjcmlwdC1kZWVwLWNvbXBhcmlzb24tcmVjdXJzaXZlbHktb2JqZWN0cy1hbmQtcHJvcGVydGllc1xuICpcbiAqIHdpdGggb3B0aW9uYWwgaWdub3JlZCBwcm9wZXJ0aWVzXG4gKlxuICogQHBhcmFtIHt7fX0gYVxuICogQHBhcmFtIHt7fX0gYlxuICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wc1RvSWdub3JlXVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEBmdW5jdGlvbiBpc0VxdWFsXG4gKiBAbWVtYmVyT2YgdXRpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWwoYTogYW55LCBiOiBhbnksLi4ucHJvcHNUb0lnbm9yZTogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICAgIGlmICghYSB8fCAhYiB8fCAodHlwZW9mIGEgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9PSAnb2JqZWN0JykpIHJldHVybiBhID09PSBiO1xuICAgIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcbiAgICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKGEpLmZpbHRlcihrID0+IHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTEpO1xuICAgIGlmIChrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikuZmlsdGVyKGsgPT4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspID09PSAtMSkubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGtleXMuZXZlcnkoayA9PiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgIT09IC0xIHx8IGlzRXF1YWwoYVtrXSwgYltrXSwgLi4ucHJvcHNUb0lnbm9yZSkpO1xufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxuICAgICAgICB0b1tqXSA9IGZyb21baV07XG4gICAgcmV0dXJuIHRvO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB2YWxpZGF0aW9uXzEgPSByZXF1aXJlKFwiLi4vdmFsaWRhdGlvblwiKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xudmFyIE1vZGVsID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2RlbChtb2RlbCkge1xuICAgICAgICBNb2RlbC5jb25zdHJ1Y3RGcm9tT2JqZWN0KHRoaXMsIG1vZGVsKTtcbiAgICB9XG4gICAgTW9kZWwucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsaWRhdGlvbl8xLnZhbGlkYXRlKHRoaXMpO1xuICAgIH07XG4gICAgTW9kZWwucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIGV4Y2VwdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGV4Y2VwdGlvbnNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWxzXzEuaXNFcXVhbC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW3RoaXMsIG9ial0sIGV4Y2VwdGlvbnMpKTtcbiAgICB9O1xuICAgIE1vZGVsLmNvbnN0cnVjdEZyb21PYmplY3QgPSBmdW5jdGlvbiAoc2VsZiwgb2JqKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBzZWxmLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgICAgICAgICAgIHNlbGZbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH07XG4gICAgcmV0dXJuIE1vZGVsO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGVsOyIsImltcG9ydCB7dmFsaWRhdGV9IGZyb20gXCIuLi92YWxpZGF0aW9uXCI7XG5pbXBvcnQgVmFsaWRhdGFibGUsIHtFcnJvcnN9IGZyb20gXCIuLi92YWxpZGF0aW9uL3R5cGVzXCI7XG5pbXBvcnQge2lzRXF1YWx9IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIFZhbGlkYXRhYmxlIE1vZGVsIG9iamVjdFxuICpcbiAqIE1vZGVsIG9iamVjdHMgbXVzdDpcbiAqICAtIEhhdmUgYWxsIHRoZWlyIHByb3BlcnRpZXMgZGVmaW5lZCBhcyBvcHRpb25hbDtcbiAqICAtIEhhdmUgYWxsIHRoZWlyIHByb3BlcnRpZXMgaW5pdGlhbGl6ZWQgKG9ubHkgdGhlICdAcmVxdWlyZWQoKScgZGVjb3JhdGVkIHByb3BlcnRpZXNcbiAqICA8c3Ryb25nPm5lZWQ8L3N0cm9uZz4gdG8gYmUgaW5pdGlhbGl6ZWQsIGJ1dCBhbGwgb2YgdGhlbSBzaG91bGQgYmUgYXMgZ29vZCBwcmFjdGljZSk7XG4gKlxuICogQGNsYXNzIE1vZGVsXG4gKiBAYWJzdHJhY3RcbiAqIEBpbXBsZW1lbnRzIFZhbGlkYXRhYmxlXG4gKiBAbmFtZXNwYWNlIE1vZGVsXG4gKiBAbWVtYmVyT2YgTW9kZWxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgTW9kZWwgaW1wbGVtZW50cyBWYWxpZGF0YWJsZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb2RlbCB8IHt9fSBtb2RlbCBiYXNlIG9iamVjdCBmcm9tIHdoaWNoIHRvIHBvcHVsYXRlIHByb3BlcnRpZXMgZnJvbVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc2VlIE1vZGVsI2NvbnN0cnVjdEZyb21PYmplY3RcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IobW9kZWw/OiBNb2RlbCB8IHt9KXtcbiAgICAgICAgTW9kZWwuY29uc3RydWN0RnJvbU9iamVjdCh0aGlzLCBtb2RlbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHRoZSBvYmplY3QgYWNjb3JkaW5nIHRvIGl0cyBkZWNvcmF0ZWQgcHJvcGVydGllc1xuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IFthcmdzXVxuICAgICAqIEBtZW1iZXJPZiBNb2RlbFxuICAgICAqIEBzZWUgdmFsaWRhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgaGFzRXJyb3JzKC4uLmFyZ3M6IGFueVtdKTogRXJyb3Jze1xuICAgICAgICByZXR1cm4gdmFsaWRhdGUodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZSBvYmplY3QgZXF1YWxpdHkgcmVjdXJzaXZlbHlcbiAgICAgKiBAcGFyYW0ge2FueX0gb2JqIG9iamVjdCB0byBjb21wYXJlIHRvXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtleGNlcHRpb25zXSBwcm9wZXJ0eSBuYW1lcyB0byBiZSBleGNsdWRlZCBmcm9tIHRoZSBjb21wYXJpc29uXG4gICAgICogQG1lbWJlck9mIE1vZGVsXG4gICAgICovXG4gICAgcHVibGljIGVxdWFscyhvYmo6IGFueSwgLi4uZXhjZXB0aW9uczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGlzRXF1YWwodGhpcywgb2JqLCAuLi5leGNlcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXBvcHVsYXRlcyB0aGUgT2JqZWN0IHByb3BlcnRpZXMgd2l0aCB0aGUgb25lcyBmcm9tIHRoZSBuZXcgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1R9IHNlbGZcbiAgICAgKiBAcGFyYW0ge1R8IHt9fSBvYmpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQGZ1bmN0aW9uIGNvbnN0cnVjdEZyb21PYmplY3RcbiAgICAgKiBAbWVtYmVyT2YgTW9kZWxcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNvbnN0cnVjdEZyb21PYmplY3Q8VCBleHRlbmRzIE1vZGVsPihzZWxmOiBULCBvYmo/OiBUIHwge30pe1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIG9iailcbiAgICAgICAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBzZWxmLmhhc093blByb3BlcnR5KHByb3ApKS8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBzZWxmW3Byb3BdID0gb2JqW3Byb3BdO1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTW9kZWwgPSB2b2lkIDA7XG5leHBvcnRzLk1vZGVsID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01vZGVsXCIpKTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgTW9kZWxcbiAqIEBtZW1iZXJPZiBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5cbmV4cG9ydCAqIGFzIE1vZGVsIGZyb20gXCIuL01vZGVsXCI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuREVGQVVMVF9FUlJPUl9NRVNTQUdFUyA9IGV4cG9ydHMuVmFsaWRhdGlvbktleXMgPSB2b2lkIDA7XG5leHBvcnRzLlZhbGlkYXRpb25LZXlzID0ge1xuICAgIFJFRkxFQ1Q6ICdtb2RlbC52YWxpZGF0aW9uLicsXG4gICAgUkVRVUlSRUQ6ICdyZXF1aXJlZCcsXG4gICAgTUlOOiAnbWluJyxcbiAgICBNQVg6ICdtYXgnLFxuICAgIE1JTl9MRU5HVEg6ICdtaW5sZW5ndGgnLFxuICAgIE1BWF9MRU5HVEg6ICdtYXhsZW5ndGgnLFxuICAgIFBBVFRFUk46ICdwYXR0ZXJuJyxcbiAgICBFTUFJTDogXCJlbWFpbFwiLFxuICAgIFVSTDogXCJ1cmxcIlxufTtcbmV4cG9ydHMuREVGQVVMVF9FUlJPUl9NRVNTQUdFUyA9IHtcbiAgICBSRVFVSVJFRDogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnLFxuICAgIE1JTjogJ1RoZSBtaW5pbXVtIHZhbHVlIGlzIHswfScsXG4gICAgTUFYOiAnVGhlIG1heGltdW0gdmFsdWUgaXMgezB9JyxcbiAgICBNSU5fTEVOR1RIOiAnVGhlIG1pbmltdW0gbGVuZ3RoIGlzIHswfScsXG4gICAgTUFYX0xFTkdUSDogJ1RoZSBtYXhpbXVtIGxlbmd0aCBpcyB7MH0nLFxuICAgIFBBVFRFUk46ICdUaGUgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlIHBhdHRlcm4nLFxuICAgIEVNQUlMOiBcIlRoZSB2YWx1ZSBpcyBub3QgYSB2YWxpZCBlbWFpbFwiLFxuICAgIFVSTDogXCJUaGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgVVJMXCIsXG4gICAgREVGQVVMVDogXCJUaGVyZSBpcyBhbiBFcnJvclwiXG59OyIsIi8qKlxuICogQGVudW1cbiAqIEBuYW1lc3BhY2UgVmFsaWRhdGlvblxuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBWYWxpZGF0aW9uS2V5cyA9IHtcbiAgICBSRUZMRUNUOiAnbW9kZWwudmFsaWRhdGlvbi4nLFxuICAgIFJFUVVJUkVEOiAncmVxdWlyZWQnLFxuICAgIE1JTjogJ21pbicsXG4gICAgTUFYOiAnbWF4JyxcbiAgICBNSU5fTEVOR1RIOiAnbWlubGVuZ3RoJyxcbiAgICBNQVhfTEVOR1RIOiAnbWF4bGVuZ3RoJyxcbiAgICBQQVRURVJOOiAncGF0dGVybicsXG4gICAgRU1BSUw6IFwiZW1haWxcIixcbiAgICBVUkw6IFwidXJsXCJcbn1cblxuLyoqXG4gKiBAZW51bVxuICogQG5hbWVzcGFjZSBWYWxpZGF0aW9uXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRVJST1JfTUVTU0FHRVMgPSB7XG4gICAgUkVRVUlSRUQ6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyxcbiAgICBNSU46ICdUaGUgbWluaW11bSB2YWx1ZSBpcyB7MH0nLFxuICAgIE1BWDogJ1RoZSBtYXhpbXVtIHZhbHVlIGlzIHswfScsXG4gICAgTUlOX0xFTkdUSDogJ1RoZSBtaW5pbXVtIGxlbmd0aCBpcyB7MH0nLFxuICAgIE1BWF9MRU5HVEg6ICdUaGUgbWF4aW11bSBsZW5ndGggaXMgezB9JyxcbiAgICBQQVRURVJOOiAnVGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZSBwYXR0ZXJuJyxcbiAgICBFTUFJTDogXCJUaGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgZW1haWxcIixcbiAgICBVUkw6IFwiVGhlIHZhbHVlIGlzIG5vdCBhIHZhbGlkIFVSTFwiLFxuICAgIERFRkFVTFQ6IFwiVGhlcmUgaXMgYW4gRXJyb3JcIlxufSIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy51cmwgPSBleHBvcnRzLmVtYWlsID0gZXhwb3J0cy5wYXR0ZXJuID0gZXhwb3J0cy5tYXhsZW5ndGggPSBleHBvcnRzLm1pbmxlbmd0aCA9IGV4cG9ydHMubWF4ID0gZXhwb3J0cy5taW4gPSBleHBvcnRzLnJlcXVpcmVkID0gZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5ID0gdm9pZCAwO1xucmVxdWlyZShcInJlZmxlY3QtbWV0YWRhdGFcIik7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgZ2V0VmFsaWRhdGlvbktleSA9IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFRkxFQ1QgKyBrZXk7IH07XG5leHBvcnRzLmdldFZhbGlkYXRpb25LZXkgPSBnZXRWYWxpZGF0aW9uS2V5O1xudmFyIHJlcXVpcmVkID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFUVVJUkVEKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucmVxdWlyZWQgPSByZXF1aXJlZDtcbnZhciBtaW4gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTjsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU4pLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5taW4gPSBtaW47XG52YXIgbWF4ID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVg7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4ID0gbWF4O1xudmFyIG1pbmxlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWlubGVuZ3RoID0gbWlubGVuZ3RoO1xudmFyIG1heGxlbmd0aCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWF4bGVuZ3RoID0gbWF4bGVuZ3RoO1xudmFyIHBhdHRlcm4gPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk47IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUEFUVEVSTiksIHtcbiAgICAgICAgICAgIHZhbHVlOiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB2YWx1ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMucGF0dGVybiA9IHBhdHRlcm47XG52YXIgZW1haWwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUw7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuRU1BSUwpLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5lbWFpbCA9IGVtYWlsO1xudmFyIHVybCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkw7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuVVJMKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMudXJsID0gdXJsOyIsIi8qKlxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5cblxuaW1wb3J0IFwicmVmbGVjdC1tZXRhZGF0YVwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cblxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRWYWxpZGF0aW9uS2V5ID0gKGtleTogc3RyaW5nKSA9PiBWYWxpZGF0aW9uS2V5cy5SRUZMRUNUICsga2V5O1xuXG4vKipcbiAqIE1hcmtzIHRoZSBwcm9wZXJ0eSBhcyByZXF1aXJlZC5cbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuUkVRVUlSRUR9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUR9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCByZXF1aXJlZCA9IChtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEKSA9PiAodGFyZ2V0OiBhbnksIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLlJFUVVJUkVEKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWluaW11bSB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1JTn1cbiAqXG4gKiBAcGFyYW0ge251bWJlciB8IERhdGV9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU59XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBtaW4gPSAodmFsdWU6IG51bWJlciB8IERhdGUgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLk1JTiksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIG1heGltdW0gdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NQVh9XG4gKlxuICogQHBhcmFtIHtudW1iZXIgfCBEYXRlfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWF4ID0gKHZhbHVlOiBudW1iZXIgfCBEYXRlIHwgc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NQVgpLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBtaW5pbXVtIGxlbmd0aCBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEh9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWlubGVuZ3RoID0gKHZhbHVlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWF4aW11bSBsZW5ndGggZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IG1heGxlbmd0aCA9ICh2YWx1ZTogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEgpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIFJlZ0V4cCBwYXR0ZXJuIHRoZSBwcm9wZXJ0eSBtdXN0IHJlc3BlY3RcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuUEFUVEVSTn1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk59XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBwYXR0ZXJuID0gKHZhbHVlOiBSZWdFeHAgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTikgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5QQVRURVJOKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHByb3BlcnR5IGFzIGFuIGVtYWlsXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLkVNQUlMfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgZW1haWwgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5FTUFJTCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgcHJvcGVydHkgYXMgYW4gVVJMXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLlVSTH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkx9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCB1cmwgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkwpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuVVJMKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVmFsaWRhdG9ycyA9IGV4cG9ydHMuRGVjb3JhdG9ycyA9IHZvaWQgMDtcbmV4cG9ydHMuRGVjb3JhdG9ycyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9kZWNvcmF0b3JzXCIpKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi90eXBlc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdmFsaWRhdGlvblwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29uc3RhbnRzXCIpLCBleHBvcnRzKTtcbmV4cG9ydHMuVmFsaWRhdG9ycyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9WYWxpZGF0b3JzXCIpKTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgVmFsaWRhdGlvblxuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuZXhwb3J0ICogYXMgRGVjb3JhdG9ycyBmcm9tICcuL2RlY29yYXRvcnMnO1xuZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgKiBmcm9tICcuL3ZhbGlkYXRpb24nO1xuZXhwb3J0ICogZnJvbSAnLi9jb25zdGFudHMnO1xuZXhwb3J0ICogYXMgVmFsaWRhdG9ycyBmcm9tICcuL1ZhbGlkYXRvcnMnO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnZhbGlkYXRlID0gZXhwb3J0cy5WYWxpZGF0b3JSZWdpc3RyeSA9IHZvaWQgMDtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzXCIpO1xudmFyIFZhbGlkYXRvcnMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vVmFsaWRhdG9yc1wiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9ycy9WYWxpZGF0b3JcIikpO1xuZnVuY3Rpb24gVmFsUmVnaXN0cnkoKSB7XG4gICAgdmFyIGluaXRpYWwgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBpbml0aWFsW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciByZWdpc3RyeSA9IG5ldyBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHt9O1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRvcltfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsaWRhdG9yLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICBpZiAodiBpbnN0YW5jZW9mIFZhbGlkYXRvcl8xLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVbdi52YWxpZGF0aW9uS2V5XSA9IHY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RydWN0b3JNZXRob2QgPSB2LmRlZmF1bHQgfHwgdjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IGNvbnN0cnVjdG9yTWV0aG9kKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW2luc3RhbmNlLnZhbGlkYXRpb25LZXldID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHNlbGYuZ2V0VmFsaWRhdG9yID0gZnVuY3Rpb24gKHZhbGlkYXRvcktleSkge1xuICAgICAgICAgICAgaWYgKCEodmFsaWRhdG9yS2V5IGluIGNhY2hlKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVbdmFsaWRhdG9yS2V5XTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG4gICAgcmVnaXN0cnkucmVnaXN0ZXIuYXBwbHkocmVnaXN0cnksIGluaXRpYWwpO1xuICAgIHJldHVybiByZWdpc3RyeTtcbn1cbmV4cG9ydHMuVmFsaWRhdG9yUmVnaXN0cnkgPSBWYWxSZWdpc3RyeS5hcHBseSh2b2lkIDAsIE9iamVjdC52YWx1ZXMoVmFsaWRhdG9ycykpO1xuZnVuY3Rpb24gdmFsaWRhdGUob2JqKSB7XG4gICAgdmFyIGRlY29yYXRlZFByb3BlcnRpZXMgPSBbXTtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iailcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgICAgICAgIGRlY29yYXRlZFByb3BlcnRpZXMucHVzaCh1dGlsc18xLmdldFByb3BlcnR5RGVjb3JhdG9ycyhjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5SRUZMRUNULCBvYmosIHByb3ApKTtcbiAgICByZXR1cm4gZGVjb3JhdGVkUHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtLCBkZWNvcmF0ZWRQcm9wZXJ0eSkge1xuICAgICAgICB2YXIgcHJvcCA9IGRlY29yYXRlZFByb3BlcnR5LnByb3AsIGRlY29yYXRvcnMgPSBkZWNvcmF0ZWRQcm9wZXJ0eS5kZWNvcmF0b3JzO1xuICAgICAgICBpZiAoIWRlY29yYXRvcnMgfHwgIWRlY29yYXRvcnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtO1xuICAgICAgICB2YXIgZXJycyA9IGRlY29yYXRvcnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGRlY29yYXRvcikge1xuICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9IGV4cG9ydHMuVmFsaWRhdG9yUmVnaXN0cnkuZ2V0VmFsaWRhdG9yKGRlY29yYXRvci5rZXkpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBNYXRjaGluZyB2YWxpZGF0b3IgZm9yIFwiICsgZGVjb3JhdG9yLmtleSArIFwiIGZvciBwcm9wZXJ0eSBcIiArIGRlY29yYXRlZFByb3BlcnR5LnByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVyciA9IHZhbGlkYXRvci5oYXNFcnJvcnMuYXBwbHkodmFsaWRhdG9yLCBfX3NwcmVhZEFycmF5KFtvYmpbcHJvcF1dLCBPYmplY3QudmFsdWVzKGRlY29yYXRvci5wcm9wcykpKTtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhY2MgPSBhY2MgfHwge307XG4gICAgICAgICAgICAgICAgYWNjW2RlY29yYXRvci5rZXldID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKGVycnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9wRXJyb3JzID0ge1xuICAgICAgICAgICAgICAgIHByb3BlcnR5OiBkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wLFxuICAgICAgICAgICAgICAgIGVycm9yczogZXJyc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFjY3VtID0gYWNjdW0gfHwgW107XG4gICAgICAgICAgICBhY2N1bS5wdXNoKHByb3BFcnJvcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2N1bTtcbiAgICB9LCB1bmRlZmluZWQpO1xufVxuZXhwb3J0cy52YWxpZGF0ZSA9IHZhbGlkYXRlOyIsImltcG9ydCBNb2RlbCBmcm9tIFwiLi4vTW9kZWwvTW9kZWxcIjtcbmltcG9ydCB7RXJyb3JzLCBSZWdpc3RyeX0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7Z2V0UHJvcGVydHlEZWNvcmF0b3JzfSBmcm9tICcuLi91dGlscydcbmltcG9ydCAqIGFzIFZhbGlkYXRvcnMgZnJvbSAnLi9WYWxpZGF0b3JzJ1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5c30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvcnMvVmFsaWRhdG9yXCI7XG5cbi8qKlxuICogUmV0dXJuc1xuICogQHJldHVybiB7Kn1cbiAqIEBjb25zdHJ1Y3RvclxuICogQGZ1bmN0aW9uIFZhbFJlZ2lzdHJ5XG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5mdW5jdGlvbiBWYWxSZWdpc3RyeSguLi5pbml0aWFsOiBhbnlbXSkgOiBSZWdpc3RyeSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHJlZ2lzdHJ5OiBSZWdpc3RyeSA9ICBuZXcgZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc3QgY2FjaGU6IGFueSA9IHt9O1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IHNlbGY6IGFueSA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JcbiAgICAgICAgICogQG1lbWJlck9mIFZhbGlkYXRvclJlZ2lzdHJ5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oLi4udmFsaWRhdG9yOiBhbnlbXSkgOiB2b2lke1xuICAgICAgICAgICAgdmFsaWRhdG9yLmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBWYWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVt2LnZhbGlkYXRpb25LZXldID0gdjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yTWV0aG9kID0gdi5kZWZhdWx0IHx8IHY7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2U6IFZhbGlkYXRvciA9IG5ldyBjb25zdHJ1Y3Rvck1ldGhvZCgpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVtpbnN0YW5jZS52YWxpZGF0aW9uS2V5XSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JLZXlcbiAgICAgICAgICogQHJldHVybiB7Kn1cbiAgICAgICAgICogQG1lbWJlck9mIFZhbGlkYXRvclJlZ2lzdHJ5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldFZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbGlkYXRvcktleTogc3RyaW5nKXtcbiAgICAgICAgICAgIGlmICghKHZhbGlkYXRvcktleSBpbiBjYWNoZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW3ZhbGlkYXRvcktleV07XG4gICAgICAgIH1cbiAgICB9KClcbiAgICByZWdpc3RyeS5yZWdpc3RlciguLi5pbml0aWFsKTtcbiAgICByZXR1cm4gcmVnaXN0cnk7XG59XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgVmFsaWRhdG9yUmVnaXN0cnkgPSBWYWxSZWdpc3RyeSguLi5PYmplY3QudmFsdWVzKFZhbGlkYXRvcnMpKTtcblxuLyoqXG4gKiBBbmFseXNlcyB0aGUgZGVjb3JhdGlvbnMgb2YgdGhlIHByb3BlcnRpZXMgYW5kIHZhbGlkYXRlcyB0aGUgb2JqIGFjY29yZGluZyB0byB0aGVtXG4gKiBAZnVuY3Rpb24gdmFsaWRhdGVcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZTxUIGV4dGVuZHMgTW9kZWw+KG9iajogVCkgOiBFcnJvcnN7XG4gICAgY29uc3QgZGVjb3JhdGVkUHJvcGVydGllcyA9IFtdO1xuICAgIGZvciAobGV0IHByb3AgaW4gb2JqKVxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgICAgICAgZGVjb3JhdGVkUHJvcGVydGllcy5wdXNoKGdldFByb3BlcnR5RGVjb3JhdG9ycyhWYWxpZGF0aW9uS2V5cy5SRUZMRUNULCBvYmosIHByb3ApKTtcblxuICAgIHJldHVybiBkZWNvcmF0ZWRQcm9wZXJ0aWVzLnJlZHVjZSgoYWNjdW0sIGRlY29yYXRlZFByb3BlcnR5KSA9PiB7XG4gICAgICAgIGNvbnN0IHtwcm9wLCBkZWNvcmF0b3JzfSA9IGRlY29yYXRlZFByb3BlcnR5O1xuICAgICAgICBpZiAoIWRlY29yYXRvcnMgfHwgIWRlY29yYXRvcnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtO1xuXG4gICAgICAgIGNvbnN0IGVycnMgPSBkZWNvcmF0b3JzLnJlZHVjZSgoYWNjLCBkZWNvcmF0b3I6IHtrZXk6IHN0cmluZywgcHJvcHM6IHt9fSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gVmFsaWRhdG9yUmVnaXN0cnkuZ2V0VmFsaWRhdG9yKGRlY29yYXRvci5rZXkpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIE1hdGNoaW5nIHZhbGlkYXRvciBmb3IgJHtkZWNvcmF0b3Iua2V5fSBmb3IgcHJvcGVydHkgJHtkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wfWApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IHZhbGlkYXRvci5oYXNFcnJvcnMob2JqW3Byb3BdLCAuLi5PYmplY3QudmFsdWVzKGRlY29yYXRvci5wcm9wcykpO1xuICAgICAgICAgICAgaWYgKGVycil7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGFjYyA9IGFjYyB8fCB7fTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgYWNjW2RlY29yYXRvci5rZXldID0gZXJyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB1bmRlZmluZWQpO1xuXG4gICAgICAgIGlmIChlcnJzKXtcbiAgICAgICAgICAgIGNvbnN0IHByb3BFcnJvcnMgPSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydHk6IGRlY29yYXRlZFByb3BlcnR5LnByb3AsXG4gICAgICAgICAgICAgICAgZXJyb3JzOiBlcnJzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBhY2N1bSA9IGFjY3VtIHx8IFtdO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgYWNjdW0ucHVzaChwcm9wRXJyb3JzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhY2N1bTtcbiAgICB9LCB1bmRlZmluZWQpO1xufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgUGF0dGVyblZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1BhdHRlcm5WYWxpZGF0b3JcIikpO1xudmFyIEVtYWlsVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRW1haWxWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRW1haWxWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5FTUFJTCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgRW1haWxWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5oYXNFcnJvcnMuY2FsbCh0aGlzLCB2YWx1ZSwgRW1haWxWYWxpZGF0b3IuZW1haWxQYXQsIG1lc3NhZ2UpO1xuICAgIH07XG4gICAgRW1haWxWYWxpZGF0b3IuZW1haWxQYXQgPSAvW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/LztcbiAgICByZXR1cm4gRW1haWxWYWxpZGF0b3I7XG59KFBhdHRlcm5WYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBFbWFpbFZhbGlkYXRvcjsiLCJpbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgUGF0dGVyblZhbGlkYXRvciBmcm9tIFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCI7XG5cbi8qKlxuICogRW1haWwgVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIEVtYWlsVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBQYXR0ZXJuVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbWFpbFZhbGlkYXRvciBleHRlbmRzIFBhdHRlcm5WYWxpZGF0b3Ige1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IGVtYWlsUGF0OiBSZWdFeHAgPSAvW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/LztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUwpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5FTUFJTCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICByZXR1cm4gc3VwZXIuaGFzRXJyb3JzKHZhbHVlLCBFbWFpbFZhbGlkYXRvci5lbWFpbFBhdCwgbWVzc2FnZSk7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBNYXhMZW5ndGhWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXhMZW5ndGhWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWF4TGVuZ3RoVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVhfTEVOR1RIOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RILCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNYXhMZW5ndGhWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWF4bGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID4gbWF4bGVuZ3RoID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtYXhsZW5ndGgpIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIE1heExlbmd0aFZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWF4TGVuZ3RoVmFsaWRhdG9yOyIsImltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbi8qKlxuICogTWF4IExlbmd0aCBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgTWF4TGVuZ3RoVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBWYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1heExlbmd0aFZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVhfTEVOR1RIKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IHN0cmluZywgbWF4bGVuZ3RoOiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+IG1heGxlbmd0aCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWF4bGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIE1heFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1heFZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXhWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNYXhWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWF4LCBtZXNzYWdlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUgPiBtYXggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1heCkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gTWF4VmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNYXhWYWxpZGF0b3I7IiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBNYXggVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIE1heFZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXhWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuTUFYLCBtZXNzYWdlKVxuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogbnVtYmVyLCBtYXg6IG51bWJlciwgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUgPiBtYXggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1heCkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBNaW5MZW5ndGhWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNaW5MZW5ndGhWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWluTGVuZ3RoVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RILCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNaW5MZW5ndGhWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWlubGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoIDwgbWlubGVuZ3RoID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtaW5sZW5ndGgpIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIE1pbkxlbmd0aFZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWluTGVuZ3RoVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogTWluIExlbmd0aCBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgTWluTGVuZ3RoVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBWYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pbkxlbmd0aFZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuTUlOX0xFTkdUSCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IHN0cmluZywgbWlubGVuZ3RoOiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA8IG1pbmxlbmd0aCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWlubGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIE1pblZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1pblZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNaW5WYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTjsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUlOLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNaW5WYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWluLCBtZXNzYWdlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1pbikgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gTWluVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNaW5WYWxpZGF0b3I7IiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBNaW4gVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIE1pblZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5WYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuTUlOLCBtZXNzYWdlKVxuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1pbikgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBQYXR0ZXJuVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGF0dGVyblZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQYXR0ZXJuVmFsaWRhdG9yKGtleSwgbWVzc2FnZSkge1xuICAgICAgICBpZiAoa2V5ID09PSB2b2lkIDApIHsga2V5ID0gY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUEFUVEVSTjsgfVxuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk47IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGtleSwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgUGF0dGVyblZhbGlkYXRvci5wcm90b3R5cGUuZ2V0UGF0dGVybiA9IGZ1bmN0aW9uIChwYXR0ZXJuKSB7XG4gICAgICAgIGlmICghUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIudGVzdChwYXR0ZXJuKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4pO1xuICAgICAgICB2YXIgbWF0Y2ggPSBwYXR0ZXJuLm1hdGNoKFBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAobWF0Y2hbMV0sIG1hdGNoWzJdKTtcbiAgICB9O1xuICAgIFBhdHRlcm5WYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgcGF0dGVybiwgbWVzc2FnZSkge1xuICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXR0ZXJuID0gdHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnID8gdGhpcy5nZXRQYXR0ZXJuKHBhdHRlcm4pIDogcGF0dGVybjtcbiAgICAgICAgcmV0dXJuICFwYXR0ZXJuLnRlc3QodmFsdWUpID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIFBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyID0gbmV3IFJlZ0V4cChcIl5cXC8oLispXFwvKFtnaW11c10qKSRcIik7XG4gICAgcmV0dXJuIFBhdHRlcm5WYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFBhdHRlcm5WYWxpZGF0b3I7IiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBQYXR0ZXJuIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBQYXR0ZXJuVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBWYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhdHRlcm5WYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHJlZ2V4cFBhcnNlcjogUmVnRXhwID0gbmV3IFJlZ0V4cChcIl5cXC8oLispXFwvKFtnaW11c10qKSRcIik7XG5cbiAgICBjb25zdHJ1Y3RvcihrZXk6IHN0cmluZyA9IFZhbGlkYXRpb25LZXlzLlBBVFRFUk4sIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTil7XG4gICAgICAgIHN1cGVyKGtleSwgbWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXR0ZXJuKHBhdHRlcm46IHN0cmluZyk6IFJlZ0V4cCB7XG4gICAgICAgIGlmICghUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIudGVzdChwYXR0ZXJuKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4pO1xuICAgICAgICBjb25zdCBtYXRjaDogYW55ID0gcGF0dGVybi5tYXRjaChQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlcik7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG1hdGNoWzFdLCBtYXRjaFsyXSk7XG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIHBhdHRlcm46IFJlZ0V4cCB8IHN0cmluZywgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIGlmICghdmFsdWUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBhdHRlcm4gPSB0eXBlb2YgcGF0dGVybiA9PT0gJ3N0cmluZycgPyB0aGlzLmdldFBhdHRlcm4ocGF0dGVybikgOiBwYXR0ZXJuO1xuICAgICAgICByZXR1cm4gIXBhdHRlcm4udGVzdCh2YWx1ZSkgPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgUmVxdWlyZWRWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZXF1aXJlZFZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZXF1aXJlZFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUQ7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFUVVJUkVELCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBSZXF1aXJlZFZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiAhdmFsdWUgPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcXVpcmVkVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBSZXF1aXJlZFZhbGlkYXRvcjsiLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIFJlcXVpcmVkIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBSZXF1aXJlZFZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1aXJlZFZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5SRVFVSVJFRCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLlJFUVVJUkVELCBtZXNzYWdlKVxuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogYW55LCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZSA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgUGF0dGVyblZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1BhdHRlcm5WYWxpZGF0b3JcIikpO1xudmFyIFVSTFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFVSTFZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBVUkxWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlVSTDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuVVJMLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBVUkxWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5oYXNFcnJvcnMuY2FsbCh0aGlzLCB2YWx1ZSwgVVJMVmFsaWRhdG9yLnVybFBhdHRlcm4sIG1lc3NhZ2UpO1xuICAgIH07XG4gICAgVVJMVmFsaWRhdG9yLnVybFBhdHRlcm4gPSAvXig/Oig/Oig/Omh0dHBzP3xmdHApOik/XFwvXFwvKSg/OlxcUysoPzo6XFxTKik/QCk/KD86KD8hKD86MTB8MTI3KSg/OlxcLlxcZHsxLDN9KXszfSkoPyEoPzoxNjlcXC4yNTR8MTkyXFwuMTY4KSg/OlxcLlxcZHsxLDN9KXsyfSkoPyExNzJcXC4oPzoxWzYtOV18MlxcZHwzWzAtMV0pKD86XFwuXFxkezEsM30pezJ9KSg/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16MC05XFx1MDBhMS1cXHVmZmZmXVthLXowLTlcXHUwMGExLVxcdWZmZmZfLV17MCw2Mn0pP1thLXowLTlcXHUwMGExLVxcdWZmZmZdXFwuKSsoPzpbYS16XFx1MDBhMS1cXHVmZmZmXXsyLH1cXC4/KSkoPzo6XFxkezIsNX0pPyg/OlsvPyNdXFxTKik/JC9pO1xuICAgIHJldHVybiBVUkxWYWxpZGF0b3I7XG59KFBhdHRlcm5WYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBVUkxWYWxpZGF0b3I7IiwiaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IFBhdHRlcm5WYWxpZGF0b3IgZnJvbSBcIi4vUGF0dGVyblZhbGlkYXRvclwiO1xuXG5cbi8qKlxuICogVVJMIFZhbGlkYXRvclxuICpcbiAqIFBhdHRlcm4gZnJvbSB7QGxpbmsgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZHBlcmluaS83MjkyOTR9XG4gKlxuICogQGNsYXNzIFVSTFZhbGlkYXRvclxuICogQGV4dGVuZHMgUGF0dGVyblZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVVJMVmFsaWRhdG9yIGV4dGVuZHMgUGF0dGVyblZhbGlkYXRvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdXJsUGF0dGVybjogUmVnRXhwID0gL14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtejAtOVxcdTAwYTEtXFx1ZmZmZl1bYS16MC05XFx1MDBhMS1cXHVmZmZmXy1dezAsNjJ9KT9bYS16MC05XFx1MDBhMS1cXHVmZmZmXVxcLikrKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9XFwuPykpKD86OlxcZHsyLDV9KT8oPzpbLz8jXVxcUyopPyQvaTtcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuVVJMKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuVVJMLCBtZXNzYWdlKVxuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBoYXNFcnJvcnModmFsdWU6IHN0cmluZywgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIHJldHVybiBzdXBlci5oYXNFcnJvcnModmFsdWUsIFVSTFZhbGlkYXRvci51cmxQYXR0ZXJuLCBtZXNzYWdlKTtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcbiAgICByZXR1cm4gdG87XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHNcIik7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFZhbGlkYXRvciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmFsaWRhdG9yKHZhbGlkYXRpb25LZXksIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5ERUZBVUxUOyB9XG4gICAgICAgIHRoaXMudmFsaWRhdGlvbktleSA9IHZhbGlkYXRpb25LZXk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIFZhbGlkYXRvci5wcm90b3R5cGUuZ2V0TWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsc18xLnN0cmluZ0Zvcm1hdC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW21lc3NhZ2VdLCBhcmdzKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVmFsaWRhdG9yO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFZhbGlkYXRvcjsiLCJpbXBvcnQge3N0cmluZ0Zvcm1hdH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgVmFsaWRhdGFibGUsIHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHtERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbi8qKlxuICogQmFzZSBJbXBsZW1lbnRhdGlvbiBmb3IgVmFsaWRhdG9yc1xuICpcbiAqIEBjbGFzcyBWYWxpZGF0b3JcbiAqIEBhYnN0cmFjdFxuICogQGltcGxlbWVudHMgVmFsaWRhdGFibGVcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFZhbGlkYXRvciBpbXBsZW1lbnRzIFZhbGlkYXRhYmxle1xuICAgIHJlYWRvbmx5IHZhbGlkYXRpb25LZXk6IHN0cmluZztcbiAgICBwcm90ZWN0ZWQgbWVzc2FnZTogc3RyaW5nO1xuXG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IodmFsaWRhdGlvbktleTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkRFRkFVTFQpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0aW9uS2V5ID0gdmFsaWRhdGlvbktleTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKXtcbiAgICAgICAgcmV0dXJuIHN0cmluZ0Zvcm1hdChtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICB9XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgYWJzdHJhY3QgaGFzRXJyb3JzKHZhbHVlOiBhbnksIC4uLmFyZ3M6IGFueVtdKTogRXJyb3JzO1xufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlVSTFZhbGlkYXRvciA9IGV4cG9ydHMuUGF0dGVyblZhbGlkYXRvciA9IGV4cG9ydHMuTWluVmFsaWRhdG9yID0gZXhwb3J0cy5NaW5MZW5ndGhWYWxpZGF0b3IgPSBleHBvcnRzLk1heFZhbGlkYXRvciA9IGV4cG9ydHMuTWF4TGVuZ3RoVmFsaWRhdG9yID0gZXhwb3J0cy5SZXF1aXJlZFZhbGlkYXRvciA9IGV4cG9ydHMuRW1haWxWYWxpZGF0b3IgPSB2b2lkIDA7XG5leHBvcnRzLkVtYWlsVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL0VtYWlsVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuUmVxdWlyZWRWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vUmVxdWlyZWRWYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5NYXhMZW5ndGhWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTWF4TGVuZ3RoVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuTWF4VmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01heFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLk1pbkxlbmd0aFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9NaW5MZW5ndGhWYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5NaW5WYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTWluVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuUGF0dGVyblZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuVVJMVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL1VSTFZhbGlkYXRvclwiKSk7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIFZhbGlkYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cblxuXG5leHBvcnQgKiBhcyBFbWFpbFZhbGlkYXRvciBmcm9tICcuL0VtYWlsVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIFJlcXVpcmVkVmFsaWRhdG9yIGZyb20gJy4vUmVxdWlyZWRWYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgTWF4TGVuZ3RoVmFsaWRhdG9yIGZyb20gJy4vTWF4TGVuZ3RoVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIE1heFZhbGlkYXRvciBmcm9tICcuL01heFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBNaW5MZW5ndGhWYWxpZGF0b3IgZnJvbSAnLi9NaW5MZW5ndGhWYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgTWluVmFsaWRhdG9yIGZyb20gJy4vTWluVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIFBhdHRlcm5WYWxpZGF0b3IgZnJvbSAnLi9QYXR0ZXJuVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIFVSTFZhbGlkYXRvciBmcm9tICcuL1VSTFZhbGlkYXRvcic7Il19
