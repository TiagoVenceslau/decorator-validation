"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=exports.Model=exports.Validation=void 0,exports.Validation=__importStar(require("./validation")),exports.Model=__importStar(require("./Model")),exports.Utils=__importStar(require("./utils"));var __spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};function getPropertyDecorators(r,o,n){var t=Reflect.getMetadataKeys(o,n).filter(function(t){return t.toString().startsWith(r)}).reduce(function(t,e){e={key:e.substring(r.length),props:Reflect.getMetadata(e,o,n)};return t.concat(e)},[]);return{prop:n,decorators:t}}function stringFormat(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:t})}function isEqual(e,r){for(var o=[],t=2;t<arguments.length;t++)o[t-2]=arguments[t];if(e===r)return!0;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(!e||!r||"object"!=typeof e&&"object"!=typeof r)return e===r;if(null==e||null==r)return!1;if(e.prototype!==r.prototype)return!1;var n=Object.keys(e);return n.length===Object.keys(r).length&&n.every(function(t){return-1!==o.indexOf(t)||isEqual.apply(void 0,__spreadArray([e[t],r[t]],o))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEqual=exports.stringFormat=exports.getPropertyDecorators=void 0,exports.getPropertyDecorators=getPropertyDecorators,exports.stringFormat=stringFormat,exports.isEqual=isEqual;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var validation_1=require("../validation"),utils_1=require("../utils"),Model=function(){function e(t){e.constructFromObject(this,t)}return e.prototype.hasErrors=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return validation_1.validate(this)},e.prototype.equals=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.isEqual.apply(void 0,__spreadArray([this,t],e))},e.constructFromObject=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r]);return t},e}();exports.default=Model;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Model=void 0,exports.Model=__importStar(require("./Model")),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ERROR_MESSAGES=exports.ValidationKeys=void 0,exports.ValidationKeys={REFLECT:"model.validation.",REQUIRED:"required",MIN:"min",MAX:"max",MIN_LENGTH:"minlength",MAX_LENGTH:"maxlength",PATTERN:"pattern",EMAIL:"email",URL:"url"},exports.DEFAULT_ERROR_MESSAGES={REQUIRED:"This field is required",MIN:"The minimum value is {0}",MAX:"The maximum value is {0}",MIN_LENGTH:"The minimum length is {0}",MAX_LENGTH:"The maximum length is {0}",PATTERN:"The value does not match the pattern",EMAIL:"The value is not a valid email",URL:"The value is not a valid URL",DEFAULT:"There is an Error"},Object.defineProperty(exports,"__esModule",{value:!0}),exports.url=exports.email=exports.pattern=exports.maxlength=exports.minlength=exports.max=exports.min=exports.required=exports.getValidationKey=void 0,require("reflect-metadata");var constants_1=require("./constants"),getValidationKey=function(t){return constants_1.ValidationKeys.REFLECT+t};exports.getValidationKey=getValidationKey;var required=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.REQUIRED),{message:r},t,e)}};exports.required=required;var min=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN),{value:r,message:o},t,e)}};exports.min=min;var max=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX),{value:r,message:o},t,e)}};exports.max=max;var minlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN_LENGTH),{value:r,message:o},t,e)}};exports.minlength=minlength;var maxlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX_LENGTH),{value:r,message:o},t,e)}};exports.maxlength=maxlength;var pattern=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.PATTERN),{value:"string"==typeof r?r:r.toString(),message:o},t,e)}};exports.pattern=pattern;var email=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.EMAIL),{message:r},t,e)}};exports.email=email;var url=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.URL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.URL),{message:r},t,e)}};exports.url=url;var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__exportStar=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||__createBinding(e,t,r)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Validators=exports.Decorators=void 0,exports.Decorators=__importStar(require("./decorators")),__exportStar(require("./types"),exports),__exportStar(require("./validation"),exports),__exportStar(require("./constants"),exports),exports.Validators=__importStar(require("./Validators")),Object.defineProperty(exports,"__esModule",{value:!0});var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.validate=exports.ValidatorRegistry=void 0;var utils_1=require("../utils"),Validators=__importStar(require("./Validators")),constants_1=require("./constants"),Validator_1=__importDefault(require("./Validators/Validator"));function ValRegistry(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new function(){var r={};this.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){t instanceof Validator_1.default?r[t.validationKey]=t:(t=new(t.default||t),r[t.validationKey]=t)})},this.getValidator=function(t){if(t in r)return r[t]}};return r.register.apply(r,t),r}function validate(a){var t,e=[];for(t in a)a.hasOwnProperty(t)&&e.push(utils_1.getPropertyDecorators(constants_1.ValidationKeys.REFLECT,a,t));return e.reduce(function(t,o){var n=o.prop,e=o.decorators;if(!e||!e.length)return t;e=e.reduce(function(t,e){var r=exports.ValidatorRegistry.getValidator(e.key);if(!r)throw new Error("Could not find Matching validator for "+e.key+" for property "+o.prop);r=r.hasErrors.apply(r,__spreadArray([a[n]],Object.values(e.props)));return r&&((t=t||{})[e.key]=r),t},void 0);return e&&(e={property:o.prop,errors:e},(t=t||[]).push(e)),t},void 0)}exports.ValidatorRegistry=ValRegistry.apply(void 0,Object.values(Validators)),exports.validate=validate;var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),PatternValidator_1=__importDefault(require("./PatternValidator")),EmailValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),r.call(this,constants_1.ValidationKeys.EMAIL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.emailPat,e)},o.emailPat=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,o}(PatternValidator_1.default);exports.default=EmailValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),e.call(this,constants_1.ValidationKeys.MAX_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length>e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX),e.call(this,constants_1.ValidationKeys.MAX,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return e<t?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),e.call(this,constants_1.ValidationKeys.MIN_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN),e.call(this,constants_1.ValidationKeys.MIN,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),PatternValidator=function(r){function e(t,e){return void 0===t&&(t=constants_1.ValidationKeys.PATTERN),void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),r.call(this,t,e)||this}return __extends(e,r),e.prototype.getPattern=function(t){if(!e.regexpParser.test(t))return new RegExp(t);t=t.match(e.regexpParser);return new RegExp(t[1],t[2])},e.prototype.hasErrors=function(t,e,r){if(t)return(e="string"==typeof e?this.getPattern(e):e).test(t)?void 0:this.getMessage(r||this.message)},e.regexpParser=new RegExp("^/(.+)/([gimus]*)$"),e}(Validator_1.default);exports.default=PatternValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),RequiredValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),e.call(this,constants_1.ValidationKeys.REQUIRED,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e){return t?void 0:this.getMessage(e||this.message)},t}(Validator_1.default);exports.default=RequiredValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),URLValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.URL),r.call(this,constants_1.ValidationKeys.URL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.urlPattern,e)},o.urlPattern=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i,o}((PatternValidator_1=__importDefault(require("./PatternValidator"))).default);exports.default=URLValidator;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("../../utils"),constants_1=require("../constants"),Validator=function(){function t(t,e){void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.DEFAULT),this.validationKey=t,this.message=e}return t.prototype.getMessage=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.stringFormat.apply(void 0,__spreadArray([t],e))},t}();exports.default=Validator;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLValidator=exports.PatternValidator=exports.MinValidator=exports.MinLengthValidator=exports.MaxValidator=exports.MaxLengthValidator=exports.RequiredValidator=exports.EmailValidator=void 0,exports.EmailValidator=__importStar(require("./EmailValidator")),exports.RequiredValidator=__importStar(require("./RequiredValidator")),exports.MaxLengthValidator=__importStar(require("./MaxLengthValidator")),exports.MaxValidator=__importStar(require("./MaxValidator")),exports.MinLengthValidator=__importStar(require("./MinLengthValidator")),exports.MinValidator=__importStar(require("./MinValidator")),exports.PatternValidator=__importStar(require("./PatternValidator")),exports.URLValidator=__importStar(require("./URLValidator"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiaW5kZXgudHMiLCJ1dGlscy5qcyIsInV0aWxzLnRzIiwiTW9kZWwvTW9kZWwuanMiLCJNb2RlbC9Nb2RlbC50cyIsIk1vZGVsL2luZGV4LmpzIiwiTW9kZWwvaW5kZXgudHMiLCJ2YWxpZGF0aW9uL2NvbnN0YW50cy5qcyIsInZhbGlkYXRpb24vY29uc3RhbnRzLnRzIiwidmFsaWRhdGlvbi9kZWNvcmF0b3JzLmpzIiwidmFsaWRhdGlvbi9kZWNvcmF0b3JzLnRzIiwidmFsaWRhdGlvbi9pbmRleC5qcyIsInZhbGlkYXRpb24vaW5kZXgudHMiLCJ2YWxpZGF0aW9uL3R5cGVzLmpzIiwidmFsaWRhdGlvbi92YWxpZGF0aW9uLmpzIiwidmFsaWRhdGlvbi92YWxpZGF0aW9uLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heExlbmd0aFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NYXhMZW5ndGhWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWF4VmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heFZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5MZW5ndGhWYWxpZGF0b3IuanMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWluTGVuZ3RoVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01pblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5WYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvUGF0dGVyblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9QYXR0ZXJuVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1VSTFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9VUkxWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1ZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC50cyJdLCJuYW1lcyI6WyJfX2NyZWF0ZUJpbmRpbmciLCJ0aGlzIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJ1bmRlZmluZWQiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJfX3NldE1vZHVsZURlZmF1bHQiLCJ2IiwidmFsdWUiLCJfX2ltcG9ydFN0YXIiLCJtb2QiLCJfX2VzTW9kdWxlIiwicmVzdWx0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZXhwb3J0cyIsIlV0aWxzIiwiTW9kZWwiLCJWYWxpZGF0aW9uIiwicmVxdWlyZSIsIl9fc3ByZWFkQXJyYXkiLCJ0byIsImZyb20iLCJpIiwiaWwiLCJsZW5ndGgiLCJqIiwiZ2V0UHJvcGVydHlEZWNvcmF0b3JzIiwiYW5ub3RhdGlvblByZWZpeCIsInRhcmdldCIsInByb3BlcnR5TmFtZSIsImRlY29yYXRvcnMiLCJSZWZsZWN0IiwiZ2V0TWV0YWRhdGFLZXlzIiwiZmlsdGVyIiwia2V5IiwidG9TdHJpbmciLCJzdGFydHNXaXRoIiwicmVkdWNlIiwidmFsdWVzIiwiY3VyclZhbHVlcyIsInN1YnN0cmluZyIsInByb3BzIiwiZ2V0TWV0YWRhdGEiLCJjb25jYXQiLCJwcm9wIiwic3RyaW5nRm9ybWF0Iiwic3RyaW5nIiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwicmVwbGFjZSIsIm1hdGNoIiwibnVtYmVyIiwiaXNFcXVhbCIsImEiLCJiIiwicHJvcHNUb0lnbm9yZSIsIkRhdGUiLCJnZXRUaW1lIiwia2V5cyIsImV2ZXJ5IiwiaW5kZXhPZiIsImFwcGx5IiwidmFsaWRhdGlvbl8xIiwidXRpbHNfMSIsIm1vZGVsIiwiY29uc3RydWN0RnJvbU9iamVjdCIsImhhc0Vycm9ycyIsInZhbGlkYXRlIiwiZXF1YWxzIiwib2JqIiwiZXhjZXB0aW9ucyIsInNlbGYiLCJkZWZhdWx0IiwiREVGQVVMVF9FUlJPUl9NRVNTQUdFUyIsIlZhbGlkYXRpb25LZXlzIiwiUkVGTEVDVCIsIlJFUVVJUkVEIiwiTUlOIiwiTUFYIiwiTUlOX0xFTkdUSCIsIk1BWF9MRU5HVEgiLCJQQVRURVJOIiwiRU1BSUwiLCJVUkwiLCJERUZBVUxUIiwidXJsIiwiZW1haWwiLCJwYXR0ZXJuIiwibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwibWF4IiwibWluIiwicmVxdWlyZWQiLCJnZXRWYWxpZGF0aW9uS2V5IiwiY29uc3RhbnRzXzEiLCJtZXNzYWdlIiwicHJvcGVydHlLZXkiLCJkZWZpbmVNZXRhZGF0YSIsIl9fZXhwb3J0U3RhciIsInAiLCJWYWxpZGF0b3JzIiwiRGVjb3JhdG9ycyIsIl9faW1wb3J0RGVmYXVsdCIsIlZhbGlkYXRvclJlZ2lzdHJ5IiwiVmFsaWRhdG9yXzEiLCJWYWxSZWdpc3RyeSIsImluaXRpYWwiLCJyZWdpc3RyeSIsImNhY2hlIiwicmVnaXN0ZXIiLCJ2YWxpZGF0b3IiLCJmb3JFYWNoIiwidmFsaWRhdGlvbktleSIsImluc3RhbmNlIiwiZ2V0VmFsaWRhdG9yIiwidmFsaWRhdG9yS2V5IiwiZGVjb3JhdGVkUHJvcGVydGllcyIsInB1c2giLCJhY2N1bSIsImRlY29yYXRlZFByb3BlcnR5IiwiZXJycyIsImFjYyIsImRlY29yYXRvciIsIkVycm9yIiwiZXJyIiwicHJvcEVycm9ycyIsInByb3BlcnR5IiwiZXJyb3JzIiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiVHlwZUVycm9yIiwiU3RyaW5nIiwiX18iLCJjb25zdHJ1Y3RvciIsIlBhdHRlcm5WYWxpZGF0b3JfMSIsIkVtYWlsVmFsaWRhdG9yIiwiX3N1cGVyIiwiZW1haWxQYXQiLCJNYXhMZW5ndGhWYWxpZGF0b3IiLCJnZXRNZXNzYWdlIiwiTWF4VmFsaWRhdG9yIiwiTWluTGVuZ3RoVmFsaWRhdG9yIiwiTWluVmFsaWRhdG9yIiwiUGF0dGVyblZhbGlkYXRvciIsImdldFBhdHRlcm4iLCJyZWdleHBQYXJzZXIiLCJ0ZXN0IiwiUmVnRXhwIiwiUmVxdWlyZWRWYWxpZGF0b3IiLCJVUkxWYWxpZGF0b3IiLCJ1cmxQYXR0ZXJuIiwiVmFsaWRhdG9yIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFJQSxnQkFBbUJDLE1BQVFBLEtBQUtELGtCQUFxQkUsT0FBT0MsT0FBVSxTQUFTQyxFQUFHQyxFQUFHQyxFQUFHQyxRQUM3RUMsSUFBUEQsSUFBa0JBLEVBQUtELEdBQzNCSixPQUFPTyxlQUFlTCxFQUFHRyxFQUFJLENBQUVHLFlBQVksRUFBTUMsSUFBSyxXQUFhLE9BQU9OLEVBQUVDLE9BQzFFLFNBQVNGLEVBQUdDLEVBQUdDLEVBQUdDLEdBRXBCSCxFQURzQkcsT0FBWEMsSUFBUEQsRUFBdUJELEVBQ3pCQyxHQUFNRixFQUFFQyxLQUVWTSxtQkFBc0JYLE1BQVFBLEtBQUtXLHFCQUF3QlYsT0FBT0MsT0FBVSxTQUFTQyxFQUFHUyxHQUN4RlgsT0FBT08sZUFBZUwsRUFBRyxVQUFXLENBQUVNLFlBQVksRUFBTUksTUFBT0QsS0FDOUQsU0FBU1QsRUFBR1MsR0FDYlQsRUFBQyxRQUFjUyxJQUVmRSxhQUFnQmQsTUFBUUEsS0FBS2MsY0FBaUIsU0FBVUMsR0FDeEQsR0FBSUEsR0FBT0EsRUFBSUMsV0FBWSxPQUFPRCxFQUNsQyxJQUFJRSxFQUFTLEdBQ2IsR0FBVyxNQUFQRixFQUFhLElBQUssSUFBSVYsS0FBS1UsRUFBZSxZQUFOVixHQUFtQkosT0FBT2lC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QVEySSxrQkFBb0IzSSxRQUFROEgsb0JBQWlCLEVDZi9NOUgsUUFBQThILGVBQUFySSxhQUFBVyxRQUFBLHFCQUNBSixRQUFBMkksa0JBQUFsSixhQUFBVyxRQUFBLHdCQUNBSixRQUFBaUksbUJBQUF4SSxhQUFBVyxRQUFBLHlCQUNBSixRQUFBbUksYUFBQTFJLGFBQUFXLFFBQUEsbUJBQ0FKLFFBQUFvSSxtQkFBQTNJLGFBQUFXLFFBQUEseUJBQ0FKLFFBQUFxSSxhQUFBNUksYUFBQVcsUUFBQSxtQkFDQUosUUFBQXNJLGlCQUFBN0ksYUFBQVcsUUFBQSx1QkFDQUosUUFBQTRJLGFBQUFuSixhQUFBVyxRQUFBIiwiZmlsZSI6ImRlY29yYXRvci12YWxpZGF0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlV0aWxzID0gZXhwb3J0cy5Nb2RlbCA9IGV4cG9ydHMuVmFsaWRhdGlvbiA9IHZvaWQgMDtcbmV4cG9ydHMuVmFsaWRhdGlvbiA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi92YWxpZGF0aW9uXCIpKTtcbmV4cG9ydHMuTW9kZWwgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTW9kZWxcIikpO1xuZXhwb3J0cy5VdGlscyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi91dGlsc1wiKSk7IiwiLyoqXG4gKiBAbW9kdWxlIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuZXhwb3J0ICogYXMgVmFsaWRhdGlvbiBmcm9tICcuL3ZhbGlkYXRpb24nO1xuZXhwb3J0ICogYXMgTW9kZWwgZnJvbSAnLi9Nb2RlbCc7XG5leHBvcnQgKiBhcyBVdGlscyBmcm9tICAnLi91dGlscyc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmlzRXF1YWwgPSBleHBvcnRzLnN0cmluZ0Zvcm1hdCA9IGV4cG9ydHMuZ2V0UHJvcGVydHlEZWNvcmF0b3JzID0gdm9pZCAwO1xuZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzKGFubm90YXRpb25QcmVmaXgsIHRhcmdldCwgcHJvcGVydHlOYW1lKSB7XG4gICAgdmFyIGtleXMgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyh0YXJnZXQsIHByb3BlcnR5TmFtZSk7XG4gICAgdmFyIGRlY29yYXRvcnMgPSBrZXlzXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnRvU3RyaW5nKCkuc3RhcnRzV2l0aChhbm5vdGF0aW9uUHJlZml4KTsgfSlcbiAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAodmFsdWVzLCBrZXkpIHtcbiAgICAgICAgdmFyIGN1cnJWYWx1ZXMgPSB7XG4gICAgICAgICAgICBrZXk6IGtleS5zdWJzdHJpbmcoYW5ub3RhdGlvblByZWZpeC5sZW5ndGgpLFxuICAgICAgICAgICAgcHJvcHM6IFJlZmxlY3QuZ2V0TWV0YWRhdGEoa2V5LCB0YXJnZXQsIHByb3BlcnR5TmFtZSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5jb25jYXQoY3VyclZhbHVlcyk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3A6IHByb3BlcnR5TmFtZSxcbiAgICAgICAgZGVjb3JhdG9yczogZGVjb3JhdG9yc1xuICAgIH07XG59XG5leHBvcnRzLmdldFByb3BlcnR5RGVjb3JhdG9ycyA9IGdldFByb3BlcnR5RGVjb3JhdG9ycztcbmZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmcpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24gKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cbmV4cG9ydHMuc3RyaW5nRm9ybWF0ID0gc3RyaW5nRm9ybWF0O1xuZnVuY3Rpb24gaXNFcXVhbChhLCBiKSB7XG4gICAgdmFyIHByb3BzVG9JZ25vcmUgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBwcm9wc1RvSWdub3JlW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBEYXRlICYmIGIgaW5zdGFuY2VvZiBEYXRlKVxuICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICAgIGlmICghYSB8fCAhYiB8fCAodHlwZW9mIGEgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9PSAnb2JqZWN0JykpXG4gICAgICAgIHJldHVybiBhID09PSBiO1xuICAgIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGlmIChrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGtleXMuZXZlcnkoZnVuY3Rpb24gKGspIHsgcmV0dXJuIHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSAhPT0gLTEgfHwgaXNFcXVhbC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW2Fba10sIGJba11dLCBwcm9wc1RvSWdub3JlKSk7IH0pO1xufVxuZXhwb3J0cy5pc0VxdWFsID0gaXNFcXVhbDsiLCIvKipcbiAqIEBuYW1lc3BhY2UgdXRpbHNcbiAqIEBtZW1iZXJPZiBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgRXJyXG4gKi9cbmV4cG9ydCB0eXBlIEVyciA9IEVycm9yIHwgc3RyaW5nIHwgdW5kZWZpbmVkXG5cbi8qKlxuICogVXRpbCBmdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgZGVjb3JhdG9ycyBmb3IgdGhlIHByb3ZpZGVkIFByb3BlcnR5XG4gKlxuICogQGZ1bmN0aW9uIGdldFByb3BlcnR5RGVjb3JhdG9yc1xuICogQG1lbWJlck9mIHV0aWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wZXJ0eURlY29yYXRvcnMoYW5ub3RhdGlvblByZWZpeDogc3RyaW5nLCB0YXJnZXQ6IGFueSwgcHJvcGVydHlOYW1lOiBzdHJpbmcgfCBzeW1ib2wpOiB7cHJvcDogc3RyaW5nIHwgc3ltYm9sLCBkZWNvcmF0b3JzOiBbXX0ge1xuICAgIC8vIGdldCBpbmZvIGFib3V0IGtleXMgdGhhdCB1c2VkIGluIGN1cnJlbnQgcHJvcGVydHlcbiAgICBjb25zdCBrZXlzOiBhbnlbXSA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKHRhcmdldCwgcHJvcGVydHlOYW1lKTtcbiAgICBjb25zdCBkZWNvcmF0b3JzID0ga2V5c1xuICAgICAgICAvLyBmaWx0ZXIgeW91ciBjdXN0b20gZGVjb3JhdG9yc1xuICAgICAgICAuZmlsdGVyKGtleSA9PiBrZXkudG9TdHJpbmcoKS5zdGFydHNXaXRoKGFubm90YXRpb25QcmVmaXgpKVxuICAgICAgICAucmVkdWNlKCh2YWx1ZXMsIGtleSkgPT4ge1xuICAgICAgICAgICAgLy8gZ2V0IG1ldGFkYXRhIHZhbHVlLlxuICAgICAgICAgICAgY29uc3QgY3VyclZhbHVlcyA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleS5zdWJzdHJpbmcoYW5ub3RhdGlvblByZWZpeC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgIHByb3BzOiBSZWZsZWN0LmdldE1ldGFkYXRhKGtleSwgdGFyZ2V0LCBwcm9wZXJ0eU5hbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcy5jb25jYXQoY3VyclZhbHVlcyk7XG4gICAgICAgIH0sIFtdKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHByb3A6IHByb3BlcnR5TmFtZSxcbiAgICAgICAgZGVjb3JhdG9yczogZGVjb3JhdG9yc1xuICAgIH07XG59XG5cblxuXG4vKipcbiAqIFV0aWwgZnVuY3Rpb24gdG8gcHJvdmlkZSBzdHJpbmcgZm9ybWF0IGZ1bmN0aW9uYWxpdHkgc2ltaWxhciB0byBDIydzIHN0cmluZy5mb3JtYXRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gYXJncyByZXBsYWNlbWVudHMgbWFkZSBieSBvcmRlciBvZiBhcHBlYXJhbmNlIChyZXBsYWNlbWVudDAgd2lsIHJlcGxhY2UgezB9IGFuZCBzbyBvbilcbiAqIEByZXR1cm4ge3N0cmluZ30gZm9ybWF0dGVkIHN0cmluZ1xuICogQGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdFxuICogQG1lbWJlck9mIHV0aWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdGb3JtYXQoc3RyaW5nOiBzdHJpbmcsIC4uLmFyZ3M6IHN0cmluZ1tdKXtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGFyZ3NbbnVtYmVyXVxuICAgICAgICAgICAgOiBtYXRjaDtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBEZWVwIE9iamVjdCBDb21wYXJpc29uXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDQ3NjE1MC9qYXZhc2NyaXB0LWRlZXAtY29tcGFyaXNvbi1yZWN1cnNpdmVseS1vYmplY3RzLWFuZC1wcm9wZXJ0aWVzXG4gKlxuICogd2l0aCBvcHRpb25hbCBpZ25vcmVkIHByb3BlcnRpZXNcbiAqXG4gKiBAcGFyYW0ge3t9fSBhXG4gKiBAcGFyYW0ge3t9fSBiXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BzVG9JZ25vcmVdXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQGZ1bmN0aW9uIGlzRXF1YWxcbiAqIEBtZW1iZXJPZiB1dGlsc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFcXVhbChhOiBhbnksIGI6IGFueSwuLi5wcm9wc1RvSWdub3JlOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYSBpbnN0YW5jZW9mIERhdGUgJiYgYiBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBhLmdldFRpbWUoKSA9PT0gYi5nZXRUaW1lKCk7XG4gICAgaWYgKCFhIHx8ICFiIHx8ICh0eXBlb2YgYSAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgIT09ICdvYmplY3QnKSkgcmV0dXJuIGEgPT09IGI7XG4gICAgaWYgKGEgPT09IG51bGwgfHwgYSA9PT0gdW5kZWZpbmVkIHx8IGIgPT09IG51bGwgfHwgYiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4ga2V5cy5ldmVyeShrID0+IHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSAhPT0gLTEgfHwgaXNFcXVhbChhW2tdLCBiW2tdLCAuLi5wcm9wc1RvSWdub3JlKSk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcbiAgICByZXR1cm4gdG87XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHZhbGlkYXRpb25fMSA9IHJlcXVpcmUoXCIuLi92YWxpZGF0aW9uXCIpO1xudmFyIHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG52YXIgTW9kZWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1vZGVsKG1vZGVsKSB7XG4gICAgICAgIE1vZGVsLmNvbnN0cnVjdEZyb21PYmplY3QodGhpcywgbW9kZWwpO1xuICAgIH1cbiAgICBNb2RlbC5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWxpZGF0aW9uXzEudmFsaWRhdGUodGhpcyk7XG4gICAgfTtcbiAgICBNb2RlbC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgZXhjZXB0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgZXhjZXB0aW9uc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbHNfMS5pc0VxdWFsLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbdGhpcywgb2JqXSwgZXhjZXB0aW9ucykpO1xuICAgIH07XG4gICAgTW9kZWwuY29uc3RydWN0RnJvbU9iamVjdCA9IGZ1bmN0aW9uIChzZWxmLCBvYmopIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIHNlbGYuaGFzT3duUHJvcGVydHkocHJvcCkpXG4gICAgICAgICAgICAgICAgc2VsZltwcm9wXSA9IG9ialtwcm9wXTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcbiAgICByZXR1cm4gTW9kZWw7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTW9kZWw7IiwiaW1wb3J0IHt2YWxpZGF0ZX0gZnJvbSBcIi4uL3ZhbGlkYXRpb25cIjtcbmltcG9ydCBWYWxpZGF0YWJsZSwge0Vycm9yc30gZnJvbSBcIi4uL3ZhbGlkYXRpb24vdHlwZXNcIjtcbmltcG9ydCB7aXNFcXVhbH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgcmVwcmVzZW50aW5nIGEgVmFsaWRhdGFibGUgTW9kZWwgb2JqZWN0XG4gKlxuICogTW9kZWwgb2JqZWN0cyBtdXN0OlxuICogIC0gSGF2ZSBhbGwgdGhlaXIgcHJvcGVydGllcyBkZWZpbmVkIGFzIG9wdGlvbmFsO1xuICogIC0gSGF2ZSBhbGwgdGhlaXIgcHJvcGVydGllcyBpbml0aWFsaXplZCAob25seSB0aGUgJ0ByZXF1aXJlZCgpJyBkZWNvcmF0ZWQgcHJvcGVydGllc1xuICogIDxzdHJvbmc+bmVlZDwvc3Ryb25nPiB0byBiZSBpbml0aWFsaXplZCwgYnV0IGFsbCBvZiB0aGVtIHNob3VsZCBiZSBhcyBnb29kIHByYWN0aWNlKTtcbiAqXG4gKiBAY2xhc3MgTW9kZWxcbiAqIEBhYnN0cmFjdFxuICogQGltcGxlbWVudHMgVmFsaWRhdGFibGVcbiAqIEBuYW1lc3BhY2UgTW9kZWxcbiAqIEBtZW1iZXJPZiBNb2RlbFxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBNb2RlbCBpbXBsZW1lbnRzIFZhbGlkYXRhYmxlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vZGVsIHwge319IG1vZGVsIGJhc2Ugb2JqZWN0IGZyb20gd2hpY2ggdG8gcG9wdWxhdGUgcHJvcGVydGllcyBmcm9tXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzZWUgTW9kZWwjY29uc3RydWN0RnJvbU9iamVjdFxuICAgICAqL1xuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3Rvcihtb2RlbD86IE1vZGVsIHwge30pe1xuICAgICAgICBNb2RlbC5jb25zdHJ1Y3RGcm9tT2JqZWN0KHRoaXMsIG1vZGVsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgdGhlIG9iamVjdCBhY2NvcmRpbmcgdG8gaXRzIGRlY29yYXRlZCBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2FueX0gW2FyZ3NdXG4gICAgICogQG1lbWJlck9mIE1vZGVsXG4gICAgICogQHNlZSB2YWxpZGF0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBoYXNFcnJvcnMoLi4uYXJnczogYW55W10pOiBFcnJvcnN7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZSh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlIG9iamVjdCBlcXVhbGl0eSByZWN1cnNpdmVseVxuICAgICAqIEBwYXJhbSB7YW55fSBvYmogb2JqZWN0IHRvIGNvbXBhcmUgdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4Y2VwdGlvbnNdIHByb3BlcnR5IG5hbWVzIHRvIGJlIGV4Y2x1ZGVkIGZyb20gdGhlIGNvbXBhcmlzb25cbiAgICAgKiBAbWVtYmVyT2YgTW9kZWxcbiAgICAgKi9cbiAgICBwdWJsaWMgZXF1YWxzKG9iajogYW55LCAuLi5leGNlcHRpb25zOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaXNFcXVhbCh0aGlzLCBvYmosIC4uLmV4Y2VwdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlcG9wdWxhdGVzIHRoZSBPYmplY3QgcHJvcGVydGllcyB3aXRoIHRoZSBvbmVzIGZyb20gdGhlIG5ldyBvYmplY3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VH0gc2VsZlxuICAgICAqIEBwYXJhbSB7VHwge319IG9ialxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAZnVuY3Rpb24gY29uc3RydWN0RnJvbU9iamVjdFxuICAgICAqIEBtZW1iZXJPZiBNb2RlbFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgY29uc3RydWN0RnJvbU9iamVjdDxUIGV4dGVuZHMgTW9kZWw+KHNlbGY6IFQsIG9iaj86IFQgfCB7fSl7XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gb2JqKVxuICAgICAgICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KHByb3ApICYmIHNlbGYuaGFzT3duUHJvcGVydHkocHJvcCkpLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHNlbGZbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb2RlbCA9IHZvaWQgMDtcbmV4cG9ydHMuTW9kZWwgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTW9kZWxcIikpOyIsIi8qKlxuICogQG5hbWVzcGFjZSBNb2RlbFxuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuZXhwb3J0ICogYXMgTW9kZWwgZnJvbSBcIi4vTW9kZWxcIjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5ERUZBVUxUX0VSUk9SX01FU1NBR0VTID0gZXhwb3J0cy5WYWxpZGF0aW9uS2V5cyA9IHZvaWQgMDtcbmV4cG9ydHMuVmFsaWRhdGlvbktleXMgPSB7XG4gICAgUkVGTEVDVDogJ21vZGVsLnZhbGlkYXRpb24uJyxcbiAgICBSRVFVSVJFRDogJ3JlcXVpcmVkJyxcbiAgICBNSU46ICdtaW4nLFxuICAgIE1BWDogJ21heCcsXG4gICAgTUlOX0xFTkdUSDogJ21pbmxlbmd0aCcsXG4gICAgTUFYX0xFTkdUSDogJ21heGxlbmd0aCcsXG4gICAgUEFUVEVSTjogJ3BhdHRlcm4nLFxuICAgIEVNQUlMOiBcImVtYWlsXCIsXG4gICAgVVJMOiBcInVybFwiXG59O1xuZXhwb3J0cy5ERUZBVUxUX0VSUk9SX01FU1NBR0VTID0ge1xuICAgIFJFUVVJUkVEOiAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCcsXG4gICAgTUlOOiAnVGhlIG1pbmltdW0gdmFsdWUgaXMgezB9JyxcbiAgICBNQVg6ICdUaGUgbWF4aW11bSB2YWx1ZSBpcyB7MH0nLFxuICAgIE1JTl9MRU5HVEg6ICdUaGUgbWluaW11bSBsZW5ndGggaXMgezB9JyxcbiAgICBNQVhfTEVOR1RIOiAnVGhlIG1heGltdW0gbGVuZ3RoIGlzIHswfScsXG4gICAgUEFUVEVSTjogJ1RoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGUgcGF0dGVybicsXG4gICAgRU1BSUw6IFwiVGhlIHZhbHVlIGlzIG5vdCBhIHZhbGlkIGVtYWlsXCIsXG4gICAgVVJMOiBcIlRoZSB2YWx1ZSBpcyBub3QgYSB2YWxpZCBVUkxcIixcbiAgICBERUZBVUxUOiBcIlRoZXJlIGlzIGFuIEVycm9yXCJcbn07IiwiLyoqXG4gKiBAZW51bVxuICogQG5hbWVzcGFjZSBWYWxpZGF0aW9uXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFZhbGlkYXRpb25LZXlzID0ge1xuICAgIFJFRkxFQ1Q6ICdtb2RlbC52YWxpZGF0aW9uLicsXG4gICAgUkVRVUlSRUQ6ICdyZXF1aXJlZCcsXG4gICAgTUlOOiAnbWluJyxcbiAgICBNQVg6ICdtYXgnLFxuICAgIE1JTl9MRU5HVEg6ICdtaW5sZW5ndGgnLFxuICAgIE1BWF9MRU5HVEg6ICdtYXhsZW5ndGgnLFxuICAgIFBBVFRFUk46ICdwYXR0ZXJuJyxcbiAgICBFTUFJTDogXCJlbWFpbFwiLFxuICAgIFVSTDogXCJ1cmxcIlxufVxuXG4vKipcbiAqIEBlbnVtXG4gKiBAbmFtZXNwYWNlIFZhbGlkYXRpb25cbiAqIEBtZW1iZXJPZiBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9FUlJPUl9NRVNTQUdFUyA9IHtcbiAgICBSRVFVSVJFRDogJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnLFxuICAgIE1JTjogJ1RoZSBtaW5pbXVtIHZhbHVlIGlzIHswfScsXG4gICAgTUFYOiAnVGhlIG1heGltdW0gdmFsdWUgaXMgezB9JyxcbiAgICBNSU5fTEVOR1RIOiAnVGhlIG1pbmltdW0gbGVuZ3RoIGlzIHswfScsXG4gICAgTUFYX0xFTkdUSDogJ1RoZSBtYXhpbXVtIGxlbmd0aCBpcyB7MH0nLFxuICAgIFBBVFRFUk46ICdUaGUgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlIHBhdHRlcm4nLFxuICAgIEVNQUlMOiBcIlRoZSB2YWx1ZSBpcyBub3QgYSB2YWxpZCBlbWFpbFwiLFxuICAgIFVSTDogXCJUaGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgVVJMXCIsXG4gICAgREVGQVVMVDogXCJUaGVyZSBpcyBhbiBFcnJvclwiXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVybCA9IGV4cG9ydHMuZW1haWwgPSBleHBvcnRzLnBhdHRlcm4gPSBleHBvcnRzLm1heGxlbmd0aCA9IGV4cG9ydHMubWlubGVuZ3RoID0gZXhwb3J0cy5tYXggPSBleHBvcnRzLm1pbiA9IGV4cG9ydHMucmVxdWlyZWQgPSBleHBvcnRzLmdldFZhbGlkYXRpb25LZXkgPSB2b2lkIDA7XG5yZXF1aXJlKFwicmVmbGVjdC1tZXRhZGF0YVwiKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbnZhciBnZXRWYWxpZGF0aW9uS2V5ID0gZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUkVGTEVDVCArIGtleTsgfTtcbmV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleSA9IGdldFZhbGlkYXRpb25LZXk7XG52YXIgcmVxdWlyZWQgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUQ7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUkVRVUlSRUQpLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5yZXF1aXJlZCA9IHJlcXVpcmVkO1xudmFyIG1pbiA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1JTiksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1pbiA9IG1pbjtcbnZhciBtYXggPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NQVgpLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tYXggPSBtYXg7XG52YXIgbWlubGVuZ3RoID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEgpLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5taW5sZW5ndGggPSBtaW5sZW5ndGg7XG52YXIgbWF4bGVuZ3RoID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVhfTEVOR1RIOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1BWF9MRU5HVEgpLCB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5tYXhsZW5ndGggPSBtYXhsZW5ndGg7XG52YXIgcGF0dGVybiA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTjsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5QQVRURVJOKSwge1xuICAgICAgICAgICAgdmFsdWU6IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy5wYXR0ZXJuID0gcGF0dGVybjtcbnZhciBlbWFpbCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5FTUFJTCksIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLmVtYWlsID0gZW1haWw7XG52YXIgdXJsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlVSTDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5VUkwpLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sIHRhcmdldCwgcHJvcGVydHlLZXkpO1xuICAgIH07XG59O1xuZXhwb3J0cy51cmwgPSB1cmw7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cblxuXG5pbXBvcnQgXCJyZWZsZWN0LW1ldGFkYXRhXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuXG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFZhbGlkYXRpb25LZXkgPSAoa2V5OiBzdHJpbmcpID0+IFZhbGlkYXRpb25LZXlzLlJFRkxFQ1QgKyBrZXk7XG5cbi8qKlxuICogTWFya3MgdGhlIHByb3BlcnR5IGFzIHJlcXVpcmVkLlxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5SRVFVSVJFRH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5SRVFVSVJFRH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHJlcXVpcmVkID0gKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUQpID0+ICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuUkVRVUlSRUQpLFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBtaW5pbXVtIHZhbHVlIGZvciB0aGUgcHJvcGVydHlcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuTUlOfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyIHwgRGF0ZX0gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTn1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbiA9ICh2YWx1ZTogbnVtYmVyIHwgRGF0ZSB8IHN0cmluZywgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU4pID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuTUlOKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWF4aW11bSB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1BWH1cbiAqXG4gKiBAcGFyYW0ge251bWJlciB8IERhdGV9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVh9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBtYXggPSAodmFsdWU6IG51bWJlciB8IERhdGUgfCBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLk1BWCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIG1pbmltdW0gbGVuZ3RoIGZvciB0aGUgcHJvcGVydHlcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuTUlOX0xFTkdUSH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTl9MRU5HVEh9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBtaW5sZW5ndGggPSAodmFsdWU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU5fTEVOR1RIKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEgpLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBtYXhpbXVtIGxlbmd0aCBmb3IgdGhlIHByb3BlcnR5XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLk1BWF9MRU5HVEh9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVhfTEVOR1RIfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWF4bGVuZ3RoID0gKHZhbHVlOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RIKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgUmVnRXhwIHBhdHRlcm4gdGhlIHByb3BlcnR5IG11c3QgcmVzcGVjdFxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5QQVRURVJOfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTn1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHBhdHRlcm4gPSAodmFsdWU6IFJlZ0V4cCB8IHN0cmluZywgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLlBBVFRFUk4pLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogdmFsdWUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgcHJvcGVydHkgYXMgYW4gZW1haWxcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuRU1BSUx9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUx9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBlbWFpbCA9IChtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLkVNQUlMKSxcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwcm9wZXJ0eSBhcyBhbiBVUkxcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuVVJMfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlVSTH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHVybCA9IChtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlVSTCkgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5VUkwpLFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5WYWxpZGF0b3JzID0gZXhwb3J0cy5EZWNvcmF0b3JzID0gdm9pZCAwO1xuZXhwb3J0cy5EZWNvcmF0b3JzID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL2RlY29yYXRvcnNcIikpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi92YWxpZGF0aW9uXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jb25zdGFudHNcIiksIGV4cG9ydHMpO1xuZXhwb3J0cy5WYWxpZGF0b3JzID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL1ZhbGlkYXRvcnNcIikpOyIsIi8qKlxuICogQG5hbWVzcGFjZSBWYWxpZGF0aW9uXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuXG5leHBvcnQgKiBhcyBEZWNvcmF0b3JzIGZyb20gJy4vZGVjb3JhdG9ycyc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCAqIGZyb20gJy4vdmFsaWRhdGlvbic7XG5leHBvcnQgKiBmcm9tICcuL2NvbnN0YW50cyc7XG5leHBvcnQgKiBhcyBWYWxpZGF0b3JzIGZyb20gJy4vVmFsaWRhdG9ycyc7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTsiLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxuICAgICAgICB0b1tqXSA9IGZyb21baV07XG4gICAgcmV0dXJuIHRvO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudmFsaWRhdGUgPSBleHBvcnRzLlZhbGlkYXRvclJlZ2lzdHJ5ID0gdm9pZCAwO1xudmFyIHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG52YXIgVmFsaWRhdG9ycyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9WYWxpZGF0b3JzXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JzL1ZhbGlkYXRvclwiKSk7XG5mdW5jdGlvbiBWYWxSZWdpc3RyeSgpIHtcbiAgICB2YXIgaW5pdGlhbCA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGluaXRpYWxbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHJlZ2lzdHJ5ID0gbmV3IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhY2hlID0ge307XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZGF0b3IgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdG9yW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWxpZGF0b3IuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgIGlmICh2IGluc3RhbmNlb2YgVmFsaWRhdG9yXzEuZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVt2LnZhbGlkYXRpb25LZXldID0gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJ1Y3Rvck1ldGhvZCA9IHYuZGVmYXVsdCB8fCB2O1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgY29uc3RydWN0b3JNZXRob2QoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVbaW5zdGFuY2UudmFsaWRhdGlvbktleV0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5nZXRWYWxpZGF0b3IgPSBmdW5jdGlvbiAodmFsaWRhdG9yS2V5KSB7XG4gICAgICAgICAgICBpZiAoISh2YWxpZGF0b3JLZXkgaW4gY2FjaGUpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZVt2YWxpZGF0b3JLZXldO1xuICAgICAgICB9O1xuICAgIH0oKTtcbiAgICByZWdpc3RyeS5yZWdpc3Rlci5hcHBseShyZWdpc3RyeSwgaW5pdGlhbCk7XG4gICAgcmV0dXJuIHJlZ2lzdHJ5O1xufVxuZXhwb3J0cy5WYWxpZGF0b3JSZWdpc3RyeSA9IFZhbFJlZ2lzdHJ5LmFwcGx5KHZvaWQgMCwgT2JqZWN0LnZhbHVlcyhWYWxpZGF0b3JzKSk7XG5mdW5jdGlvbiB2YWxpZGF0ZShvYmopIHtcbiAgICB2YXIgZGVjb3JhdGVkUHJvcGVydGllcyA9IFtdO1xuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKVxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgICAgICAgZGVjb3JhdGVkUHJvcGVydGllcy5wdXNoKHV0aWxzXzEuZ2V0UHJvcGVydHlEZWNvcmF0b3JzKGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlJFRkxFQ1QsIG9iaiwgcHJvcCkpO1xuICAgIHJldHVybiBkZWNvcmF0ZWRQcm9wZXJ0aWVzLnJlZHVjZShmdW5jdGlvbiAoYWNjdW0sIGRlY29yYXRlZFByb3BlcnR5KSB7XG4gICAgICAgIHZhciBwcm9wID0gZGVjb3JhdGVkUHJvcGVydHkucHJvcCwgZGVjb3JhdG9ycyA9IGRlY29yYXRlZFByb3BlcnR5LmRlY29yYXRvcnM7XG4gICAgICAgIGlmICghZGVjb3JhdG9ycyB8fCAhZGVjb3JhdG9ycy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gYWNjdW07XG4gICAgICAgIHZhciBlcnJzID0gZGVjb3JhdG9ycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZGVjb3JhdG9yKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRhdG9yID0gZXhwb3J0cy5WYWxpZGF0b3JSZWdpc3RyeS5nZXRWYWxpZGF0b3IoZGVjb3JhdG9yLmtleSk7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIE1hdGNoaW5nIHZhbGlkYXRvciBmb3IgXCIgKyBkZWNvcmF0b3Iua2V5ICsgXCIgZm9yIHByb3BlcnR5IFwiICsgZGVjb3JhdGVkUHJvcGVydHkucHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXJyID0gdmFsaWRhdG9yLmhhc0Vycm9ycy5hcHBseSh2YWxpZGF0b3IsIF9fc3ByZWFkQXJyYXkoW29ialtwcm9wXV0sIE9iamVjdC52YWx1ZXMoZGVjb3JhdG9yLnByb3BzKSkpO1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGFjYyA9IGFjYyB8fCB7fTtcbiAgICAgICAgICAgICAgICBhY2NbZGVjb3JhdG9yLmtleV0gPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAoZXJycykge1xuICAgICAgICAgICAgdmFyIHByb3BFcnJvcnMgPSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydHk6IGRlY29yYXRlZFByb3BlcnR5LnByb3AsXG4gICAgICAgICAgICAgICAgZXJyb3JzOiBlcnJzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYWNjdW0gPSBhY2N1bSB8fCBbXTtcbiAgICAgICAgICAgIGFjY3VtLnB1c2gocHJvcEVycm9ycyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjY3VtO1xuICAgIH0sIHVuZGVmaW5lZCk7XG59XG5leHBvcnRzLnZhbGlkYXRlID0gdmFsaWRhdGU7IiwiaW1wb3J0IE1vZGVsIGZyb20gXCIuLi9Nb2RlbC9Nb2RlbFwiO1xuaW1wb3J0IHtFcnJvcnMsIFJlZ2lzdHJ5fSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHtnZXRQcm9wZXJ0eURlY29yYXRvcnN9IGZyb20gJy4uL3V0aWxzJ1xuaW1wb3J0ICogYXMgVmFsaWRhdG9ycyBmcm9tICcuL1ZhbGlkYXRvcnMnXG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9ycy9WYWxpZGF0b3JcIjtcblxuLyoqXG4gKiBSZXR1cm5zXG4gKiBAcmV0dXJuIHsqfVxuICogQGNvbnN0cnVjdG9yXG4gKiBAZnVuY3Rpb24gVmFsUmVnaXN0cnlcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmZ1bmN0aW9uIFZhbFJlZ2lzdHJ5KC4uLmluaXRpYWw6IGFueVtdKSA6IFJlZ2lzdHJ5IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgcmVnaXN0cnk6IFJlZ2lzdHJ5ID0gIG5ldyBmdW5jdGlvbigpe1xuICAgICAgICBjb25zdCBjYWNoZTogYW55ID0ge307XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3Qgc2VsZjogYW55ID0gdGhpcztcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHZhbGlkYXRvclxuICAgICAgICAgKiBAbWVtYmVyT2YgVmFsaWRhdG9yUmVnaXN0cnlcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucmVnaXN0ZXIgPSBmdW5jdGlvbiguLi52YWxpZGF0b3I6IGFueVtdKSA6IHZvaWR7XG4gICAgICAgICAgICB2YWxpZGF0b3IuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodiBpbnN0YW5jZW9mIFZhbGlkYXRvcil7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW3YudmFsaWRhdGlvbktleV0gPSB2O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uc3RydWN0b3JNZXRob2QgPSB2LmRlZmF1bHQgfHwgdjtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZTogVmFsaWRhdG9yID0gbmV3IGNvbnN0cnVjdG9yTWV0aG9kKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW2luc3RhbmNlLnZhbGlkYXRpb25LZXldID0gaW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHZhbGlkYXRvcktleVxuICAgICAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAgICAgKiBAbWVtYmVyT2YgVmFsaWRhdG9yUmVnaXN0cnlcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZ2V0VmFsaWRhdG9yID0gZnVuY3Rpb24odmFsaWRhdG9yS2V5OiBzdHJpbmcpe1xuICAgICAgICAgICAgaWYgKCEodmFsaWRhdG9yS2V5IGluIGNhY2hlKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVbdmFsaWRhdG9yS2V5XTtcbiAgICAgICAgfVxuICAgIH0oKVxuICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyKC4uLmluaXRpYWwpO1xuICAgIHJldHVybiByZWdpc3RyeTtcbn1cblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBWYWxpZGF0b3JSZWdpc3RyeSA9IFZhbFJlZ2lzdHJ5KC4uLk9iamVjdC52YWx1ZXMoVmFsaWRhdG9ycykpO1xuXG4vKipcbiAqIEFuYWx5c2VzIHRoZSBkZWNvcmF0aW9ucyBvZiB0aGUgcHJvcGVydGllcyBhbmQgdmFsaWRhdGVzIHRoZSBvYmogYWNjb3JkaW5nIHRvIHRoZW1cbiAqIEBmdW5jdGlvbiB2YWxpZGF0ZVxuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlPFQgZXh0ZW5kcyBNb2RlbD4ob2JqOiBUKSA6IEVycm9yc3tcbiAgICBjb25zdCBkZWNvcmF0ZWRQcm9wZXJ0aWVzID0gW107XG4gICAgZm9yIChsZXQgcHJvcCBpbiBvYmopXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpXG4gICAgICAgICAgICBkZWNvcmF0ZWRQcm9wZXJ0aWVzLnB1c2goZ2V0UHJvcGVydHlEZWNvcmF0b3JzKFZhbGlkYXRpb25LZXlzLlJFRkxFQ1QsIG9iaiwgcHJvcCkpO1xuXG4gICAgcmV0dXJuIGRlY29yYXRlZFByb3BlcnRpZXMucmVkdWNlKChhY2N1bSwgZGVjb3JhdGVkUHJvcGVydHkpID0+IHtcbiAgICAgICAgY29uc3Qge3Byb3AsIGRlY29yYXRvcnN9ID0gZGVjb3JhdGVkUHJvcGVydHk7XG4gICAgICAgIGlmICghZGVjb3JhdG9ycyB8fCAhZGVjb3JhdG9ycy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gYWNjdW07XG5cbiAgICAgICAgY29uc3QgZXJycyA9IGRlY29yYXRvcnMucmVkdWNlKChhY2MsIGRlY29yYXRvcjoge2tleTogc3RyaW5nLCBwcm9wczoge319KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0b3IgPSBWYWxpZGF0b3JSZWdpc3RyeS5nZXRWYWxpZGF0b3IoZGVjb3JhdG9yLmtleSk7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRvcil7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgTWF0Y2hpbmcgdmFsaWRhdG9yIGZvciAke2RlY29yYXRvci5rZXl9IGZvciBwcm9wZXJ0eSAke2RlY29yYXRlZFByb3BlcnR5LnByb3B9YClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgZXJyID0gdmFsaWRhdG9yLmhhc0Vycm9ycyhvYmpbcHJvcF0sIC4uLk9iamVjdC52YWx1ZXMoZGVjb3JhdG9yLnByb3BzKSk7XG4gICAgICAgICAgICBpZiAoZXJyKXtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgYWNjID0gYWNjIHx8IHt9O1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBhY2NbZGVjb3JhdG9yLmtleV0gPSBlcnI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHVuZGVmaW5lZCk7XG5cbiAgICAgICAgaWYgKGVycnMpe1xuICAgICAgICAgICAgY29uc3QgcHJvcEVycm9ycyA9IHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogZGVjb3JhdGVkUHJvcGVydHkucHJvcCxcbiAgICAgICAgICAgICAgICBlcnJvcnM6IGVycnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGFjY3VtID0gYWNjdW0gfHwgW107XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBhY2N1bS5wdXNoKHByb3BFcnJvcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjY3VtO1xuICAgIH0sIHVuZGVmaW5lZCk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBQYXR0ZXJuVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUGF0dGVyblZhbGlkYXRvclwiKSk7XG52YXIgRW1haWxWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFbWFpbFZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFbWFpbFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUw7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLkVNQUlMLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBFbWFpbFZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmhhc0Vycm9ycy5jYWxsKHRoaXMsIHZhbHVlLCBFbWFpbFZhbGlkYXRvci5lbWFpbFBhdCwgbWVzc2FnZSk7XG4gICAgfTtcbiAgICBFbWFpbFZhbGlkYXRvci5lbWFpbFBhdCA9IC9bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vO1xuICAgIHJldHVybiBFbWFpbFZhbGlkYXRvcjtcbn0oUGF0dGVyblZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IEVtYWlsVmFsaWRhdG9yOyIsImltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBQYXR0ZXJuVmFsaWRhdG9yIGZyb20gXCIuL1BhdHRlcm5WYWxpZGF0b3JcIjtcblxuLyoqXG4gKiBFbWFpbCBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgRW1haWxWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFBhdHRlcm5WYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtYWlsVmFsaWRhdG9yIGV4dGVuZHMgUGF0dGVyblZhbGlkYXRvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgZW1haWxQYXQ6IFJlZ0V4cCA9IC9bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8vO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLkVNQUlMLCBtZXNzYWdlKVxuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBoYXNFcnJvcnModmFsdWU6IHN0cmluZywgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIHJldHVybiBzdXBlci5oYXNFcnJvcnModmFsdWUsIEVtYWlsVmFsaWRhdG9yLmVtYWlsUGF0LCBtZXNzYWdlKTtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIE1heExlbmd0aFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1heExlbmd0aFZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXhMZW5ndGhWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEg7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1BWF9MRU5HVEgsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIE1heExlbmd0aFZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtYXhsZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiBtYXhsZW5ndGggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1heGxlbmd0aCkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gTWF4TGVuZ3RoVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNYXhMZW5ndGhWYWxpZGF0b3I7IiwiaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcblxuLyoqXG4gKiBNYXggTGVuZ3RoIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBNYXhMZW5ndGhWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF4TGVuZ3RoVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEgpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5NQVhfTEVOR1RILCBtZXNzYWdlKVxuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBtYXhsZW5ndGg6IG51bWJlciwgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID4gbWF4bGVuZ3RoID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtYXhsZW5ndGgpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgTWF4VmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWF4VmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1heFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NQVgsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIE1heFZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtYXgsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZSA+IG1heCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWF4KSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBNYXhWYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1heFZhbGlkYXRvcjsiLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIE1heCBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgTWF4VmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBWYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1heFZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVgpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5NQVgsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBudW1iZXIsIG1heDogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZSA+IG1heCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWF4KSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIE1pbkxlbmd0aFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1pbkxlbmd0aFZhbGlkYXRvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNaW5MZW5ndGhWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTl9MRU5HVEg7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEgsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIE1pbkxlbmd0aFZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtaW5sZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPCBtaW5sZW5ndGggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1pbmxlbmd0aCkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gTWluTGVuZ3RoVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNaW5MZW5ndGhWYWxpZGF0b3I7IiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBNaW4gTGVuZ3RoIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBNaW5MZW5ndGhWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWluTGVuZ3RoVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTl9MRU5HVEgpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RILCBtZXNzYWdlKVxuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBtaW5sZW5ndGg6IG51bWJlciwgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoIDwgbWlubGVuZ3RoID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtaW5sZW5ndGgpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgTWluVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWluVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1pblZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5NSU4sIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIE1pblZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtaW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZSA8IG1pbiA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWluKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBNaW5WYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1pblZhbGlkYXRvcjsiLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIE1pbiBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgTWluVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBWYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pblZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU4pe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5NSU4sIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZSA8IG1pbiA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWluKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFBhdHRlcm5WYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQYXR0ZXJuVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBhdHRlcm5WYWxpZGF0b3Ioa2V5LCBtZXNzYWdlKSB7XG4gICAgICAgIGlmIChrZXkgPT09IHZvaWQgMCkgeyBrZXkgPSBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5QQVRURVJOOyB9XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuUEFUVEVSTjsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywga2V5LCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnByb3RvdHlwZS5nZXRQYXR0ZXJuID0gZnVuY3Rpb24gKHBhdHRlcm4pIHtcbiAgICAgICAgaWYgKCFQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlci50ZXN0KHBhdHRlcm4pKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgICAgIHZhciBtYXRjaCA9IHBhdHRlcm4ubWF0Y2goUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pO1xuICAgIH07XG4gICAgUGF0dGVyblZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBwYXR0ZXJuLCBtZXNzYWdlKSB7XG4gICAgICAgIGlmICghdmFsdWUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHBhdHRlcm4gPSB0eXBlb2YgcGF0dGVybiA9PT0gJ3N0cmluZycgPyB0aGlzLmdldFBhdHRlcm4ocGF0dGVybikgOiBwYXR0ZXJuO1xuICAgICAgICByZXR1cm4gIXBhdHRlcm4udGVzdCh2YWx1ZSkgPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIgPSBuZXcgUmVnRXhwKFwiXlxcLyguKylcXC8oW2dpbXVzXSopJFwiKTtcbiAgICByZXR1cm4gUGF0dGVyblZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gUGF0dGVyblZhbGlkYXRvcjsiLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIFBhdHRlcm4gVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIFBhdHRlcm5WYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0dGVyblZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgcmVnZXhwUGFyc2VyOiBSZWdFeHAgPSBuZXcgUmVnRXhwKFwiXlxcLyguKylcXC8oW2dpbXVzXSopJFwiKTtcblxuICAgIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nID0gVmFsaWRhdGlvbktleXMuUEFUVEVSTiwgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOKXtcbiAgICAgICAgc3VwZXIoa2V5LCBtZXNzYWdlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBhdHRlcm4ocGF0dGVybjogc3RyaW5nKTogUmVnRXhwIHtcbiAgICAgICAgaWYgKCFQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlci50ZXN0KHBhdHRlcm4pKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgICAgIGNvbnN0IG1hdGNoOiBhbnkgPSBwYXR0ZXJuLm1hdGNoKFBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAobWF0Y2hbMV0sIG1hdGNoWzJdKTtcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IHN0cmluZywgcGF0dGVybjogUmVnRXhwIHwgc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF0dGVybiA9IHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJyA/IHRoaXMuZ2V0UGF0dGVybihwYXR0ZXJuKSA6IHBhdHRlcm47XG4gICAgICAgIHJldHVybiAhcGF0dGVybi50ZXN0KHZhbHVlKSA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBSZXF1aXJlZFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcXVpcmVkVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlcXVpcmVkVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5SRVFVSVJFRDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUkVRVUlSRUQsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIFJlcXVpcmVkVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZSA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gUmVxdWlyZWRWYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFJlcXVpcmVkVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogUmVxdWlyZWQgVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIFJlcXVpcmVkVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBWYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVpcmVkVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuUkVRVUlSRUQsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBhbnksIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICByZXR1cm4gIXZhbHVlID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBQYXR0ZXJuVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUGF0dGVyblZhbGlkYXRvclwiKSk7XG52YXIgVVJMVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVVJMVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFVSTFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuVVJMOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5VUkwsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIFVSTFZhbGlkYXRvci5wcm90b3R5cGUuaGFzRXJyb3JzID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmhhc0Vycm9ycy5jYWxsKHRoaXMsIHZhbHVlLCBVUkxWYWxpZGF0b3IudXJsUGF0dGVybiwgbWVzc2FnZSk7XG4gICAgfTtcbiAgICBVUkxWYWxpZGF0b3IudXJsUGF0dGVybiA9IC9eKD86KD86KD86aHR0cHM/fGZ0cCk6KT9cXC9cXC8pKD86XFxTKyg/OjpcXFMqKT9AKT8oPzooPyEoPzoxMHwxMjcpKD86XFwuXFxkezEsM30pezN9KSg/ISg/OjE2OVxcLjI1NHwxOTJcXC4xNjgpKD86XFwuXFxkezEsM30pezJ9KSg/ITE3MlxcLig/OjFbNi05XXwyXFxkfDNbMC0xXSkoPzpcXC5cXGR7MSwzfSl7Mn0pKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswMV1cXGR8MjJbMC0zXSkoPzpcXC4oPzoxP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKSl7Mn0oPzpcXC4oPzpbMS05XVxcZD98MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC00XSkpfCg/Oig/OlthLXowLTlcXHUwMGExLVxcdWZmZmZdW2EtejAtOVxcdTAwYTEtXFx1ZmZmZl8tXXswLDYyfSk/W2EtejAtOVxcdTAwYTEtXFx1ZmZmZl1cXC4pKyg/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfVxcLj8pKSg/OjpcXGR7Miw1fSk/KD86Wy8/I11cXFMqKT8kL2k7XG4gICAgcmV0dXJuIFVSTFZhbGlkYXRvcjtcbn0oUGF0dGVyblZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFVSTFZhbGlkYXRvcjsiLCJpbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgUGF0dGVyblZhbGlkYXRvciBmcm9tIFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCI7XG5cblxuLyoqXG4gKiBVUkwgVmFsaWRhdG9yXG4gKlxuICogUGF0dGVybiBmcm9tIHtAbGluayBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9kcGVyaW5pLzcyOTI5NH1cbiAqXG4gKiBAY2xhc3MgVVJMVmFsaWRhdG9yXG4gKiBAZXh0ZW5kcyBQYXR0ZXJuVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVUkxWYWxpZGF0b3IgZXh0ZW5kcyBQYXR0ZXJuVmFsaWRhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB1cmxQYXR0ZXJuOiBSZWdFeHAgPSAvXig/Oig/Oig/Omh0dHBzP3xmdHApOik/XFwvXFwvKSg/OlxcUysoPzo6XFxTKik/QCk/KD86KD8hKD86MTB8MTI3KSg/OlxcLlxcZHsxLDN9KXszfSkoPyEoPzoxNjlcXC4yNTR8MTkyXFwuMTY4KSg/OlxcLlxcZHsxLDN9KXsyfSkoPyExNzJcXC4oPzoxWzYtOV18MlxcZHwzWzAtMV0pKD86XFwuXFxkezEsM30pezJ9KSg/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16MC05XFx1MDBhMS1cXHVmZmZmXVthLXowLTlcXHUwMGExLVxcdWZmZmZfLV17MCw2Mn0pP1thLXowLTlcXHUwMGExLVxcdWZmZmZdXFwuKSsoPzpbYS16XFx1MDBhMS1cXHVmZmZmXXsyLH1cXC4/KSkoPzo6XFxkezIsNX0pPyg/OlsvPyNdXFxTKik/JC9pO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkwpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5VUkwsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmhhc0Vycm9ycyh2YWx1ZSwgVVJMVmFsaWRhdG9yLnVybFBhdHRlcm4sIG1lc3NhZ2UpO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlsc1wiKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgVmFsaWRhdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBWYWxpZGF0b3IodmFsaWRhdGlvbktleSwgbWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLkRFRkFVTFQ7IH1cbiAgICAgICAgdGhpcy52YWxpZGF0aW9uS2V5ID0gdmFsaWRhdGlvbktleTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgVmFsaWRhdG9yLnByb3RvdHlwZS5nZXRNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWxzXzEuc3RyaW5nRm9ybWF0LmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbbWVzc2FnZV0sIGFyZ3MpKTtcbiAgICB9O1xuICAgIHJldHVybiBWYWxpZGF0b3I7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gVmFsaWRhdG9yOyIsImltcG9ydCB7c3RyaW5nRm9ybWF0fSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcbmltcG9ydCBWYWxpZGF0YWJsZSwge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQge0RFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcblxuLyoqXG4gKiBCYXNlIEltcGxlbWVudGF0aW9uIGZvciBWYWxpZGF0b3JzXG4gKlxuICogQGNsYXNzIFZhbGlkYXRvclxuICogQGFic3RyYWN0XG4gKiBAaW1wbGVtZW50cyBWYWxpZGF0YWJsZVxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgVmFsaWRhdG9yIGltcGxlbWVudHMgVmFsaWRhdGFibGV7XG4gICAgcmVhZG9ubHkgdmFsaWRhdGlvbktleTogc3RyaW5nO1xuICAgIHByb3RlY3RlZCBtZXNzYWdlOiBzdHJpbmc7XG5cblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uS2V5OiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuREVGQVVMVCkge1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25LZXkgPSB2YWxpZGF0aW9uS2V5O1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pe1xuICAgICAgICByZXR1cm4gc3RyaW5nRm9ybWF0KG1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBhYnN0cmFjdCBoYXNFcnJvcnModmFsdWU6IGFueSwgLi4uYXJnczogYW55W10pOiBFcnJvcnM7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVVJMVmFsaWRhdG9yID0gZXhwb3J0cy5QYXR0ZXJuVmFsaWRhdG9yID0gZXhwb3J0cy5NaW5WYWxpZGF0b3IgPSBleHBvcnRzLk1pbkxlbmd0aFZhbGlkYXRvciA9IGV4cG9ydHMuTWF4VmFsaWRhdG9yID0gZXhwb3J0cy5NYXhMZW5ndGhWYWxpZGF0b3IgPSBleHBvcnRzLlJlcXVpcmVkVmFsaWRhdG9yID0gZXhwb3J0cy5FbWFpbFZhbGlkYXRvciA9IHZvaWQgMDtcbmV4cG9ydHMuRW1haWxWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vRW1haWxWYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5SZXF1aXJlZFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9SZXF1aXJlZFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLk1heExlbmd0aFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9NYXhMZW5ndGhWYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5NYXhWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTWF4VmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuTWluTGVuZ3RoVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01pbkxlbmd0aFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLk1pblZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9NaW5WYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5QYXR0ZXJuVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL1BhdHRlcm5WYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5VUkxWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vVVJMVmFsaWRhdG9yXCIpKTsiLCIvKipcbiAqIEBuYW1lc3BhY2UgVmFsaWRhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuXG5cbmV4cG9ydCAqIGFzIEVtYWlsVmFsaWRhdG9yIGZyb20gJy4vRW1haWxWYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgUmVxdWlyZWRWYWxpZGF0b3IgZnJvbSAnLi9SZXF1aXJlZFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBNYXhMZW5ndGhWYWxpZGF0b3IgZnJvbSAnLi9NYXhMZW5ndGhWYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgTWF4VmFsaWRhdG9yIGZyb20gJy4vTWF4VmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIE1pbkxlbmd0aFZhbGlkYXRvciBmcm9tICcuL01pbkxlbmd0aFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBNaW5WYWxpZGF0b3IgZnJvbSAnLi9NaW5WYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgUGF0dGVyblZhbGlkYXRvciBmcm9tICcuL1BhdHRlcm5WYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgVVJMVmFsaWRhdG9yIGZyb20gJy4vVVJMVmFsaWRhdG9yJzsiXX0=
