"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=exports.Model=exports.Validation=void 0,exports.Validation=__importStar(require("./validation")),exports.Model=__importStar(require("./Model")),exports.Utils=__importStar(require("./utils"));var __spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};function getPropertyDecorators(r,o,n){var t=Reflect.getMetadataKeys(o,n).filter(function(t){return t.toString().startsWith(r)}).reduce(function(t,e){e={key:e.substring(r.length),props:Reflect.getMetadata(e,o,n)};return t.concat(e)},[]);return{prop:n,decorators:t}}function stringFormat(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:t})}function isEqual(e,r){for(var o=[],t=2;t<arguments.length;t++)o[t-2]=arguments[t];if(e===r)return!0;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(!e||!r||"object"!=typeof e&&"object"!=typeof r)return e===r;if(null==e||null==r)return!1;if(e.prototype!==r.prototype)return!1;var n=Object.keys(e).filter(function(t){return-1===o.indexOf(t)});return n.length===Object.keys(r).filter(function(t){return-1===o.indexOf(t)}).length&&n.every(function(t){return-1!==o.indexOf(t)||isEqual.apply(void 0,__spreadArray([e[t],r[t]],o))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEqual=exports.stringFormat=exports.getPropertyDecorators=void 0,exports.getPropertyDecorators=getPropertyDecorators,exports.stringFormat=stringFormat,exports.isEqual=isEqual;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var validation_1=require("../validation"),utils_1=require("../utils"),Model=function(){function e(t){e.constructFromObject(this,t)}return e.prototype.hasErrors=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return validation_1.validate(this)},e.prototype.equals=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.isEqual.apply(void 0,__spreadArray([this,t],e))},e.constructFromObject=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r]);return t},e}();exports.default=Model;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Model=void 0,exports.Model=__importStar(require("./Model")),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_ERROR_MESSAGES=exports.ValidationKeys=void 0,exports.ValidationKeys={REFLECT:"model.validation.",REQUIRED:"required",MIN:"min",MAX:"max",MIN_LENGTH:"minlength",MAX_LENGTH:"maxlength",PATTERN:"pattern",EMAIL:"email",URL:"url"},exports.DEFAULT_ERROR_MESSAGES={REQUIRED:"This field is required",MIN:"The minimum value is {0}",MAX:"The maximum value is {0}",MIN_LENGTH:"The minimum length is {0}",MAX_LENGTH:"The maximum length is {0}",PATTERN:"The value does not match the pattern",EMAIL:"The value is not a valid email",URL:"The value is not a valid URL",DEFAULT:"There is an Error"},Object.defineProperty(exports,"__esModule",{value:!0}),exports.url=exports.email=exports.pattern=exports.maxlength=exports.minlength=exports.max=exports.min=exports.required=exports.getValidationKey=void 0,require("reflect-metadata");var constants_1=require("./constants"),getValidationKey=function(t){return constants_1.ValidationKeys.REFLECT+t};exports.getValidationKey=getValidationKey;var required=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.REQUIRED),{message:r},t,e)}};exports.required=required;var min=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN),{value:r,message:o},t,e)}};exports.min=min;var max=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX),{value:r,message:o},t,e)}};exports.max=max;var minlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MIN_LENGTH),{value:r,message:o},t,e)}};exports.minlength=minlength;var maxlength=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.MAX_LENGTH),{value:r,message:o},t,e)}};exports.maxlength=maxlength;var pattern=function(r,o){return void 0===o&&(o=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.PATTERN),{value:"string"==typeof r?r:r.toString(),message:o},t,e)}};exports.pattern=pattern;var email=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.EMAIL),{message:r},t,e)}};exports.email=email;var url=function(r){return void 0===r&&(r=constants_1.DEFAULT_ERROR_MESSAGES.URL),function(t,e){Reflect.defineMetadata(exports.getValidationKey(constants_1.ValidationKeys.URL),{message:r},t,e)}};exports.url=url;var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__exportStar=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||__createBinding(e,t,r)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Validators=exports.Decorators=void 0,exports.Decorators=__importStar(require("./decorators")),__exportStar(require("./types"),exports),__exportStar(require("./validation"),exports),__exportStar(require("./constants"),exports),exports.Validators=__importStar(require("./Validators")),Object.defineProperty(exports,"__esModule",{value:!0});var __createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.validate=exports.ValidatorRegistry=void 0;var utils_1=require("../utils"),Validators=__importStar(require("./Validators")),constants_1=require("./constants"),Validator_1=__importDefault(require("./Validators/Validator"));function ValRegistry(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new function(){var r={};this.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){t instanceof Validator_1.default?r[t.validationKey]=t:(t=new(t.default||t),r[t.validationKey]=t)})},this.getValidator=function(t){if(t in r)return r[t]}};return r.register.apply(r,t),r}function validate(a){var t,e=[];for(t in a)a.hasOwnProperty(t)&&e.push(utils_1.getPropertyDecorators(constants_1.ValidationKeys.REFLECT,a,t));return e.reduce(function(t,o){var n=o.prop,e=o.decorators;if(!e||!e.length)return t;e=e.reduce(function(t,e){var r=exports.ValidatorRegistry.getValidator(e.key);if(!r)throw new Error("Could not find Matching validator for "+e.key+" for property "+String(o.prop));r=r.hasErrors.apply(r,__spreadArray([a[n]],Object.values(e.props)));return r&&((t=t||{})[e.key]=r),t},void 0);return e&&(e={property:o.prop,errors:e},(t=t||[]).push(e)),t},void 0)}exports.ValidatorRegistry=ValRegistry.apply(void 0,Object.values(Validators)),exports.validate=validate;var __extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),PatternValidator_1=__importDefault(require("./PatternValidator")),EmailValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.EMAIL),r.call(this,constants_1.ValidationKeys.EMAIL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.emailPat,e)},o.emailPat=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,o}(PatternValidator_1.default);exports.default=EmailValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX_LENGTH),e.call(this,constants_1.ValidationKeys.MAX_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length>e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MaxValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MAX),e.call(this,constants_1.ValidationKeys.MAX,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return e<t?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MaxValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinLengthValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN_LENGTH),e.call(this,constants_1.ValidationKeys.MIN_LENGTH,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t.length<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinLengthValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),MinValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.MIN),e.call(this,constants_1.ValidationKeys.MIN,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e,r){if(void 0!==t)return t<e?this.getMessage(r||this.message,e):void 0},t}(Validator_1.default);exports.default=MinValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),PatternValidator=function(r){function e(t,e){return void 0===t&&(t=constants_1.ValidationKeys.PATTERN),void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.PATTERN),r.call(this,t,e)||this}return __extends(e,r),e.prototype.getPattern=function(t){if(!e.regexpParser.test(t))return new RegExp(t);t=t.match(e.regexpParser);return new RegExp(t[1],t[2])},e.prototype.hasErrors=function(t,e,r){if(t)return(e="string"==typeof e?this.getPattern(e):e).test(t)?void 0:this.getMessage(r||this.message)},e.regexpParser=new RegExp("^/(.+)/([gimus]*)$"),e}(Validator_1.default);exports.default=PatternValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Validator_1=__importDefault(require("./Validator")),constants_1=require("../constants"),RequiredValidator=function(e){function t(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.REQUIRED),e.call(this,constants_1.ValidationKeys.REQUIRED,t)||this}return __extends(t,e),t.prototype.hasErrors=function(t,e){return t?void 0:this.getMessage(e||this.message)},t}(Validator_1.default);exports.default=RequiredValidator;__extends=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var constants_1=require("../constants"),URLValidator=function(r){function o(t){return void 0===t&&(t=constants_1.DEFAULT_ERROR_MESSAGES.URL),r.call(this,constants_1.ValidationKeys.URL,t)||this}return __extends(o,r),o.prototype.hasErrors=function(t,e){return r.prototype.hasErrors.call(this,t,o.urlPattern,e)},o.urlPattern=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i,o}((PatternValidator_1=__importDefault(require("./PatternValidator"))).default);exports.default=URLValidator;__spreadArray=this&&this.__spreadArray||function(t,e){for(var r=0,o=e.length,n=t.length;r<o;r++,n++)t[n]=e[r];return t};Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("../../utils"),constants_1=require("../constants"),Validator=function(){function t(t,e){void 0===e&&(e=constants_1.DEFAULT_ERROR_MESSAGES.DEFAULT),this.validationKey=t,this.message=e}return t.prototype.getMessage=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return utils_1.stringFormat.apply(void 0,__spreadArray([t],e))},t}();exports.default=Validator;__createBinding=this&&this.__createBinding||(Object.create?function(t,e,r,o){void 0===o&&(o=r),Object.defineProperty(t,o,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,o){t[o=void 0===o?r:o]=e[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLValidator=exports.PatternValidator=exports.MinValidator=exports.MinLengthValidator=exports.MaxValidator=exports.MaxLengthValidator=exports.RequiredValidator=exports.EmailValidator=void 0,exports.EmailValidator=__importStar(require("./EmailValidator")),exports.RequiredValidator=__importStar(require("./RequiredValidator")),exports.MaxLengthValidator=__importStar(require("./MaxLengthValidator")),exports.MaxValidator=__importStar(require("./MaxValidator")),exports.MinLengthValidator=__importStar(require("./MinLengthValidator")),exports.MinValidator=__importStar(require("./MinValidator")),exports.PatternValidator=__importStar(require("./PatternValidator")),exports.URLValidator=__importStar(require("./URLValidator"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIiwiaW5kZXgudHMiLCJ1dGlscy5qcyIsInV0aWxzLnRzIiwiTW9kZWwvTW9kZWwuanMiLCJNb2RlbC9Nb2RlbC50cyIsIk1vZGVsL2luZGV4LmpzIiwiTW9kZWwvaW5kZXgudHMiLCJ2YWxpZGF0aW9uL2NvbnN0YW50cy5qcyIsInZhbGlkYXRpb24vY29uc3RhbnRzLnRzIiwidmFsaWRhdGlvbi9kZWNvcmF0b3JzLmpzIiwidmFsaWRhdGlvbi9kZWNvcmF0b3JzLnRzIiwidmFsaWRhdGlvbi9pbmRleC5qcyIsInZhbGlkYXRpb24vaW5kZXgudHMiLCJ2YWxpZGF0aW9uL3R5cGVzLmpzIiwidmFsaWRhdGlvbi92YWxpZGF0aW9uLmpzIiwidmFsaWRhdGlvbi92YWxpZGF0aW9uLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL0VtYWlsVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heExlbmd0aFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NYXhMZW5ndGhWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWF4VmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01heFZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5MZW5ndGhWYWxpZGF0b3IuanMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvTWluTGVuZ3RoVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL01pblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9NaW5WYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvUGF0dGVyblZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9QYXR0ZXJuVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1JlcXVpcmVkVmFsaWRhdG9yLnRzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1VSTFZhbGlkYXRvci5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9VUkxWYWxpZGF0b3IudHMiLCJ2YWxpZGF0aW9uL1ZhbGlkYXRvcnMvVmFsaWRhdG9yLmpzIiwidmFsaWRhdGlvbi9WYWxpZGF0b3JzL1ZhbGlkYXRvci50cyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC5qcyIsInZhbGlkYXRpb24vVmFsaWRhdG9ycy9pbmRleC50cyJdLCJuYW1lcyI6WyJfX2NyZWF0ZUJpbmRpbmciLCJ0aGlzIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJ1bmRlZmluZWQiLCJfX3NldE1vZHVsZURlZmF1bHQiLCJ2IiwidmFsdWUiLCJfX2ltcG9ydFN0YXIiLCJtb2QiLCJfX2VzTW9kdWxlIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicmVzdWx0IiwiZXhwb3J0cyIsIlV0aWxzIiwiTW9kZWwiLCJWYWxpZGF0aW9uIiwicmVxdWlyZSIsIl9fc3ByZWFkQXJyYXkiLCJ0byIsImZyb20iLCJpIiwiaWwiLCJsZW5ndGgiLCJqIiwiZ2V0UHJvcGVydHlEZWNvcmF0b3JzIiwiYW5ub3RhdGlvblByZWZpeCIsInRhcmdldCIsInByb3BlcnR5TmFtZSIsImRlY29yYXRvcnMiLCJSZWZsZWN0IiwiZ2V0TWV0YWRhdGFLZXlzIiwiZmlsdGVyIiwia2V5IiwidG9TdHJpbmciLCJzdGFydHNXaXRoIiwicmVkdWNlIiwidmFsdWVzIiwiY3VyclZhbHVlcyIsInN1YnN0cmluZyIsInByb3BzIiwiZ2V0TWV0YWRhdGEiLCJjb25jYXQiLCJwcm9wIiwic3RyaW5nRm9ybWF0Iiwic3RyaW5nIiwiYXJncyIsIl9pIiwiYXJndW1lbnRzIiwicmVwbGFjZSIsIm1hdGNoIiwibnVtYmVyIiwiaXNFcXVhbCIsImEiLCJiIiwicHJvcHNUb0lnbm9yZSIsIkRhdGUiLCJnZXRUaW1lIiwia2V5cyIsImluZGV4T2YiLCJldmVyeSIsImFwcGx5IiwidmFsaWRhdGlvbl8xIiwidXRpbHNfMSIsIm1vZGVsIiwiY29uc3RydWN0RnJvbU9iamVjdCIsImhhc0Vycm9ycyIsInZhbGlkYXRlIiwiZXF1YWxzIiwib2JqIiwiZXhjZXB0aW9ucyIsInNlbGYiLCJkZWZhdWx0IiwiREVGQVVMVF9FUlJPUl9NRVNTQUdFUyIsIlZhbGlkYXRpb25LZXlzIiwiUkVGTEVDVCIsIlJFUVVJUkVEIiwiTUlOIiwiTUFYIiwiTUlOX0xFTkdUSCIsIk1BWF9MRU5HVEgiLCJQQVRURVJOIiwiRU1BSUwiLCJVUkwiLCJERUZBVUxUIiwidXJsIiwiZW1haWwiLCJwYXR0ZXJuIiwibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwibWF4IiwibWluIiwicmVxdWlyZWQiLCJnZXRWYWxpZGF0aW9uS2V5IiwiY29uc3RhbnRzXzEiLCJtZXNzYWdlIiwicHJvcGVydHlLZXkiLCJkZWZpbmVNZXRhZGF0YSIsIl9fZXhwb3J0U3RhciIsInAiLCJWYWxpZGF0b3JzIiwiRGVjb3JhdG9ycyIsIl9faW1wb3J0RGVmYXVsdCIsIlZhbGlkYXRvclJlZ2lzdHJ5IiwiVmFsaWRhdG9yXzEiLCJWYWxSZWdpc3RyeSIsImluaXRpYWwiLCJyZWdpc3RyeSIsImNhY2hlIiwicmVnaXN0ZXIiLCJ2YWxpZGF0b3IiLCJmb3JFYWNoIiwidmFsaWRhdGlvbktleSIsImluc3RhbmNlIiwiZ2V0VmFsaWRhdG9yIiwidmFsaWRhdG9yS2V5IiwiZGVjb3JhdGVkUHJvcGVydGllcyIsInB1c2giLCJhY2N1bSIsImRlY29yYXRlZFByb3BlcnR5IiwiZXJycyIsImFjYyIsImRlY29yYXRvciIsIkVycm9yIiwiU3RyaW5nIiwiZXJyIiwicHJvcEVycm9ycyIsInByb3BlcnR5IiwiZXJyb3JzIiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiVHlwZUVycm9yIiwiX18iLCJjb25zdHJ1Y3RvciIsIlBhdHRlcm5WYWxpZGF0b3JfMSIsIkVtYWlsVmFsaWRhdG9yIiwiX3N1cGVyIiwiZW1haWxQYXQiLCJNYXhMZW5ndGhWYWxpZGF0b3IiLCJnZXRNZXNzYWdlIiwiTWF4VmFsaWRhdG9yIiwiTWluTGVuZ3RoVmFsaWRhdG9yIiwiTWluVmFsaWRhdG9yIiwiUGF0dGVyblZhbGlkYXRvciIsImdldFBhdHRlcm4iLCJyZWdleHBQYXJzZXIiLCJ0ZXN0IiwiUmVnRXhwIiwiUmVxdWlyZWRWYWxpZGF0b3IiLCJVUkxWYWxpZGF0b3IiLCJ1cmxQYXR0ZXJuIiwiVmFsaWRhdG9yIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFJQSxnQkFBbUJDLE1BQVFBLEtBQUtELGtCQUFxQkUsT0FBT0MsT0FBVSxTQUFTQyxFQUFHQyxFQUFHQyxFQUFHQyxRQUF4RlAsSUFBQUEsSUFBbUJPLEVBQVFELEdBQzNCSixPQUFNTSxlQUFrQkosRUFBR0UsRUFBTCxDQUFBRyxZQUFBLEVBQUFDLElBQUEsV0FBQSxPQUFBTCxFQUFBQyxPQUN0QkosU0FBT00sRUFBQUEsRUFBQUEsRUFBZUosR0FBMkJNLEVBQXBCSCxPQUFZSSxJQUFWRixFQUFGSCxFQUFvQkksR0FBS0wsRUFBQUMsS0FBMkJNLG1CQUFBWCxNQUFBQSxLQUFBVyxxQkFBQVYsT0FBQUMsT0FBQSxTQUFBQyxFQUFBUyxHQUFqRlgsT0FBQU0sZUFBQUosRUFBQSxVQUFBLENBQUFLLFlBQUEsRUFBQUssTUFBQUQsS0FDRSxTQUFTVCxFQUFHQyxHQUNkRCxFQUFBLFFBQVdPLElBSmZJLGFBQUFkLE1BQUFBLEtBQUFjLGNBQUEsU0FBQUMsR0FhSSxHQUFJQSxHQUFPQSxFQUFJQyxXQUFZLE9BQU9ELEVBTmxDSixJQUFBQSxFQUFBQSxHQUNBVixHQUFPTSxNQUFEUSxFQUFDUixJQUFQLElBQXlCRixLQUFBVSxFQUFXLFlBQUFWLEdBQUFKLE9BQUFn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RVIsT0FBTyxJQUN0RFEsUUFBUTRJLGFBQWU1SSxRQUFRc0ksaUJBQW1CdEksUUFBUXFJLGFBQWVySSxRQUFRb0ksbUJBQXFCcEksUUFBUW1JLGFBQWVuSSxRQUFRaUksbUJBQXFCakksUUFBUTJJLGtCQUFvQjNJLFFBQVE4SCxvQkFBaUIsRUNmL005SCxRQUFBOEgsZUFBQXJJLGFBQUFXLFFBQUEscUJBQ0FKLFFBQUEySSxrQkFBQWxKLGFBQUFXLFFBQUEsd0JBQ0FKLFFBQUFpSSxtQkFBQXhJLGFBQUFXLFFBQUEseUJBQ0FKLFFBQUFtSSxhQUFBMUksYUFBQVcsUUFBQSxtQkFDQUosUUFBQW9JLG1CQUFBM0ksYUFBQVcsUUFBQSx5QkFDQUosUUFBQXFJLGFBQUE1SSxhQUFBVyxRQUFBLG1CQUNBSixRQUFBc0ksaUJBQUE3SSxhQUFBVyxRQUFBLHVCQUNBSixRQUFBNEksYUFBQW5KLGFBQUFXLFFBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VdGlscyA9IGV4cG9ydHMuTW9kZWwgPSBleHBvcnRzLlZhbGlkYXRpb24gPSB2b2lkIDA7XG5leHBvcnRzLlZhbGlkYXRpb24gPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vdmFsaWRhdGlvblwiKSk7XG5leHBvcnRzLk1vZGVsID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01vZGVsXCIpKTtcbmV4cG9ydHMuVXRpbHMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHNcIikpOyIsIi8qKlxuICogQG1vZHVsZSBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5cbmV4cG9ydCAqIGFzIFZhbGlkYXRpb24gZnJvbSAnLi92YWxpZGF0aW9uJztcbmV4cG9ydCAqIGFzIE1vZGVsIGZyb20gJy4vTW9kZWwnO1xuZXhwb3J0ICogYXMgVXRpbHMgZnJvbSAgJy4vdXRpbHMnO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcbiAgICByZXR1cm4gdG87XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5pc0VxdWFsID0gZXhwb3J0cy5zdHJpbmdGb3JtYXQgPSBleHBvcnRzLmdldFByb3BlcnR5RGVjb3JhdG9ycyA9IHZvaWQgMDtcbmZ1bmN0aW9uIGdldFByb3BlcnR5RGVjb3JhdG9ycyhhbm5vdGF0aW9uUHJlZml4LCB0YXJnZXQsIHByb3BlcnR5TmFtZSkge1xuICAgIHZhciBrZXlzID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXModGFyZ2V0LCBwcm9wZXJ0eU5hbWUpO1xuICAgIHZhciBkZWNvcmF0b3JzID0ga2V5c1xuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS50b1N0cmluZygpLnN0YXJ0c1dpdGgoYW5ub3RhdGlvblByZWZpeCk7IH0pXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKHZhbHVlcywga2V5KSB7XG4gICAgICAgIHZhciBjdXJyVmFsdWVzID0ge1xuICAgICAgICAgICAga2V5OiBrZXkuc3Vic3RyaW5nKGFubm90YXRpb25QcmVmaXgubGVuZ3RoKSxcbiAgICAgICAgICAgIHByb3BzOiBSZWZsZWN0LmdldE1ldGFkYXRhKGtleSwgdGFyZ2V0LCBwcm9wZXJ0eU5hbWUpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB2YWx1ZXMuY29uY2F0KGN1cnJWYWx1ZXMpO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9wOiBwcm9wZXJ0eU5hbWUsXG4gICAgICAgIGRlY29yYXRvcnM6IGRlY29yYXRvcnNcbiAgICB9O1xufVxuZXhwb3J0cy5nZXRQcm9wZXJ0eURlY29yYXRvcnMgPSBnZXRQcm9wZXJ0eURlY29yYXRvcnM7XG5mdW5jdGlvbiBzdHJpbmdGb3JtYXQoc3RyaW5nKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL3soXFxkKyl9L2csIGZ1bmN0aW9uIChtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXJnc1tudW1iZXJdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBhcmdzW251bWJlcl1cbiAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgfSk7XG59XG5leHBvcnRzLnN0cmluZ0Zvcm1hdCA9IHN0cmluZ0Zvcm1hdDtcbmZ1bmN0aW9uIGlzRXF1YWwoYSwgYikge1xuICAgIHZhciBwcm9wc1RvSWdub3JlID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgcHJvcHNUb0lnbm9yZVtfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICBpZiAoIWEgfHwgIWIgfHwgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiAhPT0gJ29iamVjdCcpKVxuICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYS5wcm90b3R5cGUgIT09IGIucHJvdG90eXBlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhKS5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuIHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTE7IH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikuZmlsdGVyKGZ1bmN0aW9uIChrKSB7IHJldHVybiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgPT09IC0xOyB9KS5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4ga2V5cy5ldmVyeShmdW5jdGlvbiAoaykgeyByZXR1cm4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspICE9PSAtMSB8fCBpc0VxdWFsLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbYVtrXSwgYltrXV0sIHByb3BzVG9JZ25vcmUpKTsgfSk7XG59XG5leHBvcnRzLmlzRXF1YWwgPSBpc0VxdWFsOyIsIi8qKlxuICogQG5hbWVzcGFjZSB1dGlsc1xuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cblxuLyoqXG4gKiBVdGlsIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBkZWNvcmF0b3JzIGZvciB0aGUgcHJvdmlkZWQgUHJvcGVydHlcbiAqXG4gKiBAZnVuY3Rpb24gZ2V0UHJvcGVydHlEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgdXRpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3BlcnR5RGVjb3JhdG9ycyhhbm5vdGF0aW9uUHJlZml4OiBzdHJpbmcsIHRhcmdldDogYW55LCBwcm9wZXJ0eU5hbWU6IHN0cmluZyB8IHN5bWJvbCk6IHtwcm9wOiBzdHJpbmcgfCBzeW1ib2wsIGRlY29yYXRvcnM6IFtdfSB7XG4gICAgLy8gZ2V0IGluZm8gYWJvdXQga2V5cyB0aGF0IHVzZWQgaW4gY3VycmVudCBwcm9wZXJ0eVxuICAgIGNvbnN0IGtleXM6IGFueVtdID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXModGFyZ2V0LCBwcm9wZXJ0eU5hbWUpO1xuICAgIGNvbnN0IGRlY29yYXRvcnMgPSBrZXlzXG4gICAgICAgIC8vIGZpbHRlciB5b3VyIGN1c3RvbSBkZWNvcmF0b3JzXG4gICAgICAgIC5maWx0ZXIoa2V5ID0+IGtleS50b1N0cmluZygpLnN0YXJ0c1dpdGgoYW5ub3RhdGlvblByZWZpeCkpXG4gICAgICAgIC5yZWR1Y2UoKHZhbHVlcywga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBnZXQgbWV0YWRhdGEgdmFsdWUuXG4gICAgICAgICAgICBjb25zdCBjdXJyVmFsdWVzID0ge1xuICAgICAgICAgICAgICAgIGtleToga2V5LnN1YnN0cmluZyhhbm5vdGF0aW9uUHJlZml4Lmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcHJvcHM6IFJlZmxlY3QuZ2V0TWV0YWRhdGEoa2V5LCB0YXJnZXQsIHByb3BlcnR5TmFtZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzLmNvbmNhdChjdXJyVmFsdWVzKTtcbiAgICAgICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvcDogcHJvcGVydHlOYW1lLFxuICAgICAgICBkZWNvcmF0b3JzOiBkZWNvcmF0b3JzXG4gICAgfTtcbn1cblxuXG5cbi8qKlxuICogVXRpbCBmdW5jdGlvbiB0byBwcm92aWRlIHN0cmluZyBmb3JtYXQgZnVuY3Rpb25hbGl0eSBzaW1pbGFyIHRvIEMjJ3Mgc3RyaW5nLmZvcm1hdFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcmdzIHJlcGxhY2VtZW50cyBtYWRlIGJ5IG9yZGVyIG9mIGFwcGVhcmFuY2UgKHJlcGxhY2VtZW50MCB3aWwgcmVwbGFjZSB7MH0gYW5kIHNvIG9uKVxuICogQHJldHVybiB7c3RyaW5nfSBmb3JtYXR0ZWQgc3RyaW5nXG4gKiBAZnVuY3Rpb24gc3RyaW5nRm9ybWF0XG4gKiBAbWVtYmVyT2YgdXRpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zvcm1hdChzdHJpbmc6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pe1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgveyhcXGQrKX0vZywgZnVuY3Rpb24obWF0Y2gsIG51bWJlcikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGFyZ3NbbnVtYmVyXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXJnc1tudW1iZXJdXG4gICAgICAgICAgICA6IG1hdGNoO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIERlZXAgT2JqZWN0IENvbXBhcmlzb25cbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMwNDc2MTUwL2phdmFzY3JpcHQtZGVlcC1jb21wYXJpc29uLXJlY3Vyc2l2ZWx5LW9iamVjdHMtYW5kLXByb3BlcnRpZXNcbiAqXG4gKiB3aXRoIG9wdGlvbmFsIGlnbm9yZWQgcHJvcGVydGllc1xuICpcbiAqIEBwYXJhbSB7e319IGFcbiAqIEBwYXJhbSB7e319IGJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHNUb0lnbm9yZV1cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAZnVuY3Rpb24gaXNFcXVhbFxuICogQG1lbWJlck9mIHV0aWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsKGE6IGFueSwgYjogYW55LC4uLnByb3BzVG9JZ25vcmU6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xuICAgIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICBpZiAoIWEgfHwgIWIgfHwgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiAhPT0gJ29iamVjdCcpKSByZXR1cm4gYSA9PT0gYjtcbiAgICBpZiAoYSA9PT0gbnVsbCB8fCBhID09PSB1bmRlZmluZWQgfHwgYiA9PT0gbnVsbCB8fCBiID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYS5wcm90b3R5cGUgIT09IGIucHJvdG90eXBlKSByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhhKS5maWx0ZXIoayA9PiBwcm9wc1RvSWdub3JlLmluZGV4T2YoaykgPT09IC0xKTtcbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmZpbHRlcihrID0+IHByb3BzVG9JZ25vcmUuaW5kZXhPZihrKSA9PT0gLTEpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBrZXlzLmV2ZXJ5KGsgPT4gcHJvcHNUb0lnbm9yZS5pbmRleE9mKGspICE9PSAtMSB8fCBpc0VxdWFsKGFba10sIGJba10sIC4uLnByb3BzVG9JZ25vcmUpKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBmcm9tLmxlbmd0aCwgaiA9IHRvLmxlbmd0aDsgaSA8IGlsOyBpKyssIGorKylcbiAgICAgICAgdG9bal0gPSBmcm9tW2ldO1xuICAgIHJldHVybiB0bztcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgdmFsaWRhdGlvbl8xID0gcmVxdWlyZShcIi4uL3ZhbGlkYXRpb25cIik7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbnZhciBNb2RlbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTW9kZWwobW9kZWwpIHtcbiAgICAgICAgTW9kZWwuY29uc3RydWN0RnJvbU9iamVjdCh0aGlzLCBtb2RlbCk7XG4gICAgfVxuICAgIE1vZGVsLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25fMS52YWxpZGF0ZSh0aGlzKTtcbiAgICB9O1xuICAgIE1vZGVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHZhciBleGNlcHRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBleGNlcHRpb25zW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsc18xLmlzRXF1YWwuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFt0aGlzLCBvYmpdLCBleGNlcHRpb25zKSk7XG4gICAgfTtcbiAgICBNb2RlbC5jb25zdHJ1Y3RGcm9tT2JqZWN0ID0gZnVuY3Rpb24gKHNlbGYsIG9iaikge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iailcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkgJiYgc2VsZi5oYXNPd25Qcm9wZXJ0eShwcm9wKSlcbiAgICAgICAgICAgICAgICBzZWxmW3Byb3BdID0gb2JqW3Byb3BdO1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9O1xuICAgIHJldHVybiBNb2RlbDtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNb2RlbDsiLCJpbXBvcnQge3ZhbGlkYXRlfSBmcm9tIFwiLi4vdmFsaWRhdGlvblwiO1xuaW1wb3J0IFZhbGlkYXRhYmxlLCB7RXJyb3JzfSBmcm9tIFwiLi4vdmFsaWRhdGlvbi90eXBlc1wiO1xuaW1wb3J0IHtpc0VxdWFsfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyByZXByZXNlbnRpbmcgYSBWYWxpZGF0YWJsZSBNb2RlbCBvYmplY3RcbiAqXG4gKiBNb2RlbCBvYmplY3RzIG11c3Q6XG4gKiAgLSBIYXZlIGFsbCB0aGVpciBwcm9wZXJ0aWVzIGRlZmluZWQgYXMgb3B0aW9uYWw7XG4gKiAgLSBIYXZlIGFsbCB0aGVpciBwcm9wZXJ0aWVzIGluaXRpYWxpemVkIChvbmx5IHRoZSAnQHJlcXVpcmVkKCknIGRlY29yYXRlZCBwcm9wZXJ0aWVzXG4gKiAgPHN0cm9uZz5uZWVkPC9zdHJvbmc+IHRvIGJlIGluaXRpYWxpemVkLCBidXQgYWxsIG9mIHRoZW0gc2hvdWxkIGJlIGFzIGdvb2QgcHJhY3RpY2UpO1xuICpcbiAqIEBjbGFzcyBNb2RlbFxuICogQGFic3RyYWN0XG4gKiBAaW1wbGVtZW50cyBWYWxpZGF0YWJsZVxuICogQG5hbWVzcGFjZSBNb2RlbFxuICogQG1lbWJlck9mIE1vZGVsXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIE1vZGVsIGltcGxlbWVudHMgVmFsaWRhdGFibGUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TW9kZWwgfCB7fX0gbW9kZWwgYmFzZSBvYmplY3QgZnJvbSB3aGljaCB0byBwb3B1bGF0ZSBwcm9wZXJ0aWVzIGZyb21cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHNlZSBNb2RlbCNjb25zdHJ1Y3RGcm9tT2JqZWN0XG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKG1vZGVsPzogTW9kZWwgfCB7fSl7XG4gICAgICAgIE1vZGVsLmNvbnN0cnVjdEZyb21PYmplY3QodGhpcywgbW9kZWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGUgb2JqZWN0IGFjY29yZGluZyB0byBpdHMgZGVjb3JhdGVkIHByb3BlcnRpZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7YW55fSBbYXJnc11cbiAgICAgKiBAbWVtYmVyT2YgTW9kZWxcbiAgICAgKiBAc2VlIHZhbGlkYXRlXG4gICAgICovXG4gICAgcHVibGljIGhhc0Vycm9ycyguLi5hcmdzOiBhbnlbXSk6IEVycm9yc3tcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBhcmUgb2JqZWN0IGVxdWFsaXR5IHJlY3Vyc2l2ZWx5XG4gICAgICogQHBhcmFtIHthbnl9IG9iaiBvYmplY3QgdG8gY29tcGFyZSB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhjZXB0aW9uc10gcHJvcGVydHkgbmFtZXMgdG8gYmUgZXhjbHVkZWQgZnJvbSB0aGUgY29tcGFyaXNvblxuICAgICAqIEBtZW1iZXJPZiBNb2RlbFxuICAgICAqL1xuICAgIHB1YmxpYyBlcXVhbHMob2JqOiBhbnksIC4uLmV4Y2VwdGlvbnM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBpc0VxdWFsKHRoaXMsIG9iaiwgLi4uZXhjZXB0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVwb3B1bGF0ZXMgdGhlIE9iamVjdCBwcm9wZXJ0aWVzIHdpdGggdGhlIG9uZXMgZnJvbSB0aGUgbmV3IG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtUfSBzZWxmXG4gICAgICogQHBhcmFtIHtUfCB7fX0gb2JqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEBmdW5jdGlvbiBjb25zdHJ1Y3RGcm9tT2JqZWN0XG4gICAgICogQG1lbWJlck9mIE1vZGVsXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBjb25zdHJ1Y3RGcm9tT2JqZWN0PFQgZXh0ZW5kcyBNb2RlbD4oc2VsZjogVCwgb2JqPzogVCB8IHt9KXtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBvYmopXG4gICAgICAgICAgICBpZihvYmouaGFzT3duUHJvcGVydHkocHJvcCkgJiYgc2VsZi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgc2VsZltwcm9wXSA9IG9ialtwcm9wXTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1vZGVsID0gdm9pZCAwO1xuZXhwb3J0cy5Nb2RlbCA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9Nb2RlbFwiKSk7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIE1vZGVsXG4gKiBAbWVtYmVyT2YgZGVjb3JhdG9yLXZhbGlkYXRpb25cbiAqL1xuXG5leHBvcnQgKiBhcyBNb2RlbCBmcm9tIFwiLi9Nb2RlbFwiO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMgPSBleHBvcnRzLlZhbGlkYXRpb25LZXlzID0gdm9pZCAwO1xuZXhwb3J0cy5WYWxpZGF0aW9uS2V5cyA9IHtcbiAgICBSRUZMRUNUOiAnbW9kZWwudmFsaWRhdGlvbi4nLFxuICAgIFJFUVVJUkVEOiAncmVxdWlyZWQnLFxuICAgIE1JTjogJ21pbicsXG4gICAgTUFYOiAnbWF4JyxcbiAgICBNSU5fTEVOR1RIOiAnbWlubGVuZ3RoJyxcbiAgICBNQVhfTEVOR1RIOiAnbWF4bGVuZ3RoJyxcbiAgICBQQVRURVJOOiAncGF0dGVybicsXG4gICAgRU1BSUw6IFwiZW1haWxcIixcbiAgICBVUkw6IFwidXJsXCJcbn07XG5leHBvcnRzLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMgPSB7XG4gICAgUkVRVUlSRUQ6ICdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyxcbiAgICBNSU46ICdUaGUgbWluaW11bSB2YWx1ZSBpcyB7MH0nLFxuICAgIE1BWDogJ1RoZSBtYXhpbXVtIHZhbHVlIGlzIHswfScsXG4gICAgTUlOX0xFTkdUSDogJ1RoZSBtaW5pbXVtIGxlbmd0aCBpcyB7MH0nLFxuICAgIE1BWF9MRU5HVEg6ICdUaGUgbWF4aW11bSBsZW5ndGggaXMgezB9JyxcbiAgICBQQVRURVJOOiAnVGhlIHZhbHVlIGRvZXMgbm90IG1hdGNoIHRoZSBwYXR0ZXJuJyxcbiAgICBFTUFJTDogXCJUaGUgdmFsdWUgaXMgbm90IGEgdmFsaWQgZW1haWxcIixcbiAgICBVUkw6IFwiVGhlIHZhbHVlIGlzIG5vdCBhIHZhbGlkIFVSTFwiLFxuICAgIERFRkFVTFQ6IFwiVGhlcmUgaXMgYW4gRXJyb3JcIlxufTsiLCIvKipcbiAqIEBlbnVtXG4gKiBAbmFtZXNwYWNlIFZhbGlkYXRpb25cbiAqIEBtZW1iZXJPZiBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgVmFsaWRhdGlvbktleXMgPSB7XG4gICAgUkVGTEVDVDogJ21vZGVsLnZhbGlkYXRpb24uJyxcbiAgICBSRVFVSVJFRDogJ3JlcXVpcmVkJyxcbiAgICBNSU46ICdtaW4nLFxuICAgIE1BWDogJ21heCcsXG4gICAgTUlOX0xFTkdUSDogJ21pbmxlbmd0aCcsXG4gICAgTUFYX0xFTkdUSDogJ21heGxlbmd0aCcsXG4gICAgUEFUVEVSTjogJ3BhdHRlcm4nLFxuICAgIEVNQUlMOiBcImVtYWlsXCIsXG4gICAgVVJMOiBcInVybFwiXG59XG5cbi8qKlxuICogQGVudW1cbiAqIEBuYW1lc3BhY2UgVmFsaWRhdGlvblxuICogQG1lbWJlck9mIGRlY29yYXRvci12YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX0VSUk9SX01FU1NBR0VTID0ge1xuICAgIFJFUVVJUkVEOiAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCcsXG4gICAgTUlOOiAnVGhlIG1pbmltdW0gdmFsdWUgaXMgezB9JyxcbiAgICBNQVg6ICdUaGUgbWF4aW11bSB2YWx1ZSBpcyB7MH0nLFxuICAgIE1JTl9MRU5HVEg6ICdUaGUgbWluaW11bSBsZW5ndGggaXMgezB9JyxcbiAgICBNQVhfTEVOR1RIOiAnVGhlIG1heGltdW0gbGVuZ3RoIGlzIHswfScsXG4gICAgUEFUVEVSTjogJ1RoZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCB0aGUgcGF0dGVybicsXG4gICAgRU1BSUw6IFwiVGhlIHZhbHVlIGlzIG5vdCBhIHZhbGlkIGVtYWlsXCIsXG4gICAgVVJMOiBcIlRoZSB2YWx1ZSBpcyBub3QgYSB2YWxpZCBVUkxcIixcbiAgICBERUZBVUxUOiBcIlRoZXJlIGlzIGFuIEVycm9yXCJcbn0iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMudXJsID0gZXhwb3J0cy5lbWFpbCA9IGV4cG9ydHMucGF0dGVybiA9IGV4cG9ydHMubWF4bGVuZ3RoID0gZXhwb3J0cy5taW5sZW5ndGggPSBleHBvcnRzLm1heCA9IGV4cG9ydHMubWluID0gZXhwb3J0cy5yZXF1aXJlZCA9IGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleSA9IHZvaWQgMDtcbnJlcXVpcmUoXCJyZWZsZWN0LW1ldGFkYXRhXCIpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xudmFyIGdldFZhbGlkYXRpb25LZXkgPSBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5SRUZMRUNUICsga2V5OyB9O1xuZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5ID0gZ2V0VmFsaWRhdGlvbktleTtcbnZhciByZXF1aXJlZCA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5SRVFVSVJFRDsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGV4cG9ydHMuZ2V0VmFsaWRhdGlvbktleShjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5SRVFVSVJFRCksIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnJlcXVpcmVkID0gcmVxdWlyZWQ7XG52YXIgbWluID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU47IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUlOKSwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMubWluID0gbWluO1xudmFyIG1heCA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1BWCksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1heCA9IG1heDtcbnZhciBtaW5sZW5ndGggPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTl9MRU5HVEg7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUlOX0xFTkdUSCksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1pbmxlbmd0aCA9IG1pbmxlbmd0aDtcbnZhciBtYXhsZW5ndGggPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEg7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShleHBvcnRzLmdldFZhbGlkYXRpb25LZXkoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLm1heGxlbmd0aCA9IG1heGxlbmd0aDtcbnZhciBwYXR0ZXJuID0gZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlBBVFRFUk4pLCB7XG4gICAgICAgICAgICB2YWx1ZTogdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogdmFsdWUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnBhdHRlcm4gPSBwYXR0ZXJuO1xudmFyIGVtYWlsID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLkVNQUlMKSwge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LCB0YXJnZXQsIHByb3BlcnR5S2V5KTtcbiAgICB9O1xufTtcbmV4cG9ydHMuZW1haWwgPSBlbWFpbDtcbnZhciB1cmwgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuVVJMOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoZXhwb3J0cy5nZXRWYWxpZGF0aW9uS2V5KGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlVSTCksIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSk7XG4gICAgfTtcbn07XG5leHBvcnRzLnVybCA9IHVybDsiLCIvKipcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuXG5cbmltcG9ydCBcInJlZmxlY3QtbWV0YWRhdGFcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuXG5cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBmdW5jdGlvblxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgZ2V0VmFsaWRhdGlvbktleSA9IChrZXk6IHN0cmluZykgPT4gVmFsaWRhdGlvbktleXMuUkVGTEVDVCArIGtleTtcblxuLyoqXG4gKiBNYXJrcyB0aGUgcHJvcGVydHkgYXMgcmVxdWlyZWQuXG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLlJFUVVJUkVEfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgcmVxdWlyZWQgPSAobWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5SRVFVSVJFRCkgPT4gKHRhcmdldDogYW55LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5SRVFVSVJFRCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIG1pbmltdW0gdmFsdWUgZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NSU59XG4gKlxuICogQHBhcmFtIHtudW1iZXIgfCBEYXRlfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgbWluID0gKHZhbHVlOiBudW1iZXIgfCBEYXRlIHwgc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTikgPT4gKHRhcmdldDogT2JqZWN0LCBwcm9wZXJ0eUtleTogc3RyaW5nKSA9PiB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcbiAgICAgICAgZ2V0VmFsaWRhdGlvbktleShWYWxpZGF0aW9uS2V5cy5NSU4pLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBtYXhpbXVtIHZhbHVlIGZvciB0aGUgcHJvcGVydHlcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuTUFYfVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyIHwgRGF0ZX0gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IG1heCA9ICh2YWx1ZTogbnVtYmVyIHwgRGF0ZSB8IHN0cmluZywgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVgpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuTUFYKSxcbiAgICAgICAge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIGEgbWluaW11bSBsZW5ndGggZm9yIHRoZSBwcm9wZXJ0eVxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5NSU5fTEVOR1RIfVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IG1pbmxlbmd0aCA9ICh2YWx1ZTogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTl9MRU5HVEgpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuTUlOX0xFTkdUSCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59XG5cbi8qKlxuICogRGVmaW5lcyBhIG1heGltdW0gbGVuZ3RoIGZvciB0aGUgcHJvcGVydHlcbiAqXG4gKiBWYWxpZGF0b3JzIHRvIHZhbGlkYXRlIGEgZGVjb3JhdGVkIHByb3BlcnR5IG11c3QgdXNlIGtleSB7QGxpbmsgVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbbWVzc2FnZV0gdGhlIGVycm9yIG1lc3NhZ2UuIERlZmF1bHRzIHRvIHtAbGluayBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWF9MRU5HVEh9XG4gKiBAZGVjb3JhdG9yXG4gKiBAbmFtZXNwYWNlIERlY29yYXRvcnNcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBtYXhsZW5ndGggPSAodmFsdWU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVhfTEVOR1RIKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLk1BWF9MRU5HVEgpLFxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgYSBSZWdFeHAgcGF0dGVybiB0aGUgcHJvcGVydHkgbXVzdCByZXNwZWN0XG4gKlxuICogVmFsaWRhdG9ycyB0byB2YWxpZGF0ZSBhIGRlY29yYXRlZCBwcm9wZXJ0eSBtdXN0IHVzZSBrZXkge0BsaW5rIFZhbGlkYXRpb25LZXlzLlBBVFRFUk59XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgcGF0dGVybiA9ICh2YWx1ZTogUmVnRXhwIHwgc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk4pID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuUEFUVEVSTiksXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiB2YWx1ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHByb3BlcnR5S2V5XG4gICAgKTtcbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBwcm9wZXJ0eSBhcyBhbiBlbWFpbFxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5FTUFJTH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW21lc3NhZ2VdIHRoZSBlcnJvciBtZXNzYWdlLiBEZWZhdWx0cyB0byB7QGxpbmsgREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTH1cbiAqIEBkZWNvcmF0b3JcbiAqIEBuYW1lc3BhY2UgRGVjb3JhdG9yc1xuICogQG1lbWJlck9mIFZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGVtYWlsID0gKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuRU1BSUwpID0+ICh0YXJnZXQ6IE9iamVjdCwgcHJvcGVydHlLZXk6IHN0cmluZykgPT4ge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXG4gICAgICAgIGdldFZhbGlkYXRpb25LZXkoVmFsaWRhdGlvbktleXMuRU1BSUwpLFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgcHJvcGVydHlLZXlcbiAgICApO1xufVxuXG4vKipcbiAqIERlZmluZXMgdGhlIHByb3BlcnR5IGFzIGFuIFVSTFxuICpcbiAqIFZhbGlkYXRvcnMgdG8gdmFsaWRhdGUgYSBkZWNvcmF0ZWQgcHJvcGVydHkgbXVzdCB1c2Uga2V5IHtAbGluayBWYWxpZGF0aW9uS2V5cy5VUkx9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFttZXNzYWdlXSB0aGUgZXJyb3IgbWVzc2FnZS4gRGVmYXVsdHMgdG8ge0BsaW5rIERFRkFVTFRfRVJST1JfTUVTU0FHRVMuVVJMfVxuICogQGRlY29yYXRvclxuICogQG5hbWVzcGFjZSBEZWNvcmF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgdXJsID0gKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuVVJMKSA9PiAodGFyZ2V0OiBPYmplY3QsIHByb3BlcnR5S2V5OiBzdHJpbmcpID0+IHtcbiAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKFxuICAgICAgICBnZXRWYWxpZGF0aW9uS2V5KFZhbGlkYXRpb25LZXlzLlVSTCksXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcm9wZXJ0eUtleVxuICAgICk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlZhbGlkYXRvcnMgPSBleHBvcnRzLkRlY29yYXRvcnMgPSB2b2lkIDA7XG5leHBvcnRzLkRlY29yYXRvcnMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vZGVjb3JhdG9yc1wiKSk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdHlwZXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3ZhbGlkYXRpb25cIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKSwgZXhwb3J0cyk7XG5leHBvcnRzLlZhbGlkYXRvcnMgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vVmFsaWRhdG9yc1wiKSk7IiwiLyoqXG4gKiBAbmFtZXNwYWNlIFZhbGlkYXRpb25cbiAqIEBtZW1iZXJPZiBkZWNvcmF0b3ItdmFsaWRhdGlvblxuICovXG5cbmV4cG9ydCAqIGFzIERlY29yYXRvcnMgZnJvbSAnLi9kZWNvcmF0b3JzJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0ICogZnJvbSAnLi92YWxpZGF0aW9uJztcbmV4cG9ydCAqIGZyb20gJy4vY29uc3RhbnRzJztcbmV4cG9ydCAqIGFzIFZhbGlkYXRvcnMgZnJvbSAnLi9WYWxpZGF0b3JzJztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlsID0gZnJvbS5sZW5ndGgsIGogPSB0by5sZW5ndGg7IGkgPCBpbDsgaSsrLCBqKyspXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcbiAgICByZXR1cm4gdG87XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy52YWxpZGF0ZSA9IGV4cG9ydHMuVmFsaWRhdG9yUmVnaXN0cnkgPSB2b2lkIDA7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlsc1wiKTtcbnZhciBWYWxpZGF0b3JzID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL1ZhbGlkYXRvcnNcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvcnMvVmFsaWRhdG9yXCIpKTtcbmZ1bmN0aW9uIFZhbFJlZ2lzdHJ5KCkge1xuICAgIHZhciBpbml0aWFsID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgaW5pdGlhbFtfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgcmVnaXN0cnkgPSBuZXcgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FjaGUgPSB7fTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHZhbGlkYXRvciA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3JbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbGlkYXRvci5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBWYWxpZGF0b3JfMS5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlW3YudmFsaWRhdGlvbktleV0gPSB2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnN0cnVjdG9yTWV0aG9kID0gdi5kZWZhdWx0IHx8IHY7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBjb25zdHJ1Y3Rvck1ldGhvZCgpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVtpbnN0YW5jZS52YWxpZGF0aW9uS2V5XSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBzZWxmLmdldFZhbGlkYXRvciA9IGZ1bmN0aW9uICh2YWxpZGF0b3JLZXkpIHtcbiAgICAgICAgICAgIGlmICghKHZhbGlkYXRvcktleSBpbiBjYWNoZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW3ZhbGlkYXRvcktleV07XG4gICAgICAgIH07XG4gICAgfSgpO1xuICAgIHJlZ2lzdHJ5LnJlZ2lzdGVyLmFwcGx5KHJlZ2lzdHJ5LCBpbml0aWFsKTtcbiAgICByZXR1cm4gcmVnaXN0cnk7XG59XG5leHBvcnRzLlZhbGlkYXRvclJlZ2lzdHJ5ID0gVmFsUmVnaXN0cnkuYXBwbHkodm9pZCAwLCBPYmplY3QudmFsdWVzKFZhbGlkYXRvcnMpKTtcbmZ1bmN0aW9uIHZhbGlkYXRlKG9iaikge1xuICAgIHZhciBkZWNvcmF0ZWRQcm9wZXJ0aWVzID0gW107XG4gICAgZm9yICh2YXIgcHJvcCBpbiBvYmopXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpXG4gICAgICAgICAgICBkZWNvcmF0ZWRQcm9wZXJ0aWVzLnB1c2godXRpbHNfMS5nZXRQcm9wZXJ0eURlY29yYXRvcnMoY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuUkVGTEVDVCwgb2JqLCBwcm9wKSk7XG4gICAgcmV0dXJuIGRlY29yYXRlZFByb3BlcnRpZXMucmVkdWNlKGZ1bmN0aW9uIChhY2N1bSwgZGVjb3JhdGVkUHJvcGVydHkpIHtcbiAgICAgICAgdmFyIHByb3AgPSBkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wLCBkZWNvcmF0b3JzID0gZGVjb3JhdGVkUHJvcGVydHkuZGVjb3JhdG9ycztcbiAgICAgICAgaWYgKCFkZWNvcmF0b3JzIHx8ICFkZWNvcmF0b3JzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBhY2N1bTtcbiAgICAgICAgdmFyIGVycnMgPSBkZWNvcmF0b3JzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBkZWNvcmF0b3IpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZGF0b3IgPSBleHBvcnRzLlZhbGlkYXRvclJlZ2lzdHJ5LmdldFZhbGlkYXRvcihkZWNvcmF0b3Iua2V5KTtcbiAgICAgICAgICAgIGlmICghdmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgTWF0Y2hpbmcgdmFsaWRhdG9yIGZvciBcIiArIGRlY29yYXRvci5rZXkgKyBcIiBmb3IgcHJvcGVydHkgXCIgKyBTdHJpbmcoZGVjb3JhdGVkUHJvcGVydHkucHJvcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVyciA9IHZhbGlkYXRvci5oYXNFcnJvcnMuYXBwbHkodmFsaWRhdG9yLCBfX3NwcmVhZEFycmF5KFtvYmpbcHJvcF1dLCBPYmplY3QudmFsdWVzKGRlY29yYXRvci5wcm9wcykpKTtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhY2MgPSBhY2MgfHwge307XG4gICAgICAgICAgICAgICAgYWNjW2RlY29yYXRvci5rZXldID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKGVycnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9wRXJyb3JzID0ge1xuICAgICAgICAgICAgICAgIHByb3BlcnR5OiBkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wLFxuICAgICAgICAgICAgICAgIGVycm9yczogZXJyc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFjY3VtID0gYWNjdW0gfHwgW107XG4gICAgICAgICAgICBhY2N1bS5wdXNoKHByb3BFcnJvcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2N1bTtcbiAgICB9LCB1bmRlZmluZWQpO1xufVxuZXhwb3J0cy52YWxpZGF0ZSA9IHZhbGlkYXRlOyIsImltcG9ydCBNb2RlbCBmcm9tIFwiLi4vTW9kZWwvTW9kZWxcIjtcbmltcG9ydCB7RXJyb3JzLCBSZWdpc3RyeX0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7Z2V0UHJvcGVydHlEZWNvcmF0b3JzfSBmcm9tICcuLi91dGlscydcbmltcG9ydCAqIGFzIFZhbGlkYXRvcnMgZnJvbSAnLi9WYWxpZGF0b3JzJ1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5c30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvcnMvVmFsaWRhdG9yXCI7XG5cbi8qKlxuICogUmV0dXJuc1xuICogQHJldHVybiB7Kn1cbiAqIEBjb25zdHJ1Y3RvclxuICogQGZ1bmN0aW9uIFZhbFJlZ2lzdHJ5XG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5mdW5jdGlvbiBWYWxSZWdpc3RyeSguLi5pbml0aWFsOiBhbnlbXSkgOiBSZWdpc3RyeSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IHJlZ2lzdHJ5OiBSZWdpc3RyeSA9ICBuZXcgZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc3QgY2FjaGU6IGFueSA9IHt9O1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IHNlbGY6IGFueSA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JcbiAgICAgICAgICogQG1lbWJlck9mIFZhbGlkYXRvclJlZ2lzdHJ5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLnJlZ2lzdGVyID0gZnVuY3Rpb24oLi4udmFsaWRhdG9yOiBhbnlbXSkgOiB2b2lke1xuICAgICAgICAgICAgdmFsaWRhdG9yLmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBWYWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVt2LnZhbGlkYXRpb25LZXldID0gdjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdG9yTWV0aG9kID0gdi5kZWZhdWx0IHx8IHY7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2U6IFZhbGlkYXRvciA9IG5ldyBjb25zdHJ1Y3Rvck1ldGhvZCgpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVtpbnN0YW5jZS52YWxpZGF0aW9uS2V5XSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB2YWxpZGF0b3JLZXlcbiAgICAgICAgICogQHJldHVybiB7Kn1cbiAgICAgICAgICogQG1lbWJlck9mIFZhbGlkYXRvclJlZ2lzdHJ5XG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmdldFZhbGlkYXRvciA9IGZ1bmN0aW9uKHZhbGlkYXRvcktleTogc3RyaW5nKXtcbiAgICAgICAgICAgIGlmICghKHZhbGlkYXRvcktleSBpbiBjYWNoZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW3ZhbGlkYXRvcktleV07XG4gICAgICAgIH1cbiAgICB9KClcbiAgICByZWdpc3RyeS5yZWdpc3RlciguLi5pbml0aWFsKTtcbiAgICByZXR1cm4gcmVnaXN0cnk7XG59XG5cbi8qKlxuICogQGNvbnN0YW50XG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgVmFsaWRhdG9yUmVnaXN0cnkgPSBWYWxSZWdpc3RyeSguLi5PYmplY3QudmFsdWVzKFZhbGlkYXRvcnMpKTtcblxuLyoqXG4gKiBBbmFseXNlcyB0aGUgZGVjb3JhdGlvbnMgb2YgdGhlIHByb3BlcnRpZXMgYW5kIHZhbGlkYXRlcyB0aGUgb2JqIGFjY29yZGluZyB0byB0aGVtXG4gKiBAZnVuY3Rpb24gdmFsaWRhdGVcbiAqIEBtZW1iZXJPZiBWYWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZTxUIGV4dGVuZHMgTW9kZWw+KG9iajogVCkgOiBFcnJvcnN7XG4gICAgY29uc3QgZGVjb3JhdGVkUHJvcGVydGllcyA9IFtdO1xuICAgIGZvciAobGV0IHByb3AgaW4gb2JqKVxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKVxuICAgICAgICAgICAgZGVjb3JhdGVkUHJvcGVydGllcy5wdXNoKGdldFByb3BlcnR5RGVjb3JhdG9ycyhWYWxpZGF0aW9uS2V5cy5SRUZMRUNULCBvYmosIHByb3ApKTtcblxuICAgIHJldHVybiBkZWNvcmF0ZWRQcm9wZXJ0aWVzLnJlZHVjZSgoYWNjdW0sIGRlY29yYXRlZFByb3BlcnR5KSA9PiB7XG4gICAgICAgIGNvbnN0IHtwcm9wLCBkZWNvcmF0b3JzfSA9IGRlY29yYXRlZFByb3BlcnR5O1xuICAgICAgICBpZiAoIWRlY29yYXRvcnMgfHwgIWRlY29yYXRvcnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGFjY3VtO1xuXG4gICAgICAgIGNvbnN0IGVycnMgPSBkZWNvcmF0b3JzLnJlZHVjZSgoYWNjLCBkZWNvcmF0b3I6IHtrZXk6IHN0cmluZywgcHJvcHM6IHt9fSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gVmFsaWRhdG9yUmVnaXN0cnkuZ2V0VmFsaWRhdG9yKGRlY29yYXRvci5rZXkpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0b3Ipe1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgTWF0Y2hpbmcgdmFsaWRhdG9yIGZvciAke2RlY29yYXRvci5rZXl9IGZvciBwcm9wZXJ0eSAke1N0cmluZyhkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wKX1gKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25zdCBlcnIgPSB2YWxpZGF0b3IuaGFzRXJyb3JzKG9ialtwcm9wXSwgLi4uT2JqZWN0LnZhbHVlcyhkZWNvcmF0b3IucHJvcHMpKTtcbiAgICAgICAgICAgIGlmIChlcnIpe1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICBhY2MgPSBhY2MgfHwge307XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGFjY1tkZWNvcmF0b3Iua2V5XSA9IGVycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgdW5kZWZpbmVkKTtcblxuICAgICAgICBpZiAoZXJycyl7XG4gICAgICAgICAgICBjb25zdCBwcm9wRXJyb3JzID0ge1xuICAgICAgICAgICAgICAgIHByb3BlcnR5OiBkZWNvcmF0ZWRQcm9wZXJ0eS5wcm9wLFxuICAgICAgICAgICAgICAgIGVycm9yczogZXJyc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgYWNjdW0gPSBhY2N1bSB8fCBbXTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGFjY3VtLnB1c2gocHJvcEVycm9ycyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWNjdW07XG4gICAgfSwgdW5kZWZpbmVkKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFBhdHRlcm5WYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCIpKTtcbnZhciBFbWFpbFZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVtYWlsVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtYWlsVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5FTUFJTDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuRU1BSUwsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIEVtYWlsVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuaGFzRXJyb3JzLmNhbGwodGhpcywgdmFsdWUsIEVtYWlsVmFsaWRhdG9yLmVtYWlsUGF0LCBtZXNzYWdlKTtcbiAgICB9O1xuICAgIEVtYWlsVmFsaWRhdG9yLmVtYWlsUGF0ID0gL1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPy87XG4gICAgcmV0dXJuIEVtYWlsVmFsaWRhdG9yO1xufShQYXR0ZXJuVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gRW1haWxWYWxpZGF0b3I7IiwiaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IFBhdHRlcm5WYWxpZGF0b3IgZnJvbSBcIi4vUGF0dGVyblZhbGlkYXRvclwiO1xuXG4vKipcbiAqIEVtYWlsIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBFbWFpbFZhbGlkYXRvclxuICogQGV4dGVuZHMgUGF0dGVyblZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1haWxWYWxpZGF0b3IgZXh0ZW5kcyBQYXR0ZXJuVmFsaWRhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBlbWFpbFBhdDogUmVnRXhwID0gL1thLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPy87XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLkVNQUlMKXtcbiAgICAgICAgc3VwZXIoVmFsaWRhdGlvbktleXMuRU1BSUwsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmhhc0Vycm9ycyh2YWx1ZSwgRW1haWxWYWxpZGF0b3IuZW1haWxQYXQsIG1lc3NhZ2UpO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgTWF4TGVuZ3RoVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWF4TGVuZ3RoVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1heExlbmd0aFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUFYX0xFTkdUSCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWF4TGVuZ3RoVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1heGxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+IG1heGxlbmd0aCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWF4bGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBNYXhMZW5ndGhWYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1heExlbmd0aFZhbGlkYXRvcjsiLCJpbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG4vKipcbiAqIE1heCBMZW5ndGggVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIE1heExlbmd0aFZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXhMZW5ndGhWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUFYX0xFTkdUSCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1BWF9MRU5HVEgsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1heGxlbmd0aDogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiBtYXhsZW5ndGggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1heGxlbmd0aCkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBNYXhWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXhWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWF4VmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NQVg7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1BWCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWF4VmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1heCwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlID4gbWF4ID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtYXgpIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIE1heFZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWF4VmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogTWF4IFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBNYXhWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWF4VmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1BWCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1BWCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IG51bWJlciwgbWF4OiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlID4gbWF4ID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtYXgpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgTWluTGVuZ3RoVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWluTGVuZ3RoVmFsaWRhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1pbkxlbmd0aFZhbGlkYXRvcihtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSDsgfVxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29uc3RhbnRzXzEuVmFsaWRhdGlvbktleXMuTUlOX0xFTkdUSCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWluTGVuZ3RoVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1pbmxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA8IG1pbmxlbmd0aCA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSwgbWlubGVuZ3RoKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBNaW5MZW5ndGhWYWxpZGF0b3I7XG59KFZhbGlkYXRvcl8xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1pbkxlbmd0aFZhbGlkYXRvcjsiLCJpbXBvcnQgVmFsaWRhdG9yIGZyb20gXCIuL1ZhbGlkYXRvclwiO1xuaW1wb3J0IHtWYWxpZGF0aW9uS2V5cywgREVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtFcnJvcnN9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIE1pbiBMZW5ndGggVmFsaWRhdG9yXG4gKlxuICogQGNsYXNzIE1pbkxlbmd0aFZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaW5MZW5ndGhWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuTUlOX0xFTkdUSCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1JTl9MRU5HVEgsIG1lc3NhZ2UpXG4gICAgfVxuXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1pbmxlbmd0aDogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogRXJyb3JzIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPCBtaW5sZW5ndGggPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UsIG1pbmxlbmd0aCkgOiB1bmRlZmluZWQ7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBWYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WYWxpZGF0b3JcIikpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBNaW5WYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNaW5WYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWluVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5NSU47IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLk1JTiwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgTWluVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1pbiwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtaW4pIDogdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIE1pblZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTWluVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogTWluIFZhbGlkYXRvclxuICpcbiAqIEBjbGFzcyBNaW5WYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWluVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLk1JTil7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLk1JTiwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlLCBtaW4pIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVmFsaWRhdG9yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdG9yXCIpKTtcbnZhciBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHNcIik7XG52YXIgUGF0dGVyblZhbGlkYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBhdHRlcm5WYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUGF0dGVyblZhbGlkYXRvcihrZXksIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7IGtleSA9IGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlBBVFRFUk47IH1cbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5QQVRURVJOOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBrZXksIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgfVxuICAgIFBhdHRlcm5WYWxpZGF0b3IucHJvdG90eXBlLmdldFBhdHRlcm4gPSBmdW5jdGlvbiAocGF0dGVybikge1xuICAgICAgICBpZiAoIVBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyLnRlc3QocGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgdmFyIG1hdGNoID0gcGF0dGVybi5tYXRjaChQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlcik7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG1hdGNoWzFdLCBtYXRjaFsyXSk7XG4gICAgfTtcbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIHBhdHRlcm4sIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcGF0dGVybiA9IHR5cGVvZiBwYXR0ZXJuID09PSAnc3RyaW5nJyA/IHRoaXMuZ2V0UGF0dGVybihwYXR0ZXJuKSA6IHBhdHRlcm47XG4gICAgICAgIHJldHVybiAhcGF0dGVybi50ZXN0KHZhbHVlKSA/IHRoaXMuZ2V0TWVzc2FnZShtZXNzYWdlIHx8IHRoaXMubWVzc2FnZSkgOiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBQYXR0ZXJuVmFsaWRhdG9yLnJlZ2V4cFBhcnNlciA9IG5ldyBSZWdFeHAoXCJeXFwvKC4rKVxcLyhbZ2ltdXNdKikkXCIpO1xuICAgIHJldHVybiBQYXR0ZXJuVmFsaWRhdG9yO1xufShWYWxpZGF0b3JfMS5kZWZhdWx0KSk7XG5leHBvcnRzLmRlZmF1bHQgPSBQYXR0ZXJuVmFsaWRhdG9yOyIsImltcG9ydCBWYWxpZGF0b3IgZnJvbSBcIi4vVmFsaWRhdG9yXCI7XG5pbXBvcnQge1ZhbGlkYXRpb25LZXlzLCBERUZBVUxUX0VSUk9SX01FU1NBR0VTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge0Vycm9yc30gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbi8qKlxuICogUGF0dGVybiBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgUGF0dGVyblZhbGlkYXRvclxuICogQGV4dGVuZHMgVmFsaWRhdG9yXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXR0ZXJuVmFsaWRhdG9yIGV4dGVuZHMgVmFsaWRhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSByZWdleHBQYXJzZXI6IFJlZ0V4cCA9IG5ldyBSZWdFeHAoXCJeXFwvKC4rKVxcLyhbZ2ltdXNdKikkXCIpO1xuXG4gICAgY29uc3RydWN0b3Ioa2V5OiBzdHJpbmcgPSBWYWxpZGF0aW9uS2V5cy5QQVRURVJOLCBtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlBBVFRFUk4pe1xuICAgICAgICBzdXBlcihrZXksIG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF0dGVybihwYXR0ZXJuOiBzdHJpbmcpOiBSZWdFeHAge1xuICAgICAgICBpZiAoIVBhdHRlcm5WYWxpZGF0b3IucmVnZXhwUGFyc2VyLnRlc3QocGF0dGVybikpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgICAgY29uc3QgbWF0Y2g6IGFueSA9IHBhdHRlcm4ubWF0Y2goUGF0dGVyblZhbGlkYXRvci5yZWdleHBQYXJzZXIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChtYXRjaFsxXSwgbWF0Y2hbMl0pO1xuICAgIH1cblxuICAgIGhhc0Vycm9ycyh2YWx1ZTogc3RyaW5nLCBwYXR0ZXJuOiBSZWdFeHAgfCBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBwYXR0ZXJuID0gdHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnID8gdGhpcy5nZXRQYXR0ZXJuKHBhdHRlcm4pIDogcGF0dGVybjtcbiAgICAgICAgcmV0dXJuICFwYXR0ZXJuLnRlc3QodmFsdWUpID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFZhbGlkYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1ZhbGlkYXRvclwiKSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFJlcXVpcmVkVmFsaWRhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVxdWlyZWRWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVxdWlyZWRWYWxpZGF0b3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBjb25zdGFudHNfMS5ERUZBVUxUX0VSUk9SX01FU1NBR0VTLlJFUVVJUkVEOyB9XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjb25zdGFudHNfMS5WYWxpZGF0aW9uS2V5cy5SRVFVSVJFRCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgUmVxdWlyZWRWYWxpZGF0b3IucHJvdG90eXBlLmhhc0Vycm9ycyA9IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gIXZhbHVlID8gdGhpcy5nZXRNZXNzYWdlKG1lc3NhZ2UgfHwgdGhpcy5tZXNzYWdlKSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBSZXF1aXJlZFZhbGlkYXRvcjtcbn0oVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gUmVxdWlyZWRWYWxpZGF0b3I7IiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tIFwiLi9WYWxpZGF0b3JcIjtcbmltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBSZXF1aXJlZCBWYWxpZGF0b3JcbiAqXG4gKiBAY2xhc3MgUmVxdWlyZWRWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFZhbGlkYXRvclxuICogQG1lbWJlck9mIFZhbGlkYXRvcnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWlyZWRWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9IERFRkFVTFRfRVJST1JfTUVTU0FHRVMuUkVRVUlSRUQpe1xuICAgICAgICBzdXBlcihWYWxpZGF0aW9uS2V5cy5SRVFVSVJFRCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICBoYXNFcnJvcnModmFsdWU6IGFueSwgbWVzc2FnZT86IHN0cmluZyk6IEVycm9ycyB7XG4gICAgICAgIHJldHVybiAhdmFsdWUgPyB0aGlzLmdldE1lc3NhZ2UobWVzc2FnZSB8fCB0aGlzLm1lc3NhZ2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzXCIpO1xudmFyIFBhdHRlcm5WYWxpZGF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9QYXR0ZXJuVmFsaWRhdG9yXCIpKTtcbnZhciBVUkxWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVUkxWYWxpZGF0b3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVVJMVmFsaWRhdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IHZvaWQgMCkgeyBtZXNzYWdlID0gY29uc3RhbnRzXzEuREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5VUkw7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNvbnN0YW50c18xLlZhbGlkYXRpb25LZXlzLlVSTCwgbWVzc2FnZSkgfHwgdGhpcztcbiAgICB9XG4gICAgVVJMVmFsaWRhdG9yLnByb3RvdHlwZS5oYXNFcnJvcnMgPSBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuaGFzRXJyb3JzLmNhbGwodGhpcywgdmFsdWUsIFVSTFZhbGlkYXRvci51cmxQYXR0ZXJuLCBtZXNzYWdlKTtcbiAgICB9O1xuICAgIFVSTFZhbGlkYXRvci51cmxQYXR0ZXJuID0gL14oPzooPzooPzpodHRwcz98ZnRwKTopP1xcL1xcLykoPzpcXFMrKD86OlxcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcXC5cXGR7MSwzfSl7M30pKD8hKD86MTY5XFwuMjU0fDE5MlxcLjE2OCkoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtejAtOVxcdTAwYTEtXFx1ZmZmZl1bYS16MC05XFx1MDBhMS1cXHVmZmZmXy1dezAsNjJ9KT9bYS16MC05XFx1MDBhMS1cXHVmZmZmXVxcLikrKD86W2EtelxcdTAwYTEtXFx1ZmZmZl17Mix9XFwuPykpKD86OlxcZHsyLDV9KT8oPzpbLz8jXVxcUyopPyQvaTtcbiAgICByZXR1cm4gVVJMVmFsaWRhdG9yO1xufShQYXR0ZXJuVmFsaWRhdG9yXzEuZGVmYXVsdCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gVVJMVmFsaWRhdG9yOyIsImltcG9ydCB7VmFsaWRhdGlvbktleXMsIERFRkFVTFRfRVJST1JfTUVTU0FHRVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBQYXR0ZXJuVmFsaWRhdG9yIGZyb20gXCIuL1BhdHRlcm5WYWxpZGF0b3JcIjtcblxuXG4vKipcbiAqIFVSTCBWYWxpZGF0b3JcbiAqXG4gKiBQYXR0ZXJuIGZyb20ge0BsaW5rIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2RwZXJpbmkvNzI5Mjk0fVxuICpcbiAqIEBjbGFzcyBVUkxWYWxpZGF0b3JcbiAqIEBleHRlbmRzIFBhdHRlcm5WYWxpZGF0b3JcbiAqIEBtZW1iZXJPZiBWYWxpZGF0b3JzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVSTFZhbGlkYXRvciBleHRlbmRzIFBhdHRlcm5WYWxpZGF0b3Ige1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHVybFBhdHRlcm46IFJlZ0V4cCA9IC9eKD86KD86KD86aHR0cHM/fGZ0cCk6KT9cXC9cXC8pKD86XFxTKyg/OjpcXFMqKT9AKT8oPzooPyEoPzoxMHwxMjcpKD86XFwuXFxkezEsM30pezN9KSg/ISg/OjE2OVxcLjI1NHwxOTJcXC4xNjgpKD86XFwuXFxkezEsM30pezJ9KSg/ITE3MlxcLig/OjFbNi05XXwyXFxkfDNbMC0xXSkoPzpcXC5cXGR7MSwzfSl7Mn0pKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswMV1cXGR8MjJbMC0zXSkoPzpcXC4oPzoxP1xcZHsxLDJ9fDJbMC00XVxcZHwyNVswLTVdKSl7Mn0oPzpcXC4oPzpbMS05XVxcZD98MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC00XSkpfCg/Oig/OlthLXowLTlcXHUwMGExLVxcdWZmZmZdW2EtejAtOVxcdTAwYTEtXFx1ZmZmZl8tXXswLDYyfSk/W2EtejAtOVxcdTAwYTEtXFx1ZmZmZl1cXC4pKyg/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfVxcLj8pKSg/OjpcXGR7Miw1fSk/KD86Wy8/I11cXFMqKT8kL2k7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSBERUZBVUxUX0VSUk9SX01FU1NBR0VTLlVSTCl7XG4gICAgICAgIHN1cGVyKFZhbGlkYXRpb25LZXlzLlVSTCwgbWVzc2FnZSlcbiAgICB9XG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaGFzRXJyb3JzKHZhbHVlOiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvcnMge1xuICAgICAgICByZXR1cm4gc3VwZXIuaGFzRXJyb3JzKHZhbHVlLCBVUkxWYWxpZGF0b3IudXJsUGF0dGVybiwgbWVzc2FnZSk7XG4gICAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxuICAgICAgICB0b1tqXSA9IGZyb21baV07XG4gICAgcmV0dXJuIHRvO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzXCIpO1xudmFyIGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50c1wiKTtcbnZhciBWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZhbGlkYXRvcih2YWxpZGF0aW9uS2V5LCBtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IGNvbnN0YW50c18xLkRFRkFVTFRfRVJST1JfTUVTU0FHRVMuREVGQVVMVDsgfVxuICAgICAgICB0aGlzLnZhbGlkYXRpb25LZXkgPSB2YWxpZGF0aW9uS2V5O1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBWYWxpZGF0b3IucHJvdG90eXBlLmdldE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbHNfMS5zdHJpbmdGb3JtYXQuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFttZXNzYWdlXSwgYXJncykpO1xuICAgIH07XG4gICAgcmV0dXJuIFZhbGlkYXRvcjtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBWYWxpZGF0b3I7IiwiaW1wb3J0IHtzdHJpbmdGb3JtYXR9IGZyb20gXCIuLi8uLi91dGlsc1wiO1xuaW1wb3J0IFZhbGlkYXRhYmxlLCB7RXJyb3JzfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7REVGQVVMVF9FUlJPUl9NRVNTQUdFU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG4vKipcbiAqIEJhc2UgSW1wbGVtZW50YXRpb24gZm9yIFZhbGlkYXRvcnNcbiAqXG4gKiBAY2xhc3MgVmFsaWRhdG9yXG4gKiBAYWJzdHJhY3RcbiAqIEBpbXBsZW1lbnRzIFZhbGlkYXRhYmxlXG4gKiBAbWVtYmVyT2YgVmFsaWRhdG9yc1xuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBWYWxpZGF0b3IgaW1wbGVtZW50cyBWYWxpZGF0YWJsZXtcbiAgICByZWFkb25seSB2YWxpZGF0aW9uS2V5OiBzdHJpbmc7XG4gICAgcHJvdGVjdGVkIG1lc3NhZ2U6IHN0cmluZztcblxuXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25LZXk6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nID0gREVGQVVMVF9FUlJPUl9NRVNTQUdFUy5ERUZBVUxUKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGlvbktleSA9IHZhbGlkYXRpb25LZXk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSl7XG4gICAgICAgIHJldHVybiBzdHJpbmdGb3JtYXQobWVzc2FnZSwgLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGFic3RyYWN0IGhhc0Vycm9ycyh2YWx1ZTogYW55LCAuLi5hcmdzOiBhbnlbXSk6IEVycm9ycztcbn0iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VUkxWYWxpZGF0b3IgPSBleHBvcnRzLlBhdHRlcm5WYWxpZGF0b3IgPSBleHBvcnRzLk1pblZhbGlkYXRvciA9IGV4cG9ydHMuTWluTGVuZ3RoVmFsaWRhdG9yID0gZXhwb3J0cy5NYXhWYWxpZGF0b3IgPSBleHBvcnRzLk1heExlbmd0aFZhbGlkYXRvciA9IGV4cG9ydHMuUmVxdWlyZWRWYWxpZGF0b3IgPSBleHBvcnRzLkVtYWlsVmFsaWRhdG9yID0gdm9pZCAwO1xuZXhwb3J0cy5FbWFpbFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9FbWFpbFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLlJlcXVpcmVkVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL1JlcXVpcmVkVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuTWF4TGVuZ3RoVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01heExlbmd0aFZhbGlkYXRvclwiKSk7XG5leHBvcnRzLk1heFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9NYXhWYWxpZGF0b3JcIikpO1xuZXhwb3J0cy5NaW5MZW5ndGhWYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vTWluTGVuZ3RoVmFsaWRhdG9yXCIpKTtcbmV4cG9ydHMuTWluVmFsaWRhdG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL01pblZhbGlkYXRvclwiKSk7XG5leHBvcnRzLlBhdHRlcm5WYWxpZGF0b3IgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcIi4vUGF0dGVyblZhbGlkYXRvclwiKSk7XG5leHBvcnRzLlVSTFZhbGlkYXRvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi9VUkxWYWxpZGF0b3JcIikpOyIsIi8qKlxuICogQG5hbWVzcGFjZSBWYWxpZGF0b3JzXG4gKiBAbWVtYmVyT2YgVmFsaWRhdGlvblxuICovXG5cblxuZXhwb3J0ICogYXMgRW1haWxWYWxpZGF0b3IgZnJvbSAnLi9FbWFpbFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBSZXF1aXJlZFZhbGlkYXRvciBmcm9tICcuL1JlcXVpcmVkVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIE1heExlbmd0aFZhbGlkYXRvciBmcm9tICcuL01heExlbmd0aFZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBNYXhWYWxpZGF0b3IgZnJvbSAnLi9NYXhWYWxpZGF0b3InO1xuZXhwb3J0ICogYXMgTWluTGVuZ3RoVmFsaWRhdG9yIGZyb20gJy4vTWluTGVuZ3RoVmFsaWRhdG9yJztcbmV4cG9ydCAqIGFzIE1pblZhbGlkYXRvciBmcm9tICcuL01pblZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBQYXR0ZXJuVmFsaWRhdG9yIGZyb20gJy4vUGF0dGVyblZhbGlkYXRvcic7XG5leHBvcnQgKiBhcyBVUkxWYWxpZGF0b3IgZnJvbSAnLi9VUkxWYWxpZGF0b3InOyJdfQ==
